function BingMapsControlLoaded(){Meetup.Bing.apiLoaded=!0}function googleLocalSearchCallback(a){$(document.body).trigger("googleCallback",a);for(var b=document.getElementsByTagName("script"),c="http://ajax.googleapis.com/ajax/services/search/local",d=b.length,e=null;d--;)e=b[d],e.src.search(c)>=0&&$(e).remove()}function initialize(){$(document.body).trigger("geocoderCallback"),$(document.body).data("geocoderLoaded",!0)}Meetup.Templates={rsvpTemplate:'<form method="post" action="{{eventurl}}" id="rsvp-widget-form"><div class="rsvp-section">				{{#rsvpYes}}				<h3>Count me in because...</h3>				{{/rsvpYes}}				{{^rsvpYes}}				<h3>Leave a comment</h3>				{{/rsvpYes}}				<textarea style="height: 3em;" name="rsvpcomment" id="rsvpcomment" class="hasMaxLen maxChars250">{{rsvpComment}}</textarea>				</div>				{{#hasGuests}}				<div class="rsvp-section">					I\'m bringing <input type="text" name="guests" id="guests" maxlength="2" size="2" value="{{numGuests}}" style="text-align:center" /> guests				</div>				{{/hasGuests}}				{{#rsvpClosedButHasGuests}}				<div class="rsvp-section">					I\'m bringing {{numGuests}} guests <input type="hidden" name="guests" id="guests" maxlength="2" size="2" value="{{numGuests}}" style="text-align:center" /> 				</div>				{{/rsvpClosedButHasGuests}}				{{#hasPayment}}				<div class="rsvp-section line">					<p>{{price}}: {{fee}} 					{{#hasWL}} <br /><span style="font-size:9px">(If you get off the waitlist)</span> {{/hasWL}}					</p>					{{#showPayment}}					<div class="line">					<input type="checkbox" name="" value="true" id="pay_now" class="unit" style="margin:0 0.5em 0 0" />					<label class="unit size4of5 D_less">						{{{refundpolicy}}} 					</label>					</div>					{{/showPayment}}				</div>				{{/hasPayment}}				<div style="margin: 0.75em 0 0.5em;">					<input type="submit" class="button primary" id="submit-rsvp" value="Ok" /> <a href="#" id="close-rsvp">Close</a>				</div></form>',shareTemplate:'<div class="rsvp-section">					<h3 id="share-header">Great! Let people know...</h3>					<textarea style="height: 6em;" name="arg_message" id="shareMessage" class="hasMaxLen maxChars140">{{defaultCopy}}</textarea>				</div>				<div class="rsvp-section">					<div class="line" style="margin:0.25em 0">					<input id="rsvpToggleFacebook" type="checkbox" name="" value="true" class="unit" style="margin:0 0.5em 0 0" />					<label class="unit size4of5 D_less">						<img id="rsvpIconFacebook" src="/img/externalservice/socialmediaicons/facebook-16x16g.png" style="vertical-align:middle;"> Facebook<br />						<span id="rsvpFacebookHandle">{{{fname}}}</span>					</label>					</div>					<div class="line" style="margin:0.25em 0">					<input id="rsvpToggleTwitter" type="checkbox" name="" value="true" class="unit" style="margin:0 0.5em 0 0" />					<label class="unit size4of5 D_less">						<img id="rsvpIconTwitter" src="/img/externalservice/socialmediaicons/twitter-16x16g.png" style="vertical-align:middle;"> Twitter<br>						<span id="rsvpTwitterHandle"></span>					</label>					</div>				</div>				<div style="margin: 0.75em 0 0.5em;">					<input type="submit" class="button primary" id="submit-share" value="Share" /> <a href="#" id="close-share">Skip</a>				</div>',moreEventsTemplate:'<div class="rsvp-section">					{{{title}}}					{{{body}}}				</div>				<div style="margin: 0.75em 0 0.5em;">					<a href=""#" id="close-rsvp">Close</a>				</div>',statusTemplates:{yes:'<div class="response-status yes">I\'m going</div>				<div class="line">					<div class="unit size1of2">						<a href="#" class="rsvp-action sub-rsvp-action update">{{updatecopy}}</a>					</div>					<div class="unit lastUnit">						<a href="#" class="sub-rsvp-action remove-rsvp">{{removecopy}}</a>					</div>				</div>',wait:'<div class="response-status wait">I\'m waiting</div>				<div class="line">					<div class="unit size1of2">						<a href="#" class="rsvp-action sub-rsvp-action update">{{updatecopy}}</a>					</div>					<div class="unit lastUnit">						<a href="#" class="sub-rsvp-action remove-rsvp">{{removecopy}}</a>					</div>				</div>',no:'<div class="response-status no">Not going</div>				<div>					{{^isWL}}						<a href="#" class="rsvp-action sub-rsvp-action">Change your mind?</a>					{{/isWL}}					{{#isWL}}						<a href="#" class="rsvp-action sub-rsvp-action">Join the waitlist?</a>					{{/isWL}}				</div>',open:'<a class="button primary rsvp-action" style="font-size: 16px; display: block; text-align: center; font-weight: normal; margin-bottom: 0.25em;" href="#">Count me in</a><a style="display: block; text-align: center;" class="sub-rsvp-action remove-rsvp" href="#">No thanks</a>',closed:'<div class="response-status closed">CLOSED</div>'},lma:{lma_when:{edit:'{{{label}}}				{{#eventPageDivWrapper}}<div class="unit" style="width:436px">{{/eventPageDivWrapper}}				<input class="inline" type="text" name="" value="{{eventdate}}" id="event-date-field" readonly="true" /> {{trnAt}} 				<select class="inline" id="event-when-time" name="time">					{{#options}}<option value="{{option}}" {{#selected}}selected="selected"{{/selected}}>{{formatted}}</option>{{/options}}				</select>				{{#isUS}}				<select class="inline" id="event-when-ampm" name="am_pm">					<option value="0" {{^ampm}}selected="selected"{{/ampm}}>AM</option>					<option value="1" {{#ampm}}selected="selected"{{/ampm}}>PM</option>				</select>				{{/isUS}}				{{#endTimeRuntimeFlag}}					<p id="event-change-duration" class="end-time-toggle small inline-block"><a href="#" style="color: {{linkColor}}">{{trnSetEndTime}}</a></p>				{{/endTimeRuntimeFlag}}				<input type="hidden" id="formattedDate" name="date" value="{{formattedDate}}" />				{{#endTimeRuntimeFlag}}					<div id="event-end-time-picker">					</div>				{{/endTimeRuntimeFlag}}				{{#eventPageDivWrapper}}</div>{{/eventPageDivWrapper}}				{{^hideCancel}}<a href="#" id="cancel-date" class="margin-left cancel-field" data-elm="lma_when">{{trnCancel}}</a>{{/hideCancel}}',current:null},lma_when_end:'{{{headerHtml}}}			<input class="inline" type="text" name="" value="{{eventdateend}}" id="event-end-date-field" readonly="true" /> {{trnAt}} 			<select class="inline" id="event-end-when-time" name="end_time">				{{#options}}<option value="{{option}}" {{#selected}}selected="selected"{{/selected}}>{{formatted}}</option>{{/options}}			</select>			{{#isUS}}			<select class="inline" id="event-end-when-ampm" name="end_am_pm">				<option value="0" {{^ampm}}selected="selected"{{/ampm}}>AM</option>				<option value="1" {{#ampm}}selected="selected"{{/ampm}}>PM</option>			</select>			{{/isUS}}			<p id="event-end-time-delete" class="end-time-toggle small inline-block"><a href="" style="color: {{linkColor}}">{{trnRemoveEndTime}}</a></p>			<p class="explain" id="duration-hours">Duration: {{durationText}}</p>			<input type="hidden" id="formattedEndDate" name="end_date" value="{{eventdate}}" />',lma_where:{edit:'<p class="lma-question edit">{{trnWhere}}:</p>					<a href="#" id="cancel-when"  class="cancel-field" data-elm="lma_where">{{trnCancel}}</a>					{{#if venuename}}					<p>{{trnCurrentPlacePrompt}} {{venuename}}<br/>{{{venueaddress}}}</p>					{{/if}}					{{#if venues}}					<ul class="resetList venue-list">					<li class="clearfix venue-toggler">						<a href="#" id="toggle-recent" class="venue-toggle selected" data-toggle="recent">{{trnRecentPlaces}}</a>						<a href="#" id="toggle-search" class="venue-toggle" data-toggle="search">{{trnFindAPlace}}</a>					</li>					</ul>					<div id="recent" class="venue-tab">						{{{venues}}}					</div>					{{/if}}					<div id="search" class="{{#venues}}jsStartHidden {{/venues}}venue-tab">						<input type="text" style="width:88%" name="" value="" id="event-where-field" class="venuepicker textInputTip" style="width:98%" title="{{trnWhereExample}}" />						<input type="text" style="width:88%" value="" title="{{trnAddress}}" class="textInputTip" id="event-where-address" />						<input type="text" style="width:35%" value="{{{city}}}" title="City" class="textInputTip inline" id="event-where-city" />						{{{states}}}						<select class="inline" style="width: 25%;" id="event-where-country" name="state">{{{countries}}}</select>						<input type="hidden" value="" name="zId" id="zId" />						<input type="hidden" value="" name="locname" id="locname" />						<input type="hidden" value="{{venueid}}" name="venueId" id="venueId" />						<label class="small" for="event-where-private"><input type="checkbox" value="" id="event-where-private"/> {{ trnPrivateRes }}{{^trnPrivateRes}}This location is a private residence.{{/trnPrivateRes}}</label>					</div>',display:'<p class="lma-question">{{trnWhere}}:</p>							<div class="line">							<div class="unit size3of5 lma-question">								<p class="lma-venue-name"><a href="{{mapurl}}" target="_blank">{{venuename}}</a></p>								<p class="lma-venue-address D_less">{{{venueaddress}}}</p>								<input type="hidden" value="{{venueid}}" name="venueId" id="venueId" />							</div>							<div class="unit lastUnit">								<a href="#" id="add-loc" class="propose clearfix add-loc" data-elm="lma_where">{{trnChange}} <span>&rarr;</span></a>							</div>							</div>',current:null},lma_descr:{edit:'<p class="lma-question edit">Additional details:</p>				   <textarea id="descr" name="descr" class="hasMaxLen maxChars50000"></textarea>					<a href="#" id="cancel-desc"  class="cancel-field" data-elm="lma_descr">Cancel</a>',current:null}},venue:'<ul class="recent-venues resetList">			{{#venues}}				<li class="clearfix figureset">					<div class="figureset-figure">						<a href="#" class="button primary add-venue" style="font-size:10px;margin-right:1em" data-id="{{id}}" data-lat="{{lat}}" data-lon="{{lon}}">{{trnSelect}}</a>					</div>					<div class="figureset-description subtext">						<p class="recent-venues-name"><a href="{{mapurl}}" target="_blank">{{name}}</a></p>						<p class="recent-venues-address D_less">{{{address}}}</p>					</div>				</li>			{{/venues}}			{{#hasmore}}				<li class="">					{{^first}}					<a href="#" class="page-venues prev">&laquo; {{trnPrevious}}</a>					{{/first}}					{{^last}}					<a href="#" class="page-venues next">{{{trnMore}}} &raquo;</a>					{{/last}}				</li>			{{/hasmore}}	    </ul>',refund:'<h2>Your organizer\'s refund policy for <em>{{eventname}}</em></h2>		<div class="D_dialog_chunk">			{{#norefund}}				<p><strong>Refunds are not offered for this Meetup.</strong></p>			{{/norefund}}			{{^norefund}}				<p style=""><strong>Refunds offered if:</strong></p>				<ul style="margin: 0 0 .75em;">					{{#eventcancel}}						<li style="">the Meetup is cancelled</li>					{{/eventcancel}}					{{#reschedule}}						<li style="">the Meetup is rescheduled</li>					{{/reschedule}}					{{#cancelwithin}}						<li style="">you can cancel at least {{canceldays}} day(s) before the Meetup</li>					{{/cancelwithin}}				</ul>					{{#custom}}						<p>Additional notes: {{custom}}</p>					{{/custom}}					<p><em>Payments you make go to the organizer, not to Meetup.  You must make refund requests to the organizer.</em></p>			{{/norefund}}		</div>		<div class="D_dialog_foot">			<a href="JAVASCRIPT: void(0);" class="D_signal_dismiss_to_refundBox" id="refundCloseLink">Close this</a>		</div>',statemenu:'{{#states}}<select style="width: 25%;" id="event-where-state" name="state">{{#state}}<option value="{{code}}" {{#selected}}selected="selected"{{/selected}}>{{{name}}}</option>{{/state}}</select>{{/states}}',loader:'<div class="loader"></div>'},Meetup.Templates.SponsorHome={availability:"            {{#count}}                <em>{{count}}</em>            {{/count}}            {{message}}        ",location:"            {{#isWorldwide}}                Meetup Groups worldwide that have Meetups about...            {{/isWorldwide}}            {{^isWorldwide}}                Meetup Groups within {{miles}} miles of {{specificLocation}} that have Meetups about...            {{/isWorldwide}}        ",topics:"            {{#topics}}            <li>{{name}}</li>            {{/topics}}        "},Meetup.Templates.PerkCreate={review_global_only:'            <dl class="confirm_section">                <dt>Your Perk offer to Group Members</dt>                    <dd style="white-space:pre-wrap;">{{perk}}</dd>                <dt>How Members will redeem this Perk</dt>                    <dd>{{redeem}}</dd>                <dt>About your business</dt>                    <dd class="last">{{{message}}}</dd>            </dl>            <dl class="confirm_section">                <dt>Offering to Meetup Groups located</dt>                    {{#isWorldwide}}                        <dd>Worldwide</dd>                    {{/isWorldwide}}                    {{^isWorldwide}}                        <dd>within {{distance}} miles of {{specificLocation}}</dd>                    {{/isWorldwide}}                <dt>That have Meetups about</dt>                    <dd>                    {{#topics}}{{name}}{{/topics}}                    </dd>            </dl>            <dl class="confirm_section">                <dt>This Perk will be available to</dt>                    <dd>{{maxParticipants}} Groups</dd>                    <dd class="last callout">                        Your monthly cost up to {{cost}}                    </dd>            </dl>        '},Meetup.Templates.socialshareWidget={shareTemplate:'<div class="infowidget-container" id="socialshare-container"><div class="rsvp-section">                    <h3>{{header}}</h3>                    <textarea style="height: 8em;" name="arg_message" id="shareMessage" class="hasMaxLen maxChars140">{{{defaultCopy}}}</textarea>                </div>                <div class="rsvp-section">                    <div class="line" style="margin:0.25em 0">                        <input id="rsvpToggleFacebook" type="checkbox" name="" value="true" class="unit" style="margin:0 0.5em 0 0" />                        <label class="unit size4of5 D_less">                            <img id="rsvpIconFacebook" src="/img/externalservice/socialmediaicons/facebook-16x16g.png" style="vertical-align:middle;"> Facebook<br />                            <span id="rsvpFacebookHandle">{{{fname}}}</span>                        </label>                    </div>                    <div class="line" style="margin:0.25em 0">                        <input id="rsvpToggleTwitter" type="checkbox" name="" value="true" class="unit" style="margin:0 0.5em 0 0" />                        <label class="unit size4of5 D_less">                            <img id="rsvpIconTwitter" src="/img/externalservice/socialmediaicons/twitter-16x16g.png" style="vertical-align:middle;"> Twitter<br />                            <span id="rsvpTwitterHandle"></span>                        </label>                    </div>                </div>                <div style="margin: 0.75em 0 0.5em;">                    <input type="button" class="D_submit_grad" id="submit-share" value="Share" /> <a href="#" id="close-share">Close</a>            </div></div>',moreTemplate:'<div class="infowidget-container" id="socialshare-container">                <div class="rsvp-section">                    {{{title}}}                    {{{body}}}                </div>                <div style="margin: 0.75em 0 0.5em;">                    <a href=""#" id="close-share">Close</a>                </div>            </div>'},Meetup.Templates.shorturlWidget={body:'<div class="infowidget-container clearfix" id="shorturl-widget-container">                <div class="rsvp-section field-section">                <h3>{{headerCopy}}</h3>                    {{{bodyCopy}}}                    <textarea style="height: 6em;" name="arg_message" id="promoteMessage" class="hasMaxLen maxChars140">{{{defaultCopy}}}</textarea>                </div>                {{^isCallout}}                    <div class="submit-section">                        <input type="button" class="D_submit_grad" id="submit-promote" value="Share" />                     </div>                {{/isCallout}}                <div class="rsvp-section network-section">                    <div class="line" style="margin:0.25em 0">                        <input id="promoteToggleFacebook" type="checkbox" name="" value="true" class="unit" style="margin:0 0.5em 0 0" />                        <label class="unit size4of5 D_less">                            <img id="promoteIconFacebook" src="/img/externalservice/socialmediaicons/facebook-16x16g.png" style="vertical-align:middle;"> Post to my Facebook wall<br />                            <span id="promoteFacebookHandle">{{{fname}}}</span>                        </label>                    </div>                    <div class="line" style="margin:0.25em 0">                        <input id="promoteToggleTwitter" type="checkbox" name="" value="true" class="unit" style="margin:0 0.5em 0 0" />                        <label class="unit size4of5 D_less">                            <img id="promoteIconTwitter" src="/img/externalservice/socialmediaicons/twitter-16x16g.png" style="vertical-align:middle;"> Post to Twitter<br />						<span id="promoteTwitterHandle"></span>					</label>				</div>			</div>			{{#isCallout}}				<div class="submit-section">					<input type="button" class="button primary" id="submit-promote" value="Share" /> 					<a href="#" id="close-shorturl">Close</a>				</div>			{{/isCallout}}		</div>'},Meetup.Templates.autoScheduleEvent='<tr data-date="{{startDate}}">		<th><span><a href="{{eventUrl}}">{{eventTitle}}</a></span></th>		<td>			{{#hasRsvps}}				<span>{{goingCopy}}</span>			{{/hasRsvps}}		</td>		<td>			<span><a href="{{eventUrl}}">{{eventDate}}</a></span>		</td>	</tr>',Meetup.Templates.confirmFriends='<ul class="resetList clearfix friend-list">				{{#friends}}				<li><div class="{{class}}">					<img src="{{photo}}" />				    <p>{{name}}</p>					{{^invited}}					<a href="#" class="fb-blue-button" data-id="{{id}}">{{buttonCopy}}</a>					{{/invited}}					{{#invited}}					<span class="invited-friend">{{successCopy}}</span>					{{/invited}}				</div></li>				{{/friends}}				{{#page}}				<li class="more-friends"><a href="#" class="page-friends"><span>&rarr;</span> More Friends</a></li>				{{/page}}			</ul>',Meetup.EventDetailMustache={when:{display:'			<div class="figureset">				<div class="figureset-figure event-stack-icon sprite-event-stack spr-event-stack-calendar margin-bottom"></div>				<div class="clearfix figureset-description" id="event-when-display">					{{^isMultiDay}}						{{^isDefaultEndTime}}							<div class="margin-bottom"><time itemprop="startDate" datetime="{{timeprop}}" id="event-start-time"><h3>{{date}}</h3> <span class="subtext">{{time}}</span></time> <span class="subtext">{{to}}</span> <time id="event-end-time"><span class="subtext">{{endDateTime}}</span></time></div>						{{/isDefaultEndTime}}						{{#isDefaultEndTime}}							<time itemprop="startDate" datetime="{{timeprop}}"><h3>{{date}}</h3>							<p class="subtext">{{time}}</p></time>						{{/isDefaultEndTime}}					{{/isMultiDay}}					{{#isMultiDay}}					<time itemprop="startDate" datetime="{{timeprop}}" id="event-start-time"><h3>{{date}} {{time}}</h3></time>						<p class="subtext">{{to}} <time id="event-end-time">{{endDateTime}}</time></p>					{{/isMultiDay}}				</div>			</div>',edit:'			<div class="event-stack-icon sprite-event-stack spr-event-stack-calendar margin-bottom" style="margin: 0pt 12px 12px 0pt; float: left;"></div>			<form id="editWhen" action="javascript:void(0)" style="margin: 0pt; padding: 0pt;">				<div class="clearfix" id="event-when-display">					{{{event_when_fields}}}				</div>				<div class="align-right">					<input type="submit" class="button" value="{{trnSave}}" id="event-date-submit" /> <a id="cancel-when" class="margin-left" data-elm="event-when">{{trnCancel}}</a>				</div>			</form>',empty:'			<div class="figureset">				<div class="figureset-figure event-stack-icon sprite-event-stack spr-event-stack-calendar margin-bottom"></div>				<div class="clearfix figureset-description" id="event-when-display">					{{#canEditInline}}						<a data-elementid="event-when" class="propose hover-to-edit-ext-change" href="#">{{trnAddDate}}</a>					{{/canEditInline}}					<h3>						<strong>{{trnNeedsADate}}</strong> 					</h3>				</div>			</div>',current:null},where:{display:'			<div class="figureset">				<div class="figureset-figure event-stack-icon sprite-event-stack spr-event-stack-location margin-bottom"></div>				<div class="clearfix figureset-description" id="event-where-display">					<h3><a href="{{mapurl}}" target="_blank">{{venuename}}</a></h3>					<p class="subtext event-where-address">{{{venueaddress}}}					{{#canEditMap}}						 <span class="set-meeting-location" data-lat="{{lat}}" data-lon="{{lon}}">(<a href="">{{editMapCopy}}</a>)</span>					{{/canEditMap}}					{{^canEditMap}}						 <span class="event-map-link">(<a href="{{mapurl}}" target="_blank">{{trnMap}}</a>)</span>					{{/canEditMap}}					</p>				</div>			</div>',edit:'			<div style="margin: 0pt 12px 12px 0pt; float: left;" class="event-stack-icon sprite-event-stack spr-event-stack-location"></div>			<form id="editWhere" action="javascript:void(0)">				<div id="event-where-display" class="clearfix">					<a id="cancel-where" class="cancel-field" data-elm="event-when">{{trnCancel}}</a>					<h3>{{trnSelectAPlace}}</h3>					{{#if venuename}}						<p class="event-where-current">{{trnCurrentPlacePrompt}} {{venuename}}<br/><span class="event-where-current-address">{{{venueaddress}}}</span></p>					{{/if}}				</div>				<div class="incomplete venue-hover{{#venuename}} hasVenue{{/venuename}}" id="event-where-form">					<div class="pad">						{{#if venues}}								<ul class="resetList venue-list">									<li class="clearfix venue-toggler">										<a href="#" class="venue-toggle selected" data-toggle="recent">{{trnRecentPlaces}}</a>										<a href="#" class="venue-toggle" data-toggle="search">{{trnFindAPlace}}</a>									</li>								</ul>							<div id="recent" class="venue-tab">								{{{venues}}}							</div>						{{/if}}						<div id="search" class="{{#venues}}jsStartHidden {{/venues}}venue-tab">							<input type="text" style="width:88%" name="" value="" id="event-where-field" class="venuepicker textInputTip" style="width:98%" title="{{trnWhereExample}}" />							<input type="text" style="width:88%" value="" title="{{trnAddress}}" class="textInputTip" id="event-where-address" />							<input type="text" style="width:35%" value="{{{city}}}" title="{{trnCity}}" class="inline textInputTip" id="event-where-city" />							{{{states}}}							<select style="width: 25%;" id="event-where-country" name="state" class="inline">{{{countries}}}</select>							<input type="hidden" value="" name="zId" id="zId" />							<input type="hidden" value="" name="locname" id="locname" /></p>							<input type="hidden" value="{{venueid}}" name="venueId" id="venueId" />							<label class="small margin-bottom" for="event-where-private"><input type="checkbox" value="" id="event-where-private"/> {{ trnPrivateRes }}{{^trnPrivateRes}}This location is a private residence.{{/trnPrivateRes}}</label>							<input type="button" value="{{trnSave}}" class="button" id="event-where-submit" />						</div>					</div>				</div>			</form>',empty:'			<div class="figureset">				<div class="figureset-figure event-stack-icon sprite-event-stack spr-event-stack-location margin-bottom"></div>				<div class="clearfix figureset-description" id="event-where-display">					<a data-elementid="event-where" class="propose hover-to-edit-ext-change" href="#">{{trnAddLocation}}</a>					<h3>						<strong>{{trnNeedsALocation}}</strong>					</h3>				</div>			</div>',current:null},howToFindUs:{display:'<div class="event-where-extra">					<em>{{value}}</em>				</div>',edit:'<form id="event-howToFindUs-form" action="javascript:void(0)" class="padding-none" data-previous-value="{{value}}">					<label class="bold">{{copy_label}}:</label>					<input type="text" id="event-howToFindUs-field" name="how-to-find-us" class="span-100 hasMaxLen maxChars250" value="{{value}}" maxlength="250">					<div class="align-right">						<input type="submit" class="button" value="{{copy_save}}" id="event-howToFindUs-submit" />						<a id="event-howToFindUs-cancel" class="margin-left">{{copy_cancel}}</a>					</div>				</form>'},CommentBox:'<div class="figureset new-comment">    <div class="figureset-figure">        <a href="{{memberUrl}}" class="mem-photo-background-60 square-50"                style="display: block; background-image: url({{talkMemberPhoto}});">        </a>    </div>    <div class="figureset-description">        <div class="comment-wrap">            <div class="comment-input-wrap">                <textarea name="newComment" class="j-comment-input J_onClick textInputTip span-100 hasMaxLen maxChars1000" title="{{topCommentPlaceholder}}" placeholder="{{placeholderNoJS}}"></textarea>                <div class="nib"><div class="inner-nib"></div></div>            </div>        </div>        <div class="comment-actions clearfix">            <button class="j-submit-comment button primary small">{{transPost}}</button>            <div class="dot-loader-16 invisible"></div>        </div>    </div></div>'},Meetup.TalkMustache={comment:'<li id="{{tablename}}-{{id}}" data-commenttype="{{commentType}}" {{#isReply}}{{#hideReply}}style="display: none;"{{/hideReply}}{{/isReply}}>			<div class="figureset">				<div class="figureset-figure">					{{#isFormerMember}}					<img alt="{{name}}" src="{{placeholderPhoto}}" />					{{/isFormerMember}}					{{^isFormerMember}}					<a href="{{url}}" class="{{^isReply}}mem-photo-background-60 {{/isReply}}{{#isReply}}mem-photo-background-45 {{/isReply}}{{^isReply}}square-50 {{/isReply}}{{#isReply}}square-35 {{/isReply}} memberinfo-widget" data-memberid="{{commenterMemberId}}" title="{{name}}" style="display: block; {{#isAjax}}background-image: url({{photo}});{{/isAjax}} {{^isAjax}}background-image: url({{placeholderPhoto}});{{/isAjax}}" {{^isAjax}}data-src="{{photo}}"{{/isAjax}}>						<img src="{{blankImg}}" alt="{{name}}" />					</a>					{{/isFormerMember}}				</div>				<div class="figureset-description">					{{^isEventDiff}}						{{#isFormerMember}}						<h5>{{{name}}}</h5>						{{/isFormerMember}}						{{^isFormerMember}}						<h5><a href="{{url}}" class="memberinfo-widget" data-memberid="{{commenterMemberId}}" title="{{name}}">{{{name}}}</a></h5>						{{/isFormerMember}}					{{/isEventDiff}}					<div class="comment-body">{{{comment}}}</div>					<p class="small muted">						{{#isLikeable}}							<span class="likeWidget" {{^hasLikes}}style="display: none;"{{/hasLikes}}><a class="j-like-list tooltip-widget" data-key="{{tablename}}-{{id}}-likes">{{likes}}</a> &middot; </span>						{{/isLikeable}}						{{#isMember}}							{{#isLikeable}}								<a href="#" class="cvoter" data-id="{{tablename}}-{{id}}" data-status="{{^iLike}}0{{/iLike}}{{#iLike}}1{{/iLike}}">{{^iLike}}{{likeCopy}}{{/iLike}}{{#iLike}}{{unlikeCopy}}{{/iLike}}</a> &middot; 							{{/isLikeable}}							{{#isReplyable}}								<a class="j-write-reply" href="#" data-parent-id="{{tablename}}-{{id}}">{{replyStr}}</a> &middot; 							{{/isReplyable}}						{{/isMember}}						{{posted}} 						{{#isMember}}							{{^isReply}}								{{#isMutable}}									{{#isMuted}}										&middot; <a href="#" class="j-mute" data-ismuted="1">{{unmuteStr}}</a>									{{/isMuted}}									{{#isFollowed}}										&middot; <a href="#" class="j-mute" data-ismuted="0">{{muteStr}}</a>									{{/isFollowed}}									{{^isMuted}}{{^isFollowed}}											&middot; <a href="#" class="j-mute" data-ismuted="0">{{muteStr}}</a>									{{/isFollowed}}{{/isMuted}}								{{/isMutable}}							{{/isReply}}						{{/isMember}}					</p>				</div>				{{#isMember}}					{{#showXMenu}}						<div class="x-mark-cont clearfix"><div class="x-mark"></div></div>						<ul class="resetList x-menu theme-bgcolor--actionlist theme-color--actionlist">								{{#hasReportSpam}}{{{reportSpamLi}}}{{/hasReportSpam}}								{{#hasReportSpam}}{{{markInappropriateLi}}}{{/hasReportSpam}}								{{#canDelete}}									<li><a href="#" class="deleter" data-id="{{id}}" data-commenttype="{{commentType}}" {{#anchorId}}data-anchor-id="{{anchorId}}"{{/anchorId}}>Delete</a></li>								{{/canDelete}}						</ul>					{{/showXMenu}}				{{/isMember}}			</div>		</li>		{{#isAjax}}			{{#isReplyable}}				<li class="replies" style="display: none;">					<ul class="dividedList tight">						<li class="reply-wrap">							<textarea id="replyto-{{tablename}}-{{id}}" class="reply-input J_onClick textInputTip" title="Write a reply..." data-anchor-id="{{tablename}}-{{id}}"></textarea>							<div class="dot-loader-16 invisible"></div>						</li>					</ul>				</li>			{{/isReplyable}}		{{/isAjax}}',likeTooltip:'<ul class="resetList sectionList">			{{#results}}				<li class="figureset">					<div class="figureset-figure">						<a class="mem-photo-background-30 square-25" href="{{grpMemProfileUrl}}" style="background-image: url({{photoSrc}}); display: block;" title="{{name}}"></a>					</div>					<div class="figureset-description">						<h5 class="padding-none"><a href="{{grpMemProfileUrl}}">{{name}}</a></h5>					</div>				</li>			{{/results}}		</ul>',likeDialog:{dialog:'<div class="D_dialog D_like" id="likedialog">					<h2 id="likerHeadline">{{who}} who like this</h2>					<div class="D_boxsection">						<ul id="likerList"><li>loading...</li></ul>					</div>				</div>',listItem:'{{#results}}				<li>					<a href="{{grpMemProfileUrl}}" class="mem-photo D_likeimage" style="background:url(						{{photoSrc}}) no-repeat" title="{{name}}"></a>					<div class="D_likecontent">						<a href="{{grpMemProfileUrl}}">{{name}}</a>					</div>				</li>		{{/results}}'}},function(a,b){Meetup.MustacheTemplates===a&&(Meetup.MustacheTemplates={}),Meetup.MustacheTemplates.chapstick=b.extend(Meetup.MustacheTemplates.chapstick||{},{event:{rsvpEmptyPanel:"<div class='prompt-panel doc-content-big questions'>\n	{{{output}}}\n	<ul class='inlineErrorMsgs display-none'>\n		<li class='inlineErrorMsg'></li>\n	</ul>\n	<button class='primary margin-top next'>{{btnText}}</button>\n	<span class='margin-top spin' />\n</div>",rsvpBoxYesNo:'<div id="rsvpBoxContainer">\n\n	{{! Registration for aliens}}\n	{{#hasRegForm}}\n		{{> chapstick.event.rsvpJoinAndDues}}\n	{{/hasRegForm}}\n\n	{{! Registration for non-members}}\n	{{#hasJoinForm}}\n		{{> chapstick.event.rsvpJoinAndDues}}\n	{{/hasJoinForm}}\n\n	{{#hasPayDuesToRsvp}}\n		{{> chapstick.event.rsvpJoinAndDues}}\n	{{/hasPayDuesToRsvp}}\n\n	{{#hasRespondedLayout}}\n		<div id="rsvp-mine" class="rsvp-callout-rsvp{{myRsvpClass}} doc-content">\n			<h3>\n				{{myRsvpText}} {{myRsvpResponse}}\n				{{#isWaitlistRsvp}}{{#Rsvp.hasGuests}} <span>(+{{Rsvp.guests}})</span>{{/Rsvp.hasGuests}} {{/isWaitlistRsvp}}\n			</h3>\n			{{#canEditRsvp}}\n				<a href="#" class="rsvp-change" aria-label="Change your RSVP">\n					{{trnChange}}\n				</a>\n			{{/canEditRsvp}}\n			{{#isRsvpYes}}\n			<a href="{{inviteUrl}}" class="rsvp-inviteBtn j-inviteWindow">\n				{{trnInviteAFriend}}\n			</a>\n			{{/isRsvpYes}}\n		</div>\n	{{/hasRespondedLayout}}\n\n	{{#hasYesNoLayout}}\n		<div id="rsvpBox" class="doc-content">\n			<h3>\n				{{^Event.waitlistActive}}{{trnAreYouGoing}}{{/Event.waitlistActive}}\n				{{#Event.waitlistActive}}{{trnJoinTheWaitlist}}{{/Event.waitlistActive}}\n			</h3>\n			<label id="primaryRsvpLabel" for="rsvp{{^Event.waitlistActive}}Yes{{/Event.waitlistActive}}{{#Event.waitlistActive}}Waitlist{{/Event.waitlistActive}}" class="display-none">\n				{{^Event.waitlistActive}}{{trnAreYouGoing}}{{/Event.waitlistActive}}\n				{{#Event.waitlistActive}}{{trnJoinTheWaitlist}}{{/Event.waitlistActive}}\n				{{trnYes}}\n			</label>\n			<button class="primary" id="rsvp{{^Event.waitlistActive}}Yes{{/Event.waitlistActive}}{{#Event.waitlistActive}}Waitlist{{/Event.waitlistActive}}" aria-labelledby="primaryRsvpLabel">{{trnYes}}</button>\n			<label id="secondaryRsvpLabel" for="rsvpNo" class="display-none">\n				{{^Event.waitlistActive}}{{trnAreYouGoing}}{{/Event.waitlistActive}}\n				{{#Event.waitlistActive}}{{trnJoinTheWaitlist}}{{/Event.waitlistActive}}\n				{{trnNo}}\n			</label>\n			<button class="secondary" id="rsvpNo" aria-labelledby="secondaryRsvpLabel">{{trnNo}}</button>\n		</div>\n	{{/hasYesNoLayout}}\n\n	{{#displayClosed}}\n		<div id="rsvp-mine" class="rsvp-callout-rsvpno doc-content">\n			<h3>{{trnRsvpsClosed}}</h3>\n		</div>\n	{{/displayClosed}}\n\n	{{#hasNotifyMe}}\n		<div id="notify" class="padding-all">\n			{{^isWaitlistRsvp}}\n				<p>{{trnSpotMayOpen}}</p>\n				<label id="notifyMeLabel" for="notifyOn" class="display-none">\n					{{trnSpotMayOpen}}\n					{{trnNotifyMe}}\n				</label>\n				<button id="notifyOn" class="primary small margin-none" aria-labelledby="notifyMeLabel">{{trnNotifyMe}}</button>\n			{{/isWaitlistRsvp}}\n			{{#isWaitlistRsvp}}\n				<p>{{#Event.eventFull}}{{trnFullBeingNotified}}{{/Event.eventFull}}{{^Event.eventFull}}{{trnBeingNotified}}{{/Event.eventFull}}</p>\n				<label id="notifyMeOffLabel" for="notifyOff" class="display-none">\n					{{#Event.eventFull}}{{trnFullBeingNotified}}{{/Event.eventFull}}{{^Event.eventFull}}{{trnBeingNotified}}{{/Event.eventFull}}\n					{{trnTurnOff}}\n				</label>\n				<button id="notifyOff" class="small margin-none" aria-labelledby="notifyMeOffLabel">{{trnTurnOff}}</button>\n			{{/isWaitlistRsvp}}\n		</div>\n	{{/hasNotifyMe}}\n	<ul class="inlineErrorMsgs display-none">\n		<li class="inlineErrorMsg"></li>\n	</ul>\n</div>\n',rsvpJoinAndDues:'<div class="doc-content">\n	<h3>{{trnWantToAttend}}</h3>\n\n	{{! Logged in, member + group has dues}}\n	{{#hasPayDuesToRsvp}}\n		<a href="{{payDuesUrl}}" id="event-join" class="button primary no-margin">\n			{{joinButtonText}}\n		</a>\n		<p class="align-center dues-members-only">\n				<a href="{{payDuesUrl}}" class="small muted">{{trnDuesPayingMembersOnly}}</a>\n		</p>\n	{{/hasPayDuesToRsvp}}\n\n	{{! Member of the group, but didn\'t pay dues and grace period has expired }}\n	{{#didntPayDues}}\n		<a href="{{payDuesUrl}}" id="event-join" class="button primary margin-top">\n			{{joinButtonText}}\n		</a>\n	{{/didntPayDues}}\n\n	{{^didntPayDues}}\n		{{^hasPayDuesToRsvp}}\n			<a id="event-join" href="{{joinActionUrl}}?eventId={{Event.eventToken}}&joinFrom=event&response=3" class="button primary margin-top {{#Member.isAlien}} J_signupLink J_onClick omnCamp omnrg_joinrsvp topNavJoinus {{/Member.isAlien}}">\n				{{joinButtonText}}\n			</a>\n		{{/hasPayDuesToRsvp}}\n	{{/didntPayDues}}\n\n</div>\n',rsvpBox:'<div id="rsvp-mine" class="{{#rsvpYes}}rsvp-callout-rsvpyes doc-content{{/rsvpYes}}{{#rsvpNo}}rsvp-callout-rsvpno doc-content{{/rsvpNo}}{{#rsvpWaitlist}}rsvp-callout-rsvpwaitlist doc-content{{/rsvpWaitlist}}">\n	<h3>{{#rsvpYes}}{{transRsvpYes}}{{/rsvpYes}}{{#rsvpNo}}{{transRsvpNo}}{{/rsvpNo}}{{#rsvpWaitlist}}{{transRsvpWaitlist}}{{/rsvpWaitlist}}</h3>\n		{{#rsvpYes}}<a href="#" class="rsvp-change">{{transChangeRsvp}}</a>{{/rsvpYes}}\n		{{#rsvpWaitlist}}<a href="#" class="rsvp-change">{{transChangeMind}}</a>{{/rsvpWaitlist}}\n		{{#rsvpNo}}\n			{{#rsvpSpots}}\n				<a href="#" class="rsvp-change">{{transChangeRsvp}}</a>\n			{{/rsvpSpots}}\n			{{#waitlistSpots}}\n				<a href="#" class="rsvp-change">{{transChangeMind}}</a>\n			{{/waitlistSpots}}\n		{{/rsvpNo}}\n	</a>\n</div>\n',rsvpStillGoing:'<div class="toggle" role="select" tabindex="-1">\n	<h3 class="margin-bottom" tabindex="-1">{{trnTitle}}</h3>\n	<div class="segmented-control" style="width:100%;" role="radiogroup">\n\n		<div class="segmented-control-segment">\n			<input type="radio" name="toggleRadio" value="{{rsvpValue}}" id="toggleRadioYes" class="segmented-control-input" {{#valueYes}}checked="checked" aria-checked="true"{{/valueYes}} role="radio" aria-label="{{trnTitle}}">\n			<label for="toggleRadioYes" class="bold segmented-control-button">{{yesText}}</label>\n		</div>\n\n		<div class="segmented-control-segment">\n			<input type="radio" name="toggleRadio" value="2" id="toggleRadioNo" class="segmented-control-input" {{#valueNo}}checked="checked" aria-checked="true"{{/valueNo}} role="radio" aria-label="{{trnTitle}}">\n			<label for="toggleRadioNo" class="bold segmented-control-button">{{noText}}</label>\n		</div>\n\n	</div>\n</div>\n',eventSurveyQuestions:'<div class="survey-question-wrap{{#isExisting}} isExisting{{/isExisting}}" data-questionId="{{newQuestionId}}">\n	<label class="bold inline" for="{{inputId}}">{{labelText}}</label>\n	<a class="removeSurveyQuestion small valign-middle"><i class="icon-circle-minus"></i>&nbsp;{{removeCopy}}</a>\n	<div class="input">\n		<input type="text" id="{{inputId}}" name="{{inputId}}" data-dependson="pre_event_survey_yes" class="surveyQuestion isRadioSelector hasMaxLen maxChars250{{#isError}} error{{/isError}}" {{#inputValue}}value="{{{inputValue}}}"{{/inputValue}} />\n	</div>\n</div>\n',rsvpRefundAgreement:'<div class="refundAgreement{{^requiresPayment}} display-none{{/requiresPayment}}" tabindex="-1">\n	<p>{{{checkboxTxt}}}</p>\n	<div class="display-none refundAgreementDetails">\n		{{#displayHeader}}\n			<p>{{header}}</p>\n		{{/displayHeader}}\n		{{#refundAvailable}}\n			<ul>\n				{{#refundItems}}\n					<li class="padding-none">\n						{{text}}\n					</li>\n				{{/refundItems}}\n			</ul>\n		{{/refundAvailable}}\n		<p>{{paymentsToOrganizer}}</p>\n	</div>\n</div>\n',rsvpQuestionSingle:"<div class=\"questions\">\n	<h3 id=\"questionLabel{{index}}\" class='question-label leading-bottom' tabindex=\"-1\">{{#if index}}{{index}}. {{/if}}{{question}}</h3>\n	<div class=\"question-wrapper clearfix\">\n		<textarea data-questionid='{{id}}' data-initialvalue='{{memberAnswer}}' type='text' placeholder=\"{{placeholder}}\" class='span-100 hasMaxLen maxChars250 question-textarea' aria-describedby='questionLabel{{index}}'>{{memberAnswer}}</textarea>\n	</div>\n</div>\n",rsvpGuests:"<div class='guests' role=\"select\" tabindex=\"-1\">\n	<h3 class='margin-bottom' tabindex=\"-1\">\n		{{anyGuests}}\n	</h3>\n	<div class='j-guestsControl'></div>\n</div>\n"}})
}(void 0,jQuery),function(a,b){Meetup.MustacheTemplates===a&&(Meetup.MustacheTemplates={}),Meetup.MustacheTemplates.misc=b.extend(Meetup.MustacheTemplates.misc||{},{youtubeEmbed:'{{! expecting a video ID}}\n\n<iframe width=" 480" height="270" src="http://www.youtube.com/embed/{{videoID}}" frameborder="0" allowfullscreen></iframe>\n',"null":"",vineEmbed:'<iframe class="vine-embed" src="https://vine.co/v/{{videoID}}/embed/simple" width="600" height="600" frameborder="0"></iframe><script async src="//platform.vine.co/static/scripts/embed.js" charset="utf-8"></script>\n'})}(void 0,jQuery),"undefined"==typeof Meetup.UI&&(Meetup.UI={}),Meetup.UI.ValidatorRules={notEmpty:function(a){return""==a.value.replace(/^\s+|\s+$/g,"")||a.value==a.getAttribute("title")?Meetup.Copy.rule_notEmpty:!1},isEmail:function(a){return a.value.match(/^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/)?!1:Meetup.Copy.rule_isEmail},isNotEmail:function(a){return a.value.match(/^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/)?Meetup.Copy.rule_isNotEmail:!1},hasBrackets:function(a){return a.value.match(/.*?(?:<|>).*/)?Meetup.Copy.rule_hasBrackets:!1},isUrl:function(a){return a.value.length<1?!1:a.value.match(/^\b(?:https?\:\/\/|www[.]|[a-zA-Z]+[.])(?:[a-zA-Z0-9\-\/]+)(\.?[a-zA-Z0-9\-\_\.\/\=\#\&\?]+$)/)?!1:Meetup.Copy.rule_isUrl},isChecked:function(a){return a.checked?!1:Meetup.Copy.rule_isChecked},isMinLength:function(a,b){return a.value.replace(/^\s+|\s+$/g,"").length<b?Meetup.Copy.rule_isMinLength.replace("__MIN__",b):!1},isMaxLength:function(a,b){return a.value.replace(/^\s+|\s+$/g,"").length>b?Meetup.Copy.rule_isMaxLength.replace("__MAX__",b):!1},isNumeric:function(a){var b=a.value.replace(/\s/g,"");return b.length<1?!1:b.match(/^\d+$/)?!1:Meetup.Copy.rule_isNumeric},isValidAge:function(a){return a.value>=18||""===a.value.replace(/^\s+|\s+$/g,"")?!1:Meetup.Copy.rule_isValidAge}},Meetup.UI.Validator=function(a,b){this.init($(a),b),this._cfg={inlineError:!0,element:".element"},this._cfg=$.extend(this._cfg,b||{})},Meetup.UI.Validator.prototype={init:function(a,b){this._cfg=$.extend(this._cfg,b||{}),this.formEl=a,this.activeRules=[],this.formEl.on("submit",$.proxy(this,"evaluateRules"))},addRule:function(a,b){if(b&&"undefined"!=typeof b.jquery){var c=Array.prototype.slice.call(arguments,2),d=this;b.each(function(){var b=[this].concat(c);d.activeRules.push({fn:a,args:b})})}else this.activeRules.push({fn:a,args:Array.prototype.slice.call(arguments,1)})},removeRule:function(a){var b={fn:a,args:Array.prototype.slice.call(arguments,1)};pos=$.inArray(b,this.activeRules),pos>-1&&this.activeRules.splice(pos,1)},evaluateRules:function(a){this.formEl.addClass("validating");for(el in this.errorEls)this.errorEls[el].remove();this.errorEls={};var b=this;$.each(this.activeRules,function(){var c=this.args[0],d=$(c);if(0!=d.length){var e=d.attr("name"),f=this.fn.apply(b,this.args);if(("checkbox"==c.type||"radio"==c.type)&&(c=c.parentNode),f&&b._cfg.inlineError){if(a.preventDefault(),void 0===b.errorEls[e]){b.errorEls[e]=$('<div class="inlineErrorMsgs" style="width: '+(d.outerWidth()>0?d.outerWidth()+"px;":"auto")+'" />'),d.after(b.errorEls[e]);var g=$('<div class="inlineErrorMsg">'+f+"</div>");b.errorEls[e].append(g),c.style.backgroundColor="pink"}}else if(f){a.preventDefault();var h=d.parents(b._cfg.element);b.errorEls[e]=$('<p class="error">'+f+"</p>"),d.addClass("error"),h.append(b.errorEls[e]),h.removeClass("complete").addClass("error")}else c.style.backgroundColor="white"}}),Meetup.UI.ValidatorErrors=this.errorEls,"function"==typeof this._cfg.callback&&0==this.errorEls.length&&this._cfg.callback()},clearErrors:function(){for(el in this.errorEls)this.errorEls[el].remove();var a=this;$.each(this.activeRules,function(){var b=this.args[0],c=$(b);if(0!=c.length){var d=c.parents(a._cfg.element);d.removeClass("error")}})},formEl:null,inputEls:null,activeRules:null,errorEls:null},"undefined"==typeof Meetup.Copy.rule_notEmpty&&(Meetup.Copy.rule_notEmpty="Can't be empty."),"undefined"==typeof Meetup.Copy.rule_isChecked&&(Meetup.Copy.rule_isChecked="This checkbox is required."),"undefined"==typeof Meetup.Copy.rule_isEmail&&(Meetup.Copy.rule_isEmail="Doesn't look like an email address."),"undefined"==typeof Meetup.Copy.rule_isEmail&&(Meetup.Copy.rule_isNotEmail="This cannot be an email address."),"undefined"==typeof Meetup.Copy.rule_isUrl&&(Meetup.Copy.rule_isUrl="Doesn't look like a Url"),"undefined"==typeof Meetup.Copy.rule_isNumeric&&(Meetup.Copy.rule_isNumeric="Numbers only."),"undefined"==typeof Meetup.Copy.rule_isMinLength&&(Meetup.Copy.rule_isMinLength="Should be at least __MIN__ characters."),"undefined"==typeof Meetup.Copy.rule_isMaxLength&&(Meetup.Copy.rule_isMaxLength="Should be fewer than __MAX__ characters."),"undefined"==typeof Meetup.Copy.rule_hasBrackets&&(Meetup.Copy.rule_hasBrackets="Should not have a &lt; or a &gt;"),Meetup.UI.FieldErrors={},function(a){a.validationSettings={$errorEl:null},a.fn.bindValidation=function(b,c,d){var e=this,f=c||{pass:function(a){},fail:function(a,b){}};if(!b||0===b.length)return void LOG.error("bindValidation: bad arguments - requires an arry of rules to apply");var g=function(b){var c=a(b);if(0!=c.length){var d=a.validationSettings.$errorEl||a(b).closest("form"),e=c.data("validation_rules"),f=c.data("validation_callbacks"),g=[],j=Meetup.UI.FieldErrors,k=d.data("validation_errors"),l=c.data("validation_errors"),m=!1;e&&(c.trigger("clearTip"),h(b),e&&a.each(e,function(a,c){var d;d=c.param?c.rule(b,c.param):c.rule(b),d?(m=!1,g.push(d)):m=g.length>0?!1:!0}),m?(f.pass(b),c.data("client_validation_passed",!0),j[b.id]&&delete j[b.id],k[b.id]&&delete k[b.id],l&&c.removeData("validation_errors")):(c.data("validation_errors",g),c.data("client_validation_passed",null),i(b,g),f.fail(b,g),j[b.id]=g,k[b.id]=g))}},h=function(b){var c=document.getElementById("errorList_"+b.id);c&&a(c).remove(),a(b).removeClass("error")},i=function(b,c){var d=a(b),e=a('<ul id="errorList_'+b.id+'" class="inlineErrorMsgs" style="width: '+(d.outerWidth()>0?d.outerWidth()+"px;":"auto")+'" />');d.after(e),a.each(c,function(a,b){e.append('<li class="inlineErrorMsg">'+b+"</li>")}),d.addClass("error")};return e.each(function(c,d){var e=a(d),h=a.validationSettings.$errorEl||a(d).closest("form");e.data("validation_rules",b),e.data("validation_callbacks",f),e.on("validate",function(){g(this)}),h.data("validation_errors")||h.data("validation_errors",{})}),e}}(jQuery),Meetup.UI.containsValidationErrors=function(a){var b=[];if(!a)throw new Error("containsValidationErrors requires a container Element to analyze");return $(a).find("input, select, textarea, #pickerDiv").each(function(a,c){var d=$(c),e=d.data();e.validation_errors&&e.validation_errors.length>0&&b.push(c.id)}),b.length>0},function(a){a.fn.clearValidation=function(){return this.each(function(b,c){var d=a(c),e=d.closest("form");d.data("validation_rules",null),d.data("validation_callbacks",null),Meetup.UI.FieldErrors[c.id]&&delete Meetup.UI.FieldErrors[c.id],e.data("validation_errors")&&e.data("validation_errors")[c.id]&&delete e.data("validation_errors")[c.id],d.removeData("validation_errors");var f=document.getElementById("errorList_"+c.id);f&&a(f).remove(),a(c).removeClass("error")}),this}}(jQuery),function(a){a.fn.inlineError=function(b){return this.each(function(){var c=this,d=a(this);$errorContainer=a("#errorList_"+d.attr("id")),$errorContainer.length<1?d.after('<ul id="errorList_'+d.attr("id")+'" class="inlineErrorMsgs"><li class="fieldError">'+b+"</li></ul>"):$errorContainer.append('<li class="fieldError">'+b+"</li>"),"undefined"==typeof Meetup.UI.FieldErrors[c.id]&&(Meetup.UI.FieldErrors[d.attr("id")]=[]),d.addClass("error"),Meetup.UI.FieldErrors[d.attr("id")].push(b)}),this}}(jQuery),function(a){a.fn.expando=function(b){var c={toggleClass:"jsStartHidden",callback:null,dispatch:!0,prevDefault:!0,innerElms:!1},d=a(this);a.extend(c,b||{});var e=function(){return c.dispatch?(d.delegate(".expando","click",f),d):d.each(function(){a(this).click(f)})},f=function(b){c.prevDefault&&b.preventDefault();var d,e,f=a(this),g=f.attr("class").match(/.*?expand_to_(\w+)/),h="."+c.toggleClass;g&&g[1]&&(e=a("#"+g[1]),c.innerElms?(d=!0,e.find(h).toggleClass(c.toggleClass)):d=e.toggleClass(c.toggleClass)),c.callback&&c.callback.call(this,e,d,f)};e()}}(jQuery),function(a){var b=a(window);a.fn.lazyImg=function(d){var e=!1,f=this,g=[],h=!1,d=a.extend({threshold:100,effect:"show",effectspeed:0,scrollElm:b,throttleQueue:null},d||{}),i=function(){if(0===g.length)return void(h=!1);h=!0;var b=g.splice(0,d.throttleQueue),c=b[b.length-1];c.bind("LoadComplete",i),a.each(b,function(){this&&a(this).trigger("appear")})},j=function(){f.each(function(){var b=a(this);c(b,d)||(d.throttleQueue&&!b.data("queued")?(g.push(b),b.data("queued",!0)):b.trigger("appear"))}),!h&&d.throttleQueue&&i()},k=null;d.scrollElm.bind("scroll",function(){e=!0,k&&clearTimeout(k),k=setTimeout(function(){k=null,e=!1},333)}),setInterval(function(){e&&(e=!1,j())},400);var l=[],m=8,n=0,o=null,p=13,q=647,r=function(a){return"function"!=typeof a?!1:(l[l.length]=a,void s())},s=function(){o&&(clearTimeout(o),o=null),l.length>0&&m>n&&(t(),setTimeout(s,p))},t=function(){++n,l.splice(0,1)[0]()},u=function(){n>0&&--n,o=setTimeout(s,q)},v=function(b){var c=a(b),e=c.data("src"),g=function(){a("<img />").bind("load",function(){d.background?c.hide().css("background-image",["url(",e,")"].join(""))[d.effect](d.effectspeed):c.hide().attr("src",e)[d.effect](d.effectspeed),c.data("loaded",!0),c.removeAttr("data-src"),a.grep(f,function(b){return!a(b).data("loaded")}),c.trigger("LoadComplete"),u()}).attr("src",e)};return function(){r(g)}};return f.each(function(){var b=a(this);b.data("loaded")||(b.one("appear",v(this)),c(b,d)?b.data("loaded",!1):b.trigger("appear"))})};var c=function(a,b){var c=b.scrollElm.scrollTop()+b.scrollElm.height(),d=a.offset().top;return d>=c+b.threshold||!1}}(jQuery),function(a){return a.fn.dialogPopup?!1:void(a.fn.dialogPopup=function(b){var c,d=a.extend({width:840,height:540,delegate:!0,className:"J_dialogPopup"},b||{}),e="dialogPopup_",f=function(b,c,f){var g=d.width-60,h=d.height-20,i=e+(b.data("dialogpopupid")?b.data("dialogpopupid"):(new Date).valueOf()),j=a(['<div class="D_dialog">','<iframe frameborder="0" style="border-width: 0; margin: 10px auto 0 auto;" src="'+c+'" width="'+g+'" height="'+h+'" id="'+i+'" />',"</div>"].join(""));return j.dialog({autoOpen:!1,closeText:"x",modal:!0,minHeight:!1,width:d.width,minHeight:d.height}),f&&"function"==typeof f&&f(j),j},g=function(a,b){var c=a.data("dialog");return c||(c=f(a,b),a.data("dialog",c),a.data("refresh")&&c.bind("close",function(){c.dialog("destroy"),a.data("dialog",null)})),c};return d.delegate?(c=a.makeArray(this.find("."+d.className)),this.delegate("."+d.className,"click",function(b){b.preventDefault();var c=a(b.target),d=c.attr("href");d&&g(c,d).dialog("open")})):c=this.each(function(b,c){var d=a(c),e=c.href;e&&d.bind("click",function(a){a.preventDefault(),g(d,e).dialog("open")})}),c})}(jQuery),function(a){a.fn.actionDropdown=function(b){var c,b=a.extend({delegate:!0,right:!1,dontAppend:!1},b||{}),d=function(a){},e=function(a,c){var d,e,f,g;a.hasClass("D_dropdownRight")||b.right?(d="left top",e="left bottom",f=parseInt(a.attr("x"))||0,g=parseInt(a.attr("y"))||0):(d="right top",e="right bottom",f=parseInt(a.attr("x"))||0,g=parseInt(a.attr("y"))||0),a.position({my:d,at:e,of:c,offset:f+" "+g,collision:"none"})},f=function(d){g(c);var f=d.hasClass("D_dropdown")?d.find(".D_dropdownContent:first"):d.parents(".D_dropdown:first").find(".D_dropdownContent:first");b.dontAppend?(h(f),e(f,d)):(a(document.body).append(f),h(f),e(f,d));var i=(new Date).getTime();f.addClass("dropdown_"+i),d.attr("dropdownId",i);var j=f.find(".D_dropdownToggler");j&&(j.attr("dropdownId",i),j.click(function(a){a.preventDefault(),g(f)}))},g=function(b){d("ddHide()"),b&&(b.addClass("jsStartHidden"),a("#C_page").trigger("hide_dialog"))},h=function(b){d("ddShow()"),b&&(b.removeClass("jsStartHidden"),c=b,a("#C_page").trigger("show_dialog"))},i=function(b){"undefined"!=typeof c&&($target=a(b.target),($target.hasClass("hideDD")||!a.contains(c.get(0),b.target)&&!$target.hasClass("D_dropdownToggler")&&!$target.hasClass("D_dropdownContent"))&&setTimeout(function(){g(c)},150),d("documentBodyClick()"))};a(document.body).click(i);var j=function(i){d("click()"),i.preventDefault(),i.stopPropagation();var j=a(this),k=j.hasClass("D_dropdownParent")?j:j.parents(".D_dropdownParent:first"),l=k.attr("dropdownId");if(!l)return f(k);var m=a("'.dropdown_"+l+":first'");"undefined"==typeof c||c.hasClass("dropdown_"+l)||g(c),m.hasClass("jsStartHidden")?(h(m),b.dontAppend||e(m,k)):g(m)};return b.delegate?void a(this).delegate(".D_dropdownToggler","click",j):this.each(function(){var b=a(this);b.data("hasToggler")||(b.on("click",j),b.data("hasToggler","true"))})}}(jQuery),"object"!=typeof Meetup.Copy&&(Meetup.Copy={}),Meetup.i18N=function(){var a=[];a.en_US={dateStyle:{shortDate:"m/d/y",mediumDate:"M D, Y",longDate:"M D, Y",fullDate:"E, M D, Y",noYearDate:"M D"},timeStyle:{shortTime:"h:mm T",mediumTime:"h:mm:ss T"},commaStr:",",decimalStr:".",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],firstDay:0},a.it={dateStyle:{shortDate:"d/m/y",mediumDate:"D-M-Y",longDate:"D M Y",fullDate:"E D M Y",noYearDate:"D M"},timeStyle:{shortTime:"H.mm",mediumTime:"H.mm.ss"},commaStr:".",decimalStr:",",monthNames:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthNamesShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],dayNames:["Domenica","Luned&#236","Marted&#236","Mercoled&#236","Gioved&#236","Venerd&#236","Sabato"],dayNamesShort:["do.","lun.","mar.","mer.","gio.","ven.","sab."],firstDay:1},a.de={dateStyle:{shortDate:"d.m.y",mediumDate:"d.m.Y",longDate:"D. M Y",fullDate:"E, D. M Y",noYearDate:"D. M"},timeStyle:{shortTime:"HH:mm",mediumTime:"HH:mm:ss"},commaStr:".",decimalStr:",",monthNames:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],firstDay:1},a.es={dateStyle:{shortDate:"D/m/y",mediumDate:"d-M-Y",longDate:"D #de# M #de# Y",fullDate:"E D #de# M #de# Y",noYearDate:"D #de# M"},timeStyle:{shortTime:"H:mm",mediumTime:"H:mm:ss"},commaStr:".",decimalStr:",",monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],dayNames:["Domingo","Lunes","Martes","Mi&eacute;rcoles","Jueves","Viernes","S&aacute;bado"],dayNamesShort:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],firstDay:0},a.fr={dateStyle:{shortDate:"d/m/y",mediumDate:"D M Y",longDate:"D M Y",fullDate:"E D M Y",noYearDate:"D M"},timeStyle:{shortTime:"HH:mm",mediumTime:"HH:mm:ss"},commaStr:".",decimalStr:",",monthNames:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],monthNamesShort:["Jan","Fév","Mar","Avr","Mai","Jun","Jul","Aoû","Sep","Oct","Nov","Déc"],dayNames:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],dayNamesShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],firstDay:1},a.pt={dateStyle:{shortDate:"d-m-Y",mediumDate:"D/M/Y",longDate:"D #de# M #de# Y",fullDate:"E, D #de# M #de# Y",noYearDate:"D #de# M"},timeStyle:{shortTime:"H:mm",mediumTime:"H:mm:ss"},commaStr:".",decimalStr:",",monthNames:["Janeiro","Fevereiro","Mar&ccedil;o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],dayNames:["Domingo","Segunda-feira","Ter&ccedil;a-feira","Quarta-feira","Quinta-feira","Sexta-feira","S&aacute;bado"],dayNamesShort:["dom.","seg.","ter.","qua.","qui.","sex.","sab."],firstDay:0},a.ja={dateStyle:{shortDate:"y/m/d",mediumDate:"Y年M月D日",longDate:"Y年M月D日",fullDate:"Y年M月D日E",noYearDate:"M月D日"},timeStyle:{shortTime:"H:mm",mediumTime:"H:mm:ss"},commaStr:",",decimalStr:".",monthNames:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],monthNamesShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayNames:["日曜日","月曜日","火曜日","木曜日","木曜日","金曜日","土曜日"],dayNamesShort:["日","月","火","木","木","金","土"],firstDay:0};var b={en_US:{shortDate:"m/d/y",mediumDate:"mm dd, yy",longDate:"mm dd, yy",noYearDate:"mm dd"},it:{shortDate:"dd/mm/y",mediumDate:"dd-mm-yy",longDate:"dd mm yy",noYearDate:"dd mm"},de:{shortDate:"dd.mm.y",mediumDate:"d.m.yy",longDate:"dd. mm yy",noYearDate:"dd. mm"},es:{shortDate:"d/mm/y",mediumDate:"d-mm-yy",longDate:"dd mm yy",noYearDate:"dd mm"},fr:{shortDate:"dd/mm/y",mediumDate:"dd mm yy",longDate:"dd mm yy",noYearDate:"dd mm"},pt:{shortDate:"dd-mm-yy",mediumDate:"dd/mm/yy",longDate:"dd mm yy",noYearDate:"dd mm"},ja:{shortDate:"y/m/d",mediumDate:"yyyy年mm月dd日",longDate:"yyyy年mm月dd日",noYearDate:"mm月dd日"}},c=function(a){return 10>a?"0"+a:a};return{jqDateFormat:b,convertCurrency:function(b){for(var c=parseFloat(b).toFixed(2),d=new RegExp("(-?[0-9]+)(.)([0-9]{2})"),e=new RegExp("(-?[0-9]+)([0-9]{3})"),f=c.replace(d,"$1"),g=c.replace(d,"$3");e.test(f);){var h=a[Meetup.Language].commaStr;f=f.replace(e,"$1"+h+"$2")}var i=a[Meetup.Language].decimalStr;return f+i+g},formatNumber:function(b){var c=a[Meetup.Language].decimalStr,d=a[Meetup.Language].commaStr;nStr=b.toString(),x=nStr.split("."),x1=x[0],x2=x.length>1?c+x[1]:"";for(var e=/(\d+)(\d{3})/;e.test(x1);)x1=x1.replace(e,"$1"+d+"$2");return x1+x2},toFloat:function(b){var c=a[Meetup.Language].commaStr;return b.replace(c,"")},parseFloat:function(b){var c=a[Meetup.Language].decimalStr;return b=this.toFloat(b),b=b.replace(/^s+|\s+$/g,""),b.match(/^-?\d*\.?\d*$/)?parseFloat(b):b.match(/^-?\d*,?\d*$/)?(b=b.replace(c,"."),parseFloat(b)):0},formatDate:function(b,d,e){for(var f=d+"Date",g=a[Meetup.Language].dateStyle[f],h="",i=e||d,j=0;j<g.length;j++)switch(g.charAt(j)){case"#":for(j++;"#"!=g.charAt(j);)h+=g.charAt(j),j++;break;case"d":h+=c(b.getDate());break;case"D":h+=b.getDate();break;case"m":h+=c(b.getMonth()+1);break;case"M":h+=this.getMonthName(b.getMonth(),i);break;case"y":h+=c(b.getYear()%100);break;case"Y":h+=b.getFullYear();break;case"E":h+=this.getDayName(b.getDay());break;default:h+=g.charAt(j)}return h},formatTime:function(b,d){for(var e=d+"Time",f=a[Meetup.Language].timeStyle[e],g="",h=null,i=f.length,j=0;i>j;j++)switch(h=f.charAt(j),h===f.charAt(j+1)&&(h+=f.charAt(j+1),j++),h){case"H":g+=b.getHours();break;case"HH":g+=c(b.getHours());break;case"h":g+=b.getHours()%12||12;break;case"hh":g+=c(b.getHours()%12||12);break;case"m":g+=b.getMinutes();break;case"mm":g+=c(b.getMinutes());break;case"s":g+=b.getSeconds();break;case"ss":g+=c(b.getSeconds());break;case"T":g+=b.getHours()>11?"PM":"AM";break;default:g+=f.charAt(j)}return g},convertDateShort:function(a,b,c){var d=null;return d="en_US"==Meetup.Language?a+" "+b+", "+c:b+"-"+a+"-"+c},getMonthNames:function(b){return"full"==b||"long"==b?a[Meetup.Language].monthNames:"short"==b||"medium"==b?a[Meetup.Language].monthNamesShort:null},getMonthName:function(b,c){return"full"==c||"long"==c?a[Meetup.Language].monthNames[b]:"short"==c||"medium"==c?a[Meetup.Language].monthNamesShort[b]:null},getDayNames:function(b){return"full"==b||"long"==b?a[Meetup.Language].dayNames:"short"==b||"medium"==b?a[Meetup.Language].dayNamesShort:null},getDayName:function(b){return a[Meetup.Language].dayNames[b]},getFirstDayOfWeek:function(){return a[Meetup.Language].firstDay}}}(),jQuery.fn.AjaxProgress=function(){return this.each(function(){var a="/img/ajax_loader_trans.gif",b="onajaxsubmit",c="onajaxsuccess",d=$('<div class="interstitialblock please-wait" />'),e=$('<div class="D_centeredAjaxSpinner please-wait"><img src="'+a+'" /> </div>'),f=null,g=function(a){f=$(a),f.bind(b,h),f.bind(c,i)},h=function(a,b){a.stopPropagation();var c=!!b;f.addClass("loadingAjax"),d.appendTo(f).css({height:f.outerHeight(),width:f.outerWidth()}).position({of:f,at:"center center",my:"center center",offset:"",collision:"none"}),c||e.appendTo(f).position({of:f,at:"center top",my:"center top",offset:"0 25",collision:"none"})},i=function(a){a.stopPropagation(),f.removeClass("loadingAjax"),d.remove(),e.remove()};g(this)})},namespace("Bing"),Meetup.Bing.apiLoaded=!1,Meetup.Bing.mapControlUrl="//ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0&onscriptload=BingMapsControlLoaded"+("https:"===window.location.protocol?"&s=1":""),Meetup.Bing.apiKey=IS_DEV?"Ak1tdMo_7Su65Wm2i4Rx4RjgGfaDwiGotOaF77hAAooAx2TyzdBnEiWfVe0cuVd9":"AoLC0CcBNp0FuPixstanqEKePaROq9BLcLBWkdr2OUnHqzEkJqaXqPjatCs8Ze7o",Meetup.Bing.LocalBusinessSearch=function(a,b){function c(c){Meetup.Bing.apiLoaded||b.include(Meetup.Bing.mapControlUrl);var g=this;this.options=a.extend({},d,c),function(){Meetup.Bing.apiLoaded?g.init():e>f&&(f++,setTimeout(arguments.callee,50))}()}var d={mapCenter:{lat:Chapter.lat,lon:Chapter.lon},mapZoom:5,localSearchCount:8},e=20,f=0;return c.prototype={init:function(){var a=this;this.map=new Microsoft.Maps.Map(document.createElement("div"),{credentials:Meetup.Bing.apiKey,center:new Microsoft.Maps.Location(a.options.mapCenter.lat,a.options.mapCenter.lon),zoom:a.options.mapZoom,disableKeyboardInput:!0}),Microsoft.Maps.loadModule("Microsoft.Maps.Search",{callback:function(){a.searchManager=new Microsoft.Maps.Search.SearchManager(a.map)}})},search:function(b,c){this.searchManager.search({query:b,count:this.options.localSearchCount,callback:c,errorCallback:a.noop})}},c}(jQuery,Meetup.Script);var venuePicker={defaults:{},vp:null,dontSearchGoogle:"us"!=Chapter.country,attempts:0,from:"meetup",autocompleteOptions:null,formOpen:!1,init:function(a,b){var c=this;return this.element=$(b),this.defaults=$.extend({},this.defaults,a),this._autocompleteSetOptions(),this.vp=$(this.element).autocomplete(this.autocompleteOptions),this.vp.data("autocomplete")._renderItem=this._renderItem,this.vp.data("autocomplete")._renderMenu=this._renderMenu,$("#recent").delegate("a.add-venue","click",function(a){a.preventDefault();var b=$(this),d=Meetup.Cache.get("venues",b.data("id")),e=Meetup.venueHelper.formatAddress(d);c._setVenue({id:d.venueId,label:d.name,desc:e.full?e.full:e.simple,mapAddress:e.simple,lat:d.lat,lon:d.lon})}),this.binglocalsearch=new Meetup.Bing.LocalBusinessSearch,this},_renderItem:function(a,b){return $('<li class="D_less'+(b.id<0?" suggest_more":"")+'"></li>').data("item.autocomplete",b).append("<a href='#'>"+b.label+(b.desc?"<br/><span class='D_less'>"+b.desc+"</span>":"")+"</a>").appendTo(a)},_renderMenu:function(a,b){var c=this,d="",e=[];a.css({"z-index":4501}),$.each(b,function(b,f){f.prevUsed&&e.push(f),e.length>0&&"undefined"!=typeof f.prevUsed&&f.prevUsed!=d&&(a.append("<li class='venue-cat'>"+(f.prevUsed?Meetup.trn("venue.placesYouveUsed","Places you've used"):Meetup.trn("venue.otherPlaces","Other Places"))+"</li>"),d=f.prevUsed),c._renderItem(a,f)})},_autocompleteSetOptions:function(){this.autocompleteOptions={minLength:2,delay:300,focus:function(){return!1},source:this.searchMeetup.curry(this),select:this._selectVenue.curry(this),search:function(){var a=$(this);a.addClass("search-waiting")},open:function(){var a=$(this);a.removeClass("search-waiting")}}},_selectVenue:function(a,b,c){var d=c.item.id,e=a,f=$(this);return-1==d?(f.autocomplete("close"),f.autocomplete("option","source",e.localSearch.curry(e)),f.autocomplete("search",f.val())):0===d?a._saveVenueToDB(c.item):e._setVenue(c.item),!1},searchMeetup:function(a,b,c){var d=a,e=this.element,f=($(this),e.data("isddress")),g={method:"venueAutosuggest",arg_member:memberId,arg_name:f?d.element.val():b.term,arg_address:f?b.term:"",arg_chapter:chapterId};d.from="meetup",$.ajax({dataType:"json",url:API_URL,data:g,success:function(a){if(a.length>=1&&"__not_ready"!=a[0].name){var b=[{label:"Find more results",value:"Find more results",id:d.dontSearchGoogle?-2:-1}],g=$.map(a,function(a){a.address1=a.address;var b=escapeHTML(a.name),c=Meetup.venueHelper.formatAddress(a);return{label:b,desc:c.full?c.full:c.simple,mapAddress:c.simple,value:b,id:a.venueId,lat:a.lat,lon:a.lon,prevUsed:a.prevUsed}});c(d.dontSearchGoogle||f?g:$.merge(g,b))}else 0===a.length||d.attempts>3?($(e).removeClass("search-waiting"),d.attempts=0,d.dontSearchGoogle||f||($(e).autocomplete("close"),$(e).autocomplete("option","source",d.localSearch.curry(d)),$(e).autocomplete("search",c.term))):setTimeout(function(){d.attempts++,$(e).autocomplete("close"),$(e).autocomplete("search",c.term)},2e4)},fail:function(){alert("Sorry, there was a problem. Please try again.")}})},localSearch:function(a,b,c){"undefined"!=typeof Meetup.RTF&&Meetup.RTF.geocode_using_bing?a.localSearchBing(a,b,c):a.localSearchGoogle(a,b,c)},localSearchBing:function(a,b,c){var d=a.element;a.binglocalsearch.search(b.term,function(b){if(b.searchResults.length>0){var e=$.map(b.searchResults,function(a){var b=Meetup.venueHelper.formatAddress(a);return{label:a.name,desc:b.full||b.simple,value:a.address,address:a.address,city:a.city,state:a.state,country:a.country,zip:a.postalCode,id:0,lat:a.location.latitude,lon:a.location.longitude,cid:""}});c(e)}else $(d).removeClass("search-waiting");d.autocomplete("option","source",a.searchMeetup.curry(a))})},localSearchGoogle:function(a,b,c){var d=($(this),this.element),e=a,f="us"===Chapter.country||"uk"===Chapter.country?Chapter.zip:Chapter.city+" "+Chapter.state,g=function(a,b){var f=b.responseData?b.responseData.results:0;if(f.length>0){var g=$.map(f,function(a){var b=a.titleNoFormatting,c=a.addressLines[0]+(""!==a.addressLines[1]?" "+a.addressLines[1]:""),d=a.url;return{label:b,desc:c,value:a.titleNoFormatting,address:a.streetAddress||a.addressLines[0],city:a.city,state:a.region,country:a.country,zip:a.zip||"",id:0,lat:a.lat,lon:a.lng,cid:d}});c(g)}else $(d).removeClass("search-waiting");d.autocomplete("option","source",e.searchMeetup.curry(e))};e.from="local",$(document.body).bind("googleCallback",g),e.script="http://ajax.googleapis.com/ajax/services/search/local?v=1.0&rsz=8&q="+encodeURIComponent(b.term+" ")+f+"&callback=googleLocalSearchCallback",e._insertScript(e.script)},getVenue:function(){return this.venue},_setVenue:function(a){this.venue={id:a.id,name:a.label,desc:a.desc,mapAddress:""!=a.mapAddress?a.mapAddress:"",lat:a.lat,lon:a.lon,from:this.from},this.defaults.callback(this.getVenue()),this.defaults.dontDestroy||this.destroy()},_saveVenueToDB:function(a){function b(a){var b=Meetup.venueHelper.formatAddress(a),a={label:a.name,desc:b.full||b.simple,mapAddress:b.simple,id:a.venueId,lat:a.lat,lon:a.lon};c._setVenue(a)}var c=this,d={method:"createVenueWithFullAddress",arg_chapter:chapterId,arg_member:memberId,arg_name:a.label,arg_address:a.address,arg_city:a.city,arg_state:a.state,arg_country:a.country,arg_zip:a.zip||"",arg_lat:a.lat||"",arg_lon:a.lon||"",arg_sourceId:a.cid||"",arg_isPublic:$("#event-where-private").length>0&&$("#event-where-private").is(":checked")?!1:!0};Meetup.RemoteApi.post({data:d,success:b,fail:$.noop})},_getLocations:function(a,b){var c={arg_offset:0,arg_token:a.term,arg_language:Meetup.Language,method:"getLocationMatches",arg_lat:Chapter.lat,arg_lon:Chapter.lon};$.ajax({url:API_URL,dataType:"json",data:c,success:function(a){b($.map(a,function(a){return{label:a.name,value:a.name,id:a.id}}))}})},setUserVenue:function(){var a={label:$(this.element).val(),address:$("#event-where-address").val(),city:$("#event-where-city").val(),state:$("#event-where-state").length>0?$("#event-where-state").val():"",country:$("#event-where-country").val(),lat:"0",lon:"0",fullcountry:$("#event-where-country option:selected").text()};this.from="new",this._saveVenueToDB(a)},destroy:function(){$(this.element).autocomplete("destroy"),$("#event-where-address").autocomplete("destroy"),$("#recent").undelegate("a.add-venue","click")},_insertScript:function(a){var b=document.createElement("SCRIPT"),c=document.getElementsByTagName("head")[0];b.setAttribute("type","text/javascript"),b.setAttribute("src",a),c.appendChild(b)}},callout={defaults:{my:"left top",at:"left top",offset:"-259 -27",collision:"none",side:"left"},dom:'<div class="infowidget-box jsStartHidden"><div class="tail"><div class="tailInner"></div></div><div class="infowidget-container"></div></div>',$elm:null,currentSide:null,init:function(a,b){var c=$(b);return $.extend(this.defaults,a||{}),this.$elm=$(this.dom).appendTo(c),this},getCallout:function(){return this.$elm},position:function(a,b){var c=b||this.defaults;this.$elm.position({of:$(a),my:c.my,at:c.at,offset:c.offset,collision:c.collision})},setPointerSide:function(a){this.currentSide&&this.$elm.removeClass(this.currentSide),this.$elm.addClass(a),this.currentSide=a},show:function(){this.$elm.removeClass("jsStartHidden")},hide:function(){this.$elm.addClass("jsStartHidden")}};!function(a){a.fn.placeholder=function(){jQuery.support.placeholder=!1;var b=document.createElement("input");return"placeholder"in b&&(jQuery.support.placeholder=!0),a.support.placeholder?void 0:a(this).each(function(){var b=a(this),c=a("<label class='placeholder muted italic' style='display:none;position:absolute;margin:6px;'>"+b.attr("placeholder")+"</label>");b.before(c).on("focus",function(){c.css({display:"none"})}).on("blur",function(){b.val()||c.css({display:"inline"})}),c.on("click",function(){b.focus()}),b.blur()})}}(jQuery),Meetup.Socialize=function(){var a={},b=[],c=null,d=null,e=!0,f=!1,g=void 0,h=!1,i=0,j={},k=!1,l=!1,m=function(b){var c=a.checkboxFacebook.prop("checked"),d=a.checkboxTwitter.prop("checked"),e=[];c&&(e[e.length]="Facebook"),d&&(e[e.length]="Twitter");var f=$.extend({},{post_to_facebook:c?"1":"",post_to_twitter:d?"1":"",chapterId:"undefined"==typeof Chapter||"undefined"!=typeof Meetup.BD||"undefined"!=typeof Meetup.BD&&Meetup.BD.isFbApp?"":Chapter.id,eventId:"undefined"!=typeof muEvent?muEvent.id:"",message:a.textarea.val()},b||{});if(!l&&c){var g=FB.getAuthResponse();if(!g)return LOG.error("no cookie and no session, why you can call this?"),!1;f["fbsr_"+FB._apiKey]=Meetup.FB.QSencode(g.signedRequest)}$.ajax({type:"POST",url:"/social_media_blast/",data:f,success:function(a){k=!1;var b=o("false"!==a);if(b&&!b.quiet){var c=j.sendSocialMedia;if("true"==a)if(c)K(c,e);else{var d=Meetup.Copy.seeResult.replace("__PT__",e.join(" and "));Meetup.UI.Success.addSuccess(d,void 0,!0)}else c?K(c):Meetup.UI.Success.addError(Meetup.Copy.errorSharing,void 0,!0)}},error:function(){var a=j.sendSocialMedia;a?K(a):Meetup.UI.Success.addError(Meetup.Copy.errorSharing,void 0,!0)}}),$.get(["/r/site/www/0/",Meetup.Socialize.trackingCode,"/http://",window.location.hostname,"/img/clear.gif"].join(""))},n=function(){$("#facebookPromptDialog").dialog(),$("#facebookPromptDialog").trigger("appear")},o=function(){$("#facebookPromptDialog").trigger("dismiss")},p=function(b){b.preventDefault();var c=$(b.target).data("event"),d={};return c&&(d.eventId=c),a.shareIt.hasClass("disabled")?!1:k?!1:(k=!0,m(d),!0)},q=function(a,b){return function(){v(a,b)}},r=function(b){return a.checkboxFacebook.prop("checked")?f===!1?(b.preventDefault(),FB.login(s,{scope:"publish_stream"})):setTimeout(q("facebook",!0),100):setTimeout(q("facebook",!1),100),!1},s=function(){f=!0,v("facebook",!0),Meetup.FB.swapFbName(a.handleFacebook[0],!0),t()},t=function(){var a,b=!1,c=document.cookie.split(";");a:for(var d=0,e=c.length;e>d;++d)if(a=c[d].replace(/^\s+|\s+$/g,""),0===a.indexOf("fbsr_")){b=!0;break a}return b&&(l=!0),b},u=function(){$.ajax({url:Meetup.Data.path_api,data:{method:"getTwitterHandleForMember",arg_member:Member.id},success:x,error:z})
},v=function(b,c){switch(b){case"facebook":c?(a.imgFacebook.length>0&&a.imgFacebook.attr({src:Meetup.Data.path_img_facebook}),a.checkboxFacebook.prop("checked",!0)):(a.imgFacebook.length>0&&a.imgFacebook.attr({src:Meetup.Data.path_img_facebook_g}),a.checkboxFacebook.prop("checked",!1));break;case"twitter":c?(a.imgTwitter.length>0&&a.imgTwitter.attr({src:Meetup.Data.path_img_twitter}),a.checkboxTwitter.prop("checked",!0)):(a.imgTwitter.length>0&&a.imgTwitter.attr({src:Meetup.Data.path_img_twitter_g}),a.checkboxTwitter.prop("checked",!1))}D()},w=function(b){b=b||Meetup.Twitter.get("handleName"),a.handleTwitter.html(['<a href="http://twitter.com/',b,'" target="_blank">@',b,"</a>"].join(""));var c=$('<span> (<a href="#">'+Meetup.Copy.notYou+"</a>)</span>");a.handleTwitter.append(c),c.find("a:first").bind("click",y)},x=function(a){var b;b=a.length<2?"":a,b.length>0?(i=0,Meetup.Twitter.set("hasTied",!0),Meetup.Twitter.set("handleName",b),w(),e||v("twitter",!0)):(Meetup.Twitter.set("hasTied",!1),2>i&&(++i,setTimeout(u,300))),e=!1},y=function(a){return a.preventDefault(),Meetup.Twitter.set("handleName",""),Meetup.Twitter.set("hasTied",!1),B(),!1},z=function(){Meetup.Twitter.set("hasTied",!1)},A=function(){null===d?d=setInterval(A,100):c.closed&&(clearInterval(d),d=null,setTimeout(u,300))},B=function(){var a="undefined"!=typeof window.screenX?window.screenX:window.screenLeft,b="undefined"!=typeof window.screenY?window.screenY:window.screenTop,d="undefined"!=typeof window.outerWidth?window.outerWidth:document.documentElement.clientWidth,e="undefined"!=typeof window.outerHeight?window.outerHeight:document.documentElement.clientHeight-22,f=800,g=390,h=parseInt(a+(d-f)/2,10),i=parseInt(b+(e-g)/2.5,10),j="width="+f+",height="+g+",left="+h+",top="+i;c=window.open(Meetup.Data.path_twitter_tie,"twitter",j),A(),v("twitter",!1)},C=function(){return a.checkboxTwitter.prop("checked")?Meetup.Twitter.get("hasTied")?(setTimeout(q("twitter",!0),100),0===Meetup.Twitter.get("handleName").length&&setTimeout(u,300)):B():setTimeout(q("twitter",!1),100),!1},D=function(){E()?a.shareIt.removeClass("disabled"):a.shareIt.addClass("disabled")},E=function(){var a=!1;a:for(var c=0,d=b.length;d>c;++c)if(b[c].prop("checked")===!0){a=!0;break a}return a=a&&!h},F=function(){var b=a.textarea.val();b.match(/(\r\n)/)||(b.match(/(\r)/)?b=b.replace(/(\r)/g,"xx"):b.match(/(\n)/)&&(b=b.replace(/(\n)/g,"xx")));var c=b.length;h=0==c||void 0!==g&&c>g?!0:!1,D()},G=function(b,c,d){n=c||n,o=d||o,a.shareIt=$(b.shareIt),a.imgFacebook=b.imgFacebook?$(b.imgFacebook):null,a.imgTwitter=b.imgTwitter?$(b.imgTwitter):null,a.handleFacebook=$(b.handleFacebook),a.handleTwitter=$(b.handleTwitter),a.textarea=$(b.textarea),a.checkboxFacebook=$(b.checkboxFacebook),a.checkboxTwitter=$(b.checkboxTwitter),I(c,d)},H=function(b,c){n=b||n,o=c||o,a.shareIt=$("#shareIt"),a.imgFacebook=$("#facebookImg"),a.imgTwitter=$("#twitterImg"),a.handleFacebook=$("#facebookHandle"),a.handleTwitter=$("#twitterHandle"),a.textarea=$("#arg_message"),a.checkboxFacebook=$("#arg_shareToggle_facebook"),a.checkboxTwitter=$("#arg_shareToggle_twitter"),I(b,c)},I=function(){b=[a.checkboxFacebook,a.checkboxTwitter],a.shareIt.bind("click",p),a.checkboxFacebook.bind("click",r),a.checkboxTwitter.bind("click",C);var c=a.textarea.attr("class");if(c){var d=c.match(/\bmaxChars(\d+)\b/);null!==d&&(g=parseInt(d[1])),a.textarea.bind("keyup",F),F()}Meetup.Twitter.get("hasTied")?(i=2,u(),v("twitter",!0)):e=!1,Meetup.FB.get("hasTied")&&Meetup.FB.ready(function(){Meetup.FB.permissions.publish_stream&&(v("facebook",!0),f=!0,t())}),n.call(this)},J=function(a,b){var c=j[a];void 0===c&&(c=j[a]=[]),c[c.length]=b},K=function(a,b){for(var c,d=0,e=a.length;e>d;++d){var c=a[d];"function"==typeof c&&c(b)}};return{init:H,initWithElement:G,trackingCode:"none",attach:J}}(),function(a,b,c){b.Rsvp=function(b){var d={},e={saved:b||{},staged:{}},f={NO:2,YES:3,WAITLIST:4,HAVENT:-1},g=function(b,c,f,g){var h,i,j,k={};return"string"==typeof b?(k[b]=c,"boolean"==typeof f?j=f:(i=f,j=g)):"object"==typeof b&&(k=b,"boolean"==typeof c?j=c:(i=c,j=f)),i=i||"staged",h=a.extend({},e[i]),a.extend(e[i],k),j||a(d).trigger("change:"+i,[h,k,e[i]]),d},h=function(b){return b?e[b]:a.extend({},e.saved,e.staged)},i=function(){var b=a.extend({},e.staged);return e.staged={},a(d).trigger("change:staged",b),d},j=function(){var b=h(),d={method:"rsvpWithAnswers",arg_member:Member.id,arg_chapter:Chapter.id,arg_response:b.Rsvp.response,arg_guests:b.Rsvp.guests,arg_event:b.Event.eventToken,arg_agreedToRefundPolicy:!0,arg_payNow:b.Rsvp.payNow?!0:!1,arg_answers:a.isEmptyObject(b.Rsvp.rsvpAnswers)?"":JSON.stringify(b.Rsvp.rsvpAnswers),arg_referralStr:c.getCookie("referral"),jy_script:"eventRsvp",jy_template:"chapstick.event.rsvpBoxYesNo",jy_return_type:"json_html"};return Meetup.RemoteApi.post({data:d}).done(function(a){a.api_result&&"error"===a.api_result.result||(g(a,"staged"),g(e.staged,"saved"))})};return d.get=h,d.set=g,d.save=j,d.revert=i,d.status=f,d},b.eventAndRsvp=Meetup.Rsvp(Meetup.Data.meetstacheRsvpEvent)}(jQuery,Meetup,require("core/cookie")),window.Spinner=require("shared/spin"),function(a){a.fn.placeholder=function(){jQuery.support.placeholder=!1;var b=document.createElement("input");return"placeholder"in b&&(jQuery.support.placeholder=!0),a.support.placeholder?void 0:a(this).each(function(){var b=a(this),c=a("<label class='placeholder muted italic' style='display:none;position:absolute;margin:6px;'>"+b.attr("placeholder")+"</label>");b.before(c).on("focus",function(){c.css({display:"none"})}).on("blur",function(){b.val()||c.css({display:"inline"})}),c.on("click",function(){b.focus()}),b.blur()})}}(jQuery),function(a,b){Meetup.MustacheTemplates===a&&(Meetup.MustacheTemplates={}),Meetup.MustacheTemplates.chapstick=b.extend(Meetup.MustacheTemplates.chapstick||{},{shared:{GuestsControl:"<div class='segmented-control' style=\"width:100%;\">\n\n	<div class=\"segmented-control-segment\">\n		<input type='radio' name='guestsRadio' value='0' id='guestsRadio0' class='segmented-control-input' {{#currentGuestsIs0}}checked{{/currentGuestsIs0}} />\n		<label for='guestsRadio0' id='guestsRadio0label' class='bold segmented-control-button'>{{justMeText}}</label>\n	</div>\n\n	<div class=\"segmented-control-segment\">\n		<input type='radio' name='guestsRadio' value='1' id='guestsRadio1' class='segmented-control-input' {{#currentGuestsIs1}}checked{{/currentGuestsIs1}} />\n		<label for='guestsRadio1' id='guestsRadio1label' class='bold segmented-control-button'>+1</label>\n	</div>\n\n	{{#maxGuestsIs2}}\n		<div class=\"segmented-control-segment\">\n			<input type='radio' name='guestsRadio' value='2' id='guestsRadio2' class='segmented-control-input' {{#currentGuestsOver1}}checked{{/currentGuestsOver1}} />\n			<label for='guestsRadio2' id='guestsRadio2label' class='bold segmented-control-button'>+2</label>\n		</div>\n	{{/maxGuestsIs2}}\n\n	{{#maxGuestsOver2}}\n		<div class=\"segmented-control-segment\">\n			<label id='guestsMoreButton' class='bold segmented-control-button' {{#currentGuestsOver1}}style='display:none;'{{/currentGuestsOver1}}>{{moreText}}</label>\n			<div id='guestsInputContainer' {{^currentGuestsOver1}}style='display:none;'{{/currentGuestsOver1}}>\n			<input type='number' name='guestsInput' id='guestsInput' min='2' max='{{maxGuests}}' size='4' placeholder='more' pattern='[0-9]*' {{#currentGuestsOver1}}value='{{currentGuests}}'{{/currentGuestsOver1}} />\n			</div>\n		</div>\n	{{/maxGuestsOver2}}\n</div>\n"}})}(void 0,jQuery),Meetup.Shared=Meetup.Shared||{},Meetup.Shared.GuestsControl=function(a,b,c){this.val=b||0,this.$el=a,this.render(c)},$.extend(Meetup.Shared.GuestsControl.prototype,{copy:Meetup.Copy.GuestsControl,template:Handlebars.compile(Meetup.MustacheTemplates.chapstick.shared.GuestsControl),render:function(a){null!=a&&(this.maxGuests=a);var b={moreText:this.copy.more,justMeText:this.copy.justMe,currentGuests:this.val,currentGuestsIs0:0===this.val,currentGuestsIs1:1===this.val,currentGuestsOver1:this.val>1,maxGuests:this.maxGuests,maxGuestsIs2:2==this.maxGuests,maxGuestsOver2:this.maxGuests>2};this.$el.html(this.template(b)),this.setupEvents()},setValue:function(a){var b=this.val!==a;return this.val=a,b&&$(this).trigger("change",a),this},setupEvents:function(){var a=this,b=function(){var b;$this=$(this),b=parseInt($this.val()),b=$.isNumeric(b)?b:$this.attr("min"),b>$this.attr("max")?b=$this.attr("max"):0>b&&(b=0),$this.val(b),a.setValue(b)},c=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},d=$("#guestsMoreButton"),e=$("#guestsInputContainer"),f=$("#guestsInput");d.on("click",function(){d.css({display:"none"}),e.css({display:""}),f.trigger("focus")});var g=function(){$('input[name="guestsRadio"]').prop("checked",!1)};f.on("blur",b),f.on("keyup",c(b,1e3)),f.on("input",g),f.on("focus",function(){""===f.val()&&f.val(f.attr("min")),g()}),this.$el.on("change",'input[name="guestsRadio"]',function(){f.val(""),e.css({display:"none"}),d.css({display:""})}),this.$el.find("#guestsRadio0, #guestsRadio1, #guestsRadio2, #guestsMoreButton").on("click",function(){"guestsMoreButton"!==$(this).attr("id")&&a.setValue(parseInt($(this).val(),10))}),$("body").hasClass("ie8")&&(this.$el.find("#guestsRadio0, #guestsRadio1, #guestsRadio2, #guestsMoreButton").each(function(a,b){var c=$(b);c.attr("checked")&&c.parent().addClass("checked")}),this.$el.find("#guestsRadio0, #guestsRadio1, #guestsRadio2, #guestsMoreButton").on("click",function(b){a.$el.find(".segmented-control-segment").removeClass("checked"),$(b.target).parent().addClass("checked")}))},value:function(){return this.val}}),function(a,b,c,d,e){"use strict";var f=new Spinner({length:5,width:2,radius:6}),g=c.eventAndRsvp,h="true"===g.get("saved").Event.isGhostEvent?!0:!1,i={},j=function(a){f.spin(a.find(".spin")[0]),a.find("button.next").attr("disabled","disabled")},k=function(a){f.stop(),a.find("button.next").removeAttr("disabled")},l=function(a,b){k(a),b.advance()},m=function(b){var c={};return b.find(".question-textarea").each(function(b,d){var e=a(d),f=a.trim(e.val());c[e.data("questionid")]=f}),c},n=function(){var a=g.get(),b=a.Event,c=a.Rsvp;c.response==g.status.WAITLIST&&b.spotsLeft-1>=c.guests&&(c.response=g.status.YES,g.set("Rsvp",c))},o=function(a){var b=a.find("#toggleRadioYes:checked, #toggleRadioNo:checked");return b.length?b.val():null},p=function(b){{var d=g.get(),e=d.Event,f=d.Rsvp;b.response||e.response}a(e.rsvpQuestions).each(function(a,b){var d=f.rsvpAnswers[b.questionId];return!b.required||d&&""!==d?!0:c.Copy["group.event.rsvp.error.empty_rsvp_question"]})},q=function(d,e){var f,h,j,l,m,n,o=d;if(o.api_result&&"error"===o.api_result.result)h=o.errorMessage?o.errorMessage:c.Copy["group.event.rsvp.error.unknown"],k(e),t(e,h);else{if(j=g.get(),l=j.Event,m=j.Rsvp,n=g.get("saved").api_result.redirect,f="true"===l.reqPaymentToRsvp&&!b.isChapterOrg&&("true"==m.isPaymentPending||m.guests+1>m.tickets),f&&n&&""!==n)return void(window.location=n);i={},g.get("saved").Rsvp.response===g.status.YES?G.show():a("#prompt").data("sequenceprompt").close()}},r=function(b,d,e){var f,h=m(d),r=o(d)||g.status.YES,s=g.get("saved"),u=(s.Event,s.Rsvp);if(i.rsvpAnswers=a.extend(!0,i.rsvpAnswers||{},h),r&&(i.response=r),e.GuestsControl&&(i.guests=e.GuestsControl.value()),"true"===s.Event.reqPaymentToRsvp&&(i.payNow=!0),f=p(i))return void t(d,f);n(),j(d);for(var v in i)i.hasOwnProperty(v)&&(u[v]=i[v]);g.set("Rsvp",u),e.last||parseInt(i.response)===g.status.NO?g.save().done(function(a){q(a,d)}).fail(function(a){k(d),t(d,c.Copy["group.event.rsvp.error.refresh"]+" (error: "+a.status+")")}):l(d,this)},s=function(){var b=g.get("saved").Event;a(document.body).append(a("#post-rsvp-invite-panel").removeClass("prompt-panel").hide()),a("#prompt").remove(),"true"!==b.reqPaymentToRsvp&&h&&e.reload(),i={}},t=function(a,b){if(a.length){var c=a.find(".inlineErrorMsgs");c.children(".inlineErrorMsg").text(b),c.show()}else alert(b)},u=function(a,b){a.find("button").text(v(a,b))},v=function(a,b){var d=c.trn("common.next","Next");return o(a)==g.status.NO?c.trn("group.event.rsvp.complete","Finish RSVP"):(b.last&&(d=w(b)?c.Copy["chapter.dues.payNow"]:c.trn("group.event.rsvp.complete","Finish RSVP")),d)},w=function(a){var c=g.get(),d=c.Event,e=c.Rsvp,f=a&&a.GuestsControl?a.GuestsControl.value():e.guests;return"true"===d.reqPaymentToRsvp&&!b.isChapterOrg&&f+1>e.tickets},x={stillGoing:function(){var a=g.get("saved"),b=a.Event,d=a.Rsvp,e="true"==b.waitlistActive&&d.response!=g.status.YES,f=function(){return e||"true"==b.rsvpsClosed&&d.response==g.status.WAITLIST?d.response==g.status.WAITLIST?c.Copy["group.event.status.stillWaiting"]:c.Copy["group.event.rsvp.joinWaitlistPromptHeading"]:d.response==g.status.YES?c.Copy["group.event.status.stillGoing"]:c.Copy["group.event.rsvp.areYouGoing"]};return{template:Handlebars.compile(c.MustacheTemplates.chapstick.event.rsvpStillGoing),view:{rsvpValue:e?g.status.WAITLIST:g.status.YES,valueYes:d.response!=g.status.NO,valueNo:d.response==g.status.NO,trnTitle:f(),yesText:c.trn("common.yes","Yes"),noText:c.trn("common.no","No")}}},guests:function(){return{template:Handlebars.compile(c.MustacheTemplates.chapstick.event.rsvpGuests),view:{anyGuests:c.Copy["group.event.rsvp.bringingAnyGuests"]}}},question:function(a){return{template:Handlebars.compile(c.MustacheTemplates.chapstick.event.rsvpQuestionSingle),view:{index:a.index,question:a.question,id:a.id,memberAnswer:a.memberAnswer,required:a.required,placeholder:c.Copy["group.event.rsvpDirector.eventQuestionsPlaceholder"]}}},refundAgreement:function(){var a=g.get("saved"),d=a.Event,e="true"===d.eventCancelRefund||"true"===d.memberCancelRefund||"true"===d.rescheduleRefund,f="true"!==d.reqPaymentToRsvp||b.isChapterOrg?c.Copy["group.event.details.rsvpPayEventually"]:c.Copy["group.event.details.rsvpPayNow"];return{template:Handlebars.compile(c.MustacheTemplates.chapstick.event.rsvpRefundAgreement),view:{checkboxTxt:f,header:"true"===d.noRefund?c.Copy["group.event.termsNoRefunds"]:c.Copy["group.dues.orgRefundIf"],refundAvailable:"false"===d.noRefund&&e,displayHeader:"true"===d.noRefund||e,requiresPayment:w(),refundItems:function(){var a=[];return"true"===d.eventCancelRefund&&a.push({text:c.Copy["group.event.refundCancellation"]}),"true"===d.memberCancelRefund&&a.push({text:c.Copy["group.event.refundMemberCanCancel"]}),"true"===d.rescheduleRefund&&a.push({text:c.Copy["group.event.refundEventReschedule"]}),a},paymentsToOrganizer:c.Copy["group.event.paymentNoticeNoMeetupOrg"]}}}},y=function(d){var e=[],f=g.get("saved"),h=f.Event,i=f.Rsvp;return"change"===d&&e.push(x.stillGoing()),i.maxGuests>0&&e.push(x.guests()),a.each(h.rsvpQuestions,function(a,b){var d=i.rsvpAnswers[b.questionId];e.push(x.question({index:a+1,question:b.question,id:b.questionId,memberAnswer:d,required:b.required||!1,placeholder:c.Copy["group.event.rsvpDirector.eventQuestionsPlaceholder"]}))}),"true"!==h.reqPaymentToRsvp||b.isChapterOrg||"true"===h.waitlistActive||e.push(x.refundAgreement()),e},z=function(b,d){var e=g.get("saved").Rsvp;return{template:a(Handlebars.compile(c.MustacheTemplates.chapstick.event.rsvpEmptyPanel)({output:d,btnText:c.trn("group.event.rsvp.complete","Finish RSVP")})),name:b,closable:!0,events:[{selector:".refundLink",name:"click",handler:function(a,b){return b.find(".refundAgreementDetails").toggleClass("display-none"),!1}},{selector:"button",name:"click",handler:r},{selector:"#toggleRadioYes",name:"click",handler:function(a,b,c){b.find(".questions, .guests, .refundAgreement").not(".display-none").slideDown(200),u(b,c)}},{selector:"#toggleRadioNo",name:"click",handler:function(a,b,c){b.find(".questions, .guests, .refundAgreement").not(".display-none").slideUp(200),u(b,c)}}],customEvents:[{name:"panel-enter",handler:B(e)}],init:C(e)}},A=function(b){function c(b){d=f.splice(0,b),e="",a.each(d,function(a,b){e+=b.template(b.view)}),h.push(z("panel"+h.length,e))}var d,e,f=y(b),g=3,h=[];if(0===f.length)return h;if(f.length%g!==1)for(;f.length;)c(g);else{for(;f.length>g+1;)c(g);for(;f.length;)c(g-1)}return h},B=function(a){return function(b,c,d){u(c,d),a.response==g.status.NO&&d.first===!0&&c.find(".questions, .guests, .refundAgreement").css("display","none")}},C=function(b){var d=b.maxGuests;return function(e,f){e.find(".question-textarea").placeholder(),e.find(".j-guestsControl").length&&(this.GuestsControl=new c.Shared.GuestsControl(e.find(".j-guestsControl"),b.guests,d)),a(this.GuestsControl).on("change",function(){u(e,f),w(f)?e.find(".refundAgreement").slideDown(200):e.find(".refundAgreement").slideUp(200)}),e.find("textarea").CharCounter({alwaysInDom:!0}),a("body").hasClass("ie8")&&(e.find("#toggleRadioYes, #toggleRadioNo").each(function(b,c){var d=a(c);d.attr("checked")&&d.parent().addClass("checked").attr("aria-checked","true")}),e.find("#toggleRadioYes, #toggleRadioNo").on("click",function(b){e.find("#toggleRadioYes, #toggleRadioNo").parent().removeClass("checked").removeAttr("aria-checked"),a(b.target).parent().addClass("checked").attr("aria-checked","true")}))}},D=function(){a(".velvet-rope").hide(),a("#event-comments-section").show(),a(".event-attendee-section").removeClass("hideRsvpBios")},E=function(b,c,d){var e=a("#prompt"),f={autoOpen:!0,isModal:!0,closable:!0};if(d)f.namedPanels=d;else{if(!b||!c)return;f=a.extend(f,{panels:b,order:c})}e.remove(),a("body").append("<div id='prompt' class='rsvpFlow' role='dialog' aria-label='RSVP Dialog' aria-labelledby='rsvpDialogLabel' tabindex='0'><p id='rsvpDialogLabel' class='display-none'>Edit your RSVP, guests, rsvp questions, or payment.</p></div>"),e=a("#prompt"),e.sequenceprompt(f).on("prompt-close",s),e.focus()},F=function(a){var b=A(a);return D(),0===b.length?(h&&e.reload(),void(g.get("saved").Rsvp.response===g.status.YES&&G.show())):void E(null,null,b)},G={$prompt:null,show:function(){c.RemoteApi.get({data:{method:"getMicroTarget",arg_area:"desktop_rsvp_success",arg_chapter:chapterId,arg_event:c.Data.eventId,out_protocol:"text"}}).done(this.apiCallback).fail(function(){var b=a("#prompt");b.length&&b.data("sequenceprompt")&&a("#prompt").data("sequenceprompt").close()})},apiCallback:function(b){b=JSON.parse(b);var d=a("#prompt"),e=a("#post-rsvp-invite-panel");b&&b.render?(c.MICRO_TARGET&&MICRO_TARGETS.push({area:b.area,time:b.time,metadata:b.metadata,rule:b.rule?b.rule.name:"",type:"remote"}),d.length&&d.data("sequenceprompt")&&d.data("sequenceprompt").close(),G.$prompt=a("#post-rsvp-modal").html(b.render).dialog({dialogClass:"dialog-dark-bg",modal:!0,autoOpen:!0,close:function(){G.$prompt.dialog("destroy")}}),G.$prompt.find(".cta-2").on("click",G.promptCloseHandler)):c.Data.rsvp_social_invite&&e.length?(d.length&&d.data("sequenceprompt")?d.data("sequenceprompt").augmentPanelQueue(e):E({invite:e},["invite"]),e.on("click",".j-close-panel",function(b){b.preventDefault(),a("#prompt").data("sequenceprompt").close()})):d.length&&d.data("sequenceprompt")&&a("#prompt").data("sequenceprompt").close()},promptCloseHandler:function(){G.$prompt.dialog("close")}};c.rsvpDirectorFlow={show:function(a){F(a)}}}(jQuery,Member,Meetup,Chapter,location),function(a,b,c){"use strict";var d=b.eventAndRsvp,e="true"===d.get("saved").Event.isGhostEvent?!0:!1,f=function(a){var b=d.get("saved"),c=b.Event,e=b.Rsvp;h(!0),e.response=a,d.set("Rsvp",e),a!==d.status.YES||"true"!==c.reqPaymentToRsvp?d.save().always(function(){h(!1)}).done(g).fail(i):(r(),h(!1))},g=function(a){a.api_result&&"error"!==a.api_result.result?a.Rsvp.response!==d.status.NO?b.rsvpDirectorFlow.show():e&&c.reload():"event_full"==a.api_result.error&&(j(),b.EventDetails.refresh(),s(a.errorMessage))},h=function(b){var c=a("#rsvpBox button");b?c.prop("disabled",!0):c.prop("disabled",!1)},i=function(c){var d,e;200==c.status?(d=a.parseJSON(c.responseText),e=b.Copy["group.event.rsvp.error."+(d.code||"")]):500==c.status&&(e=b.Copy["group.event.rsvp.error.refresh"]),"undefined"==typeof e&&(e=b.Copy["group.event.rsvp.error.refresh"]),s(e)},j=function(){a("#rsvpBoxContainer").replaceWith(d.get("saved").html),t()},k=function(a){a.preventDefault(),a.stopPropagation(),f(d.status.YES)},l=function(a){a.preventDefault(),a.stopPropagation(),f(d.status.NO)},m=function(a){a.preventDefault(),a.stopPropagation(),f(d.status.WAITLIST)},n=function(a){a.preventDefault(),a.stopPropagation();var b=d.get("saved"),f=(b.Event,b.Rsvp);h(!0),f.response=d.status.WAITLIST,d.set("Rsvp",f),d.save().done(function(){e?c.reload():h(!1)})},o=function(a){a.preventDefault(),a.stopPropagation(),h(!0),b.RemoteApi.post({data:{method:"clearRsvpNotify",arg_member:Member.id,arg_chapter:Chapter.id,arg_event:d.get().Event.eventToken,jy_script:"eventRsvp",jy_template:"chapstick.event.rsvpBoxYesNo",jy_return_type:"json_html"}}).done(function(a){h(!1),a.api_result&&"success"===a.api_result.result&&(d.set(a,"staged"),d.set(d.get("staged"),"saved"))}).fail(function(a){500==a.status?window.location.reload():alert(b.Copy["group.event.rsvp.error.refresh"])})},p=function(a,c,e){var f=d.get("saved");b.RemoteApi.get({data:{method:"getMeetstacheEvent",arg_member:Member.id,arg_chapter:Chapter.id,arg_event:f.Event.eventToken,jy_script:"eventRsvp",jy_template:"chapstick.event.rsvpBoxYesNo",jy_return_type:e&&""!=e?e:"json_html"}}).done(function(b){d.set(b,"saved",!0),a(c)})},q=function(){p(j)},r=function(a){a&&(a.preventDefault(),a.stopPropagation());var c="undefined"!=typeof a?a.data.flow:null;b.rsvpDirectorFlow.show(c)},s=function(b){var c=a("#rsvpBoxContainer .inlineErrorMsgs");c.children(".inlineErrorMsg").text(b),c.show()},t=function(){a("#rsvpYes").on("click",k),a("#rsvpNo").on("click",l),a("#rsvpWaitlist").on("click",m),a(".rsvp-change").on("click",{flow:"change"},r),a("#notifyOff").on("click",o),a("#notifyOn").on("click",n)},u=function(){t(),a(b.eventAndRsvp).on("change:saved",j),a(".rsvpCloseToggle").on("eventChange",q)};b.RsvpBoxYesNo={init:u,showDirector:r}}(jQuery,Meetup,location),Meetup.CloseToNewRSVPs={},function(){var a=Meetup.CloseToNewRSVPs,b=$("a.rsvpCloseToggle:first"),c=($("#rsvpsClosed")[0],Meetup.Copy),d=function(){$(document.body).trigger("click");var a=this,b={arg_rsvpSetting:"closeToRSVPs"==$(this).attr("id")?!0:!1,arg_chapter:Chapter.id,arg_member:Member.id,arg_eventId:muEvent.id,arg_root_event_id:muEvent.rootId,method:"setEventRsvpClosed"},d=$.proxy(f,a);$.ajax({dataType:"json",url:API_URL,data:b,success:function(a){var b;(b=a.error)?e(b):d()},fail:function(){alert(c.errorGeneric)}})},e=function(a){var b,d;switch(a){case"requires_paypal":b=c.payPalSetupError,d="<a href='"+Meetup.URL.root+"payments/'>"+c.setupPaypalNow+"</a>";break;case"requires_amazon":b=c.amazonSetupError,d="<a href='"+Meetup.URL.root+"setupfps/'>"+c.setupAmazonNow+"</a>";break;default:b=c.errorGeneric}Meetup.UI.Success.addError(b,d)},f=function(){b=$(this),"closeToRSVPs"==b.attr("id")?(b.attr("id","openToRSVPs"),b.children(".option").text(Meetup.Copy.openRSVPs),b.children(".sprite").removeClass("door_closed_icon").addClass("door_open_icon"),Meetup.UI.Success.addSuccess(Meetup.Copy.rsvpClosedSuccess),$(".rsvp-meta-info").append('<h3 class="rsvp-box-block rsvp-meta-closed">Rsvps Closed</h3>'),$("#rsvpBox").hide(),a.callback&&"function"==typeof a.callback&&a.callback(!1)):(b.attr("id","closeToRSVPs"),b.children(".option").text(Meetup.Copy.closeRSVPs),b.children(".sprite").removeClass("door_open_icon").addClass("door_closed_icon"),$(".rsvp-meta-closed").remove(),Meetup.UI.Success.addSuccess(Meetup.Copy.rsvpOpenedSuccess),a.callback&&"function"==typeof a.callback&&a.callback(!0)),b.trigger("eventChange")};a.init=function(){b.click(d)},a.callback=null}(),$(function(){Meetup.CloseToNewRSVPs.init()}),Meetup.tinymce_details={defaults:{buttons:{buttons1:"fontsizeselect, forecolor, separator, bold, italic, underline, strikethrough, separator,justifyleft, justifycenter, justifyright, justifyfull, separator, link, unlink,separator, bullist, numlist, separator, outdent, indent, separator, undo, redo, separator, image, imageAlign, separator, spellchecker, code",buttons2:"",buttons3:""},plugins:"-imgAlign, -spellchecker",htmlElm:null,customButtons:null,"float":!0,h:"100%",w:"100%",callback:null,clickElm:null,addClass:null,settings:{theme:"advanced",plugins:"",language:"en"}},isLoaded:!1,$elm:null,elm:null,handlerOverrides:function(a,b,c){var d=tinyMCE.getInstanceById(a);switch(c){case"mceImage":return imageEl=d.controlManager.get("image"),imageEl&&(Meetup.PhotoDialog.makeRequests(),$("#pickerDiv").trigger("appear")),!0;case"mceCodeEditor":return d=tinyMCE.getInstanceById(a),codeEl=d.controlManager.get("code"),codeEl&&(Meetup.htmlEditorDialog.setEditorContent(),$("#htmlEditorDialog").trigger("appear"),Meetup.Layout.redraw()),!0;case"mceEmotion":return d.controlManager.get("emotions")&&$("#emoDialog").trigger("appear"),!0;case"mcePasteWord":return d.controlManager.get("pasteword")&&$("#wordEditorDialog").trigger("appear"),!0;case"mceMedia":return d=tinyMCE.getInstanceById(a),codeEl=d.controlManager.get("flash"),codeEl&&$("#flashDialog").trigger("appear"),!0;case"mceLink":return linkEl=d.controlManager.get("link"),linkEl&&(Meetup.LinkDialog.init(),$("#linkDialog").trigger("appear"),setTimeout(function(){$get("linkAddress").focus()},500)),!0}return!1},loadOnClick:function(a){a&&a.preventDefault(),"undefined"==typeof tinyMCE?Meetup.Script.include(Meetup.Data.tinyMCEUrl,$.proxy(this.loadScripts,this)):this.loadScripts()},loadScripts:function(){var a=function(a){tinymce.ScriptLoader.markDone(a)},b=this.defaults.settings,c=tinyMCE.baseURI.toAbsolute("langs/"+b.language+".js"),d=tinyMCE.baseURI.toAbsolute("themes/"+b.theme+"/editor_template_src.js"),e=tinyMCE.baseURI.toAbsolute("themes/"+b.theme+"/langs/"+b.language+".js"),f=this;a(c),a(d),a(e),function(){tinymce.ScriptLoader.isDone(c)&&tinymce.ScriptLoader.isDone(d)&&tinymce.ScriptLoader.isDone(e)?f.runCallBack():setTimeout(arguments.callee,10)}()},runCallBack:function(){Meetup.useFloatImg=this.defaults["float"],this._registerPlugins(),tinymce.dom.Event._pageInit(),this.loadEditor()},loadEditor:function(){var a=this.defaults.buttons,b=this;if(this.isLoaded)Meetup.Data.eventDescription?tinyMCE.activeEditor.setContent(Meetup.FixTinymceFlash(Meetup.Data.eventDescription)):$(this.defaults.htmlElm).length>0&&!Meetup.Data.groupDescEmpty&&tinyMCE.activeEditor.setContent(Meetup.FixTinymceFlash($(this.defaults.htmlElm).html())),b.defaults.callback(null,tinyMCE.activeEditor);else{$("#link_button").click(Meetup.LinkDialog.update),$("#albumDropDown").bind("change",Meetup.PhotoDialog.albumChanged),$("#updateHtmlButton").click(Meetup.htmlEditorDialog.updateAndDismissDialog);var c;c=Meetup.useFloatImg?{aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img,table",styles:{margin:"0px auto","float":"",display:"block"}}]}:{alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table",styles:{margin:"","float":""}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img,table",styles:{margin:"0px auto","float":"",display:"block"}}]},tinyMCE.init({plugins:b.defaults.plugins,theme:"advanced",content_css:Meetup.Copy.BaseCss+(Meetup.Copy.tinyMceNeedsThemeCss?","+Meetup.Data.themeCSS:"")+(Meetup.Copy.tinyMceExtraCss?","+Meetup.Copy.tinyMceExtraCss:""),body_class:"tinyMCE-editor",extended_valid_elements:"img[class|src|border=0|alt|title|hspace|vspace|width|height|align|name|object|param|embed|style],s,mceobject[height|width],mceiframe[src|width|height],mceembed[src|type|width|height]",theme_advanced_toolbar_location:"top",theme_advanced_disable:"subscript, superscript",theme_advanced_buttons1:a.buttons1,theme_advanced_buttons2:a.buttons2,theme_advanced_toolbar_align:"left",theme_advanced_buttons3:a.buttons3,theme_advanced_resizing:!0,theme_advanced_more_colors:!1,invalid_elements:"frame,table,th,tr,td,style,div",entity_encoding:"raw",relative_urls:!1,spellchecker_rpc_url:API_URL,remove_script_host:!1,theme_advanced_resize_horizontal:!1,flash_wmode:"transparent",flash_quality:"high",flash_menu:"false",width:this.defaults.w,height:this.defaults.h,mode:"exact",formats:c,elements:this.elm.id,execcommand_callback:this.handlerOverrides,setup:function(c){c.onSubmit.add(function(a){$get(b.elm.id).value=Meetup.showTinymceFlash(a.getContent({source_view:!0}))}),(-1!==a.buttons1.indexOf("imageAlign")||-1!==a.buttons2.indexOf("imageAlign")||-1!==a.buttons3.indexOf("imageAlign"))&&(c.onPostRender.add(function(a){a.controlManager.setDisabled("imageAlignControl",!0)}),tinymce.isWebKit&&c.onClick.add(function(a,b){var c=b.target&&"IMG"==b.target.tagName;a.controlManager.setDisabled("imageAlignControl",c),c?(a.controlManager.get("imageAlignControl").selectByIndex(),a.execCommand("mceSelectNode",!1,b.target)):a.controlManager.get("imageAlignControl").setCurrentAlignOptionForImage(b.target)}),c.onNodeChange.add(function(a){var b;b=a.selection.getNode()?"IMG"!=a.selection.getNode().nodeName:!0,a.controlManager.setDisabled("imageAlignControl",b),b?a.controlManager.get("imageAlignControl").selectByIndex():a.controlManager.get("imageAlignControl").setCurrentAlignOptionForImage(a.selection.getNode())})),c.onLoadContent.add(function(a){b.defaults.html?a.setContent(Meetup.FixTinymceFlash(b.defaults.html),{format:"raw"}):b.defaults.wrapElm?a.setContent(Meetup.FixTinymceFlash($(b.defaults.wrapElm)[0].innerHTML),{format:"raw"}):a.setContent("undefined"!=typeof Meetup.Copy.escapedChapterDescription?Meetup.FixTinymceFlash($Meetup.Copy.escapedChapterDescription):Meetup.FixTinymceFlash(b.elm.innerHTML)),"function"==typeof b.defaults.callback&&b.defaults.callback()}),c.onBeforeSetContent.add(function(a,b){b.content=b.content.replace(/<span style="text-decoration.*?line-through.*?">(.*?)<\/span>/gi,"<strike>$1</strike>")}),c.onPostProcess.add(function(a,b){b.content=b.content.replace("<s>",'<span style="text-decoration: line-through;">').replace("</s>","</span>")})}}),this.isLoaded=!0}},_registerPlugins:function(){tinymce.create("tinymce.plugins.ImageAlignPlugin",{createControl:function(a,b){if("imageAlign"==a){var c=b.createListBox("imageAlignControl",{title:"Image Align",onselect:function(a){var b=tinyMCE.activeEditor,c=b.selection.getNode();if("IMG"==c.nodeName){var d=b.dom.getStyle(c,"float"),e={};Meetup.useFloatImg?(e["float"]=d,e["float"]=a&&"none"!=a?a:""):e["float"]="",e=b.dom.parseStyle(b.dom.serializeStyle(e)),b.dom.setAttrib(c,"style",""),b.dom.setStyles(c,e),b.execCommand("mceRepaint")}}});return c.add("None","none"),c.add("Left","left"),c.add("Right","right"),c.setCurrentAlignOptionForImage=function(a){var b=tinyMCE.activeEditor.dom,d=b.getStyle(a,"float");d&&c.select(d)},c}return null}}),"undefined"!=typeof this.defaults.loadPlugins&&this.defaults.loadPlugins(),tinymce.PluginManager.add("imgAlign",tinymce.plugins.ImageAlignPlugin)},init:function(a,b){return this.elm=b,this.$elm=$(b),$.extend(this.defaults,a||{}),this.defaults.clickElm?$(this.defaults.clickElm).click($.proxy(this.loadOnClick,this)):0===this.defaults.clickElm||this.loadOnClick(),this}},Meetup.EventCommon=function(a){var b=Meetup.Data.defaultDuration,c=Meetup.Data.defaultDuration,d=Meetup.Data.maxDuration,e=Meetup.Data.linkColor,f=Meetup.Language,g=Meetup.Templates.lma.lma_when_end,h=Meetup.Copy.endHeaderHtml,i=Meetup.Copy.duration,j=Meetup.Copy.needDate,k=Meetup.Copy.endButNoStart,l=Meetup.Copy.inThePast,m=Meetup.Copy.endTimeInvalid,n=Meetup.Copy.durationOverflow,o=Meetup.Copy.week,p=Meetup.Copy.weeks,q=Meetup.Copy.day,r=Meetup.Copy.days,s=Meetup.Copy.hour,t=Meetup.Copy.hours,u=Meetup.Copy.minute,v=Meetup.Copy.minutes,w=function(a,b,c){var d=a.split("-"),e=b.split(":"),f=void 0===c,g=parseInt(d[0],10),h=parseInt(d[1],10)-1,i=parseInt(d[2],10),j=parseInt(e[0],10);f||(12==j&&"0"===c?j=0:12>j&&"1"==c&&(j+=12));var k=parseInt(e[1],10);return new Date(g,h,i,j,k,0,0)},x=function(){var c=y();0>=b&&A();var d=void 0===a("#event-when-ampm").val(),e=new Date(+c+60*b*1e3),f=parseInt(e.getHours(),10),g=f>=12?1:0;
d||(0===f&&(f=12),f>12&&(f-=12));var h=parseInt(e.getMinutes(),10),i=""+f+":"+(10>h?"0"+h:h)+":00";a("#event-end-date-field").datepicker("setDate",new Date(e));var j=i;d||0!==j.indexOf("12:")||(j="0"+j.substring(2)),a("#event-end-when-time").val(j),d||a("#event-end-when-ampm").val(g),I()},y=function(){var b=a("#formattedDate").val();return void 0===b||""===b?null:w(b,a("#event-when-time").val(),a("#event-when-ampm").val())},z=function(){var b=a("#formattedEndDate").val();return void 0===b||""===b?null:w(b,a("#event-end-when-time").val(),a("#event-end-when-ampm").val())},A=function(){var a=y(),d=z(),e=0;a&&d?e=d-a:a&&(e=c),b=e/6e4,H()},B=["7","8","9","10","11","12","1","2","3","4","5","6"],C=["19","20","21","22","23","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18"],D=["00","15","30","45"],E=function(a){var b,c,d="en_US"===f?B:C,e=d.length,g=D.length,h=[],i=0,j=0;for(12==e&&0===a.indexOf("12:")&&(a="0"+a.substring(2)),i=0;e>i;i++){for(j=0;g>j;j++)c=d[i]+":"+D[j],b={option:12==e&&"12"==d[i]?"0:"+D[j]+":00":c+":00",formatted:"it"===f?d[i]+"."+D[j]:c,selected:c===a},h.push(b);j=0}return h},F=function(b){b&&b.preventDefault(),a("#event-change-duration").hide(),a("#event-end-time-picker").empty().append(Handlebars.compile(g)({eventdateend:"",options:E("10:00"),isUS:function(){return"en_US"===f},ampm:!0,duration_text:c/60,headerHtml:h,linkColor:e,trnAt:Meetup.Copy["common.at"],trnRemoveEndTime:Meetup.Copy["group.event.removeEndTime"]})).show(),a("#event-end-date-field").datepicker({minDate:new Date,altFormat:"yy-mm-dd",altField:"#formattedEndDate"}).bind("focus",function(){a("#ui-datepicker-div").css("z-index","500")}),y()&&x(),H(),a("#event-date-field").datepicker("option","onClose",x),a("#event-end-date-field").datepicker("option","onClose",A),a("#event-when-time, #event-when-ampm").bind("change",x),a("#event-end-when-time, #event-end-when-ampm").bind("change",A),a("#event-end-time-delete").on("click",G)},G=function(b){b&&b.preventDefault(),a("#formattedEndDate,#event_end_month,#event_end_year,#event_end_day").val(""),a("#event-change-duration").show(),a("#event-end-time-picker").hide()},H=function(){a("#duration-hours").html(i+" "+J()),I()},I=function(){if(0!==a("#event_end_month").length){var b=$get("formattedEndDate").value.split("-");a("#event_end_year").val(Number(b[0])),a("#event_end_month").val(Number(b[1])),a("#event_end_day").val(Number(b[2]))}},J=function(){if(0>=b)return"--";var a=b,c=Math.floor(a/10080);a%=10080;var d=Math.floor(a/1440);a%=1440;var e=Math.floor(a/60);a%=60;var f=a,g=", ",h="";return c>0&&(h+=(h.length>0?g:"")+c+" "+(1==c?o:p)),d>0&&(h+=(h.length>0?g:"")+d+" "+(1==d?q:r)),e>0&&(h+=(h.length>0?g:"")+e+" "+(1==e?s:t)),f>0&&(h+=(h.length>0?g:"")+f+" "+(1==f?u:v)),h},K=function(a){var c=y(),e=z(),f=new Date(Chapter.localTime);return null===c?a?j:e?k:!1:f>c?l:e&&c>=e?m:b>d?n:!1};return{eventChangeDurationHandler:F,getStartDateFromDom:y,getEndDateFromDom:z,getDuration:b,validateReqDate:function(){return K(1)},validate:function(){return K(0)}}}(jQuery),function(a){a.fn.declineEvent=function(b){var c={dispatch:!0,className:"decline-event"},d=a(this),e=(Chapter.groupUrl,a(['<div class="D_dialog">','<h2 style="font-size: 1.3em; font-weight: bold; text-transform:capitalize;"><span class="decline-meetup-copy">Decline</span> this Meetup</h2>','<p class="bold">You can write a note to <span role="memberName" id="decline-meetup-membername">__MEMBER__</span> to let them know why.</p>','<textarea name="emailText" id="decline-meetup-textarea" style="background-color: #FFF; background-repeat: no-repeat; background-position: center center; background-attachment: scroll;"></textarea>','<div class="footElement">','<p><input type="submit" name="submit" value="Decline" class="button primary" id="decline-meetup" /></p>','<a href="#" id="decline-meetup-cancel">Cancel</a>',"</div>","</div>"].join("")).dialog({autoOpen:!1,closeText:"x",modal:!0,minHeight:!1,width:"500px"})),f={method:"deleteEvent",arg_member:Member.id,arg_chapter:Chapter.id,arg_eventToken:0,arg_emailText:"",arg_isDelete:!0,arg_entireSeries:!1};a.extend(c,b||{});var g=function(){return c.dispatch?(d.delegate("."+c.className,"click",h),d):d.each(function(){a(this).click(h)})},h=function(b){b.preventDefault();var d=a(this),g=d.data("event"),h=parseInt(d.data("suggesterformer"),10),i=d.data("suggester"),j=d.data("suggesterid");Member.isEvtOrg&&!h&&j!=Member.id?a("#decline-meetup-textarea").show():a("#decline-meetup-textarea").hide(),a("#decline-meetup-textarea").val(""),j!=Member.id?(a(".decline-meetup-copy").html("decline"),a("#decline-meetup-membername").html(i),a("#decline-meetup").attr("value","Decline")):(a(".decline-meetup-copy").html("delete"),a("#decline-meetup-membername").html("you"),a("#decline-meetup").attr("value","Delete")),e.dialog("open"),a("#decline-meetup").click(function(b){b.preventDefault();var h={arg_eventToken:g,arg_emailText:a.trim(a("#decline-meetup-textarea").val())},i=a.extend({},f,h);a.ajax({url:API_URL,data:i,success:function(){e.dialog("close"),"function"==typeof c.success&&c.success.apply(d[0],Array.prototype.slice.call(arguments,0))}}),a(this).unbind()}),a("#decline-meetup-cancel").click(function(a){a.preventDefault(),e.dialog("close")})};g()}}(jQuery),function(a){a.fn.editEvent=function(b){var c={dispatch:!0,className:"edit-event"},d=a(this),e="",f="",g="";trn=require("core/trn"),a("#edit-auto-dialog").remove();var h=Handlebars.compile(['<div class="D_dialog" id="edit-auto-dialog">','<p class="bold">{{{copy.repeatingMeetup}}}</p>','<label for="edit-onlyone"><input type="radio" value="false" name="edit-series" id="edit-onlyone" />{{{copy.editOnlyThisMeetup}}}</label>','<label for="edit-all"><input type="radio" value="true" name="edit-series" id="edit-all" />{{{copy.editThisAndFollowing}}}</label>','<div class="margin-top align-center">','<input type="submit" name="edit" value="{{{copy.editMeetup}}}" class="button primary" id="edit-meetup-auto" />','<a href="#" class="block" id="cancel-edit-meetup-auto">{{{copy.neverMind}}}</a>',"</div>","</div>"].join("")),i=a(h({copy:{repeatingMeetup:trn("group.event.cancelThisOrAll2","This Meetup is on a repeating schedule"),editOnlyThisMeetup:trn("event.editOnlyThisMeetup","Edit only this Meetup"),editThisAndFollowing:trn("event.editThisAndFollowing","Edit this Meetup and all the following Meetups"),editMeetup:trn("common.editUpCase","Edit"),neverMind:trn("common.neverMind","Never mind")}})).dialog({autoOpen:!1,closeText:"x",modal:!0,minHeight:!1,width:"500px"});a.extend(c,b||{});var j=function(){return a("#edit-meetup-auto").click(l),a("#cancel-edit-meetup-auto").click(function(a){a.preventDefault(),i.dialog("close")}),c.dispatch?(d.delegate("."+c.className,"click",k),d):d.each(function(){a(this).click(k)})},k=function(b){var c=a(this),d=c.data("series");return d===!0?(b.preventDefault(),e=c.attr("href"),f=c.data("from-date"),g=c.data("template"),i.dialog("open"),a("#edit-onlyone").prop("checked",!0),!1):void 0},l=function(b){b.preventDefault();var c,d=a("#edit-onlyone").prop("checked"),h=a("#edit-all").prop("checked");return d===!1&&h===!1?!1:(d?c=e:h&&(c=[e,"&fromDate=",f,"&fromTemplate=",g].join("")),void window.location.replace(c))};j()}}(jQuery),function(a){a.fn.reportEventAndMember=function(b){{var c={dispatch:!0,className:"report-event-and-member"},d=a(this);({method:"reportMember",arg_reporterMemberId:Member.id,arg_abuseType:"spam",arg_abuserId:0,arg_url:""})}a.extend(c,b||{});var e=function(){return c.dispatch?(d.delegate("."+c.className,"click",f),d):d.each(function(){a(this).click(f)})},f=function(b){b.preventDefault();var c=a(this),d=c.data("creatorid"),e=c.attr("href");a.ajax({url:e,success:function(){var a=[Meetup.Data.grouphome.baseUrl,"abuse/",d,"/"].join("");location.replace(a)},fail:function(){alert("try this again")}})};e()}}(jQuery);var socialshareWidget={socialshareDefaults:{eventid:0,my:"right top",at:"right top",offset:"259 -30",position:"left"},defaults:{},$elm:null,socialshareCallout:null,$socialshareCallout:null,$container:null,isShareShown:!1,init:function(a,b){return this.$elm=$(b),0===$("#socialshare-container").length?($.plugin("socialshareCallout",callout),$(document.body).socialshareCallout(),this.$socialshareCallout=$(document.body).data("socialshareCallout"),this.socialshareCallout=this.$socialshareCallout.getCallout(),$(".infowidget-container:first",this.socialshareCallout)[0].id="socialshare-container",this._setContainer()):(this.$socialshareCallout=$(document.body).data("socialshareCallout"),this.socialshareCallout=this.$socialshareCallout.getCallout(),this._setContainer()),this.defaults=$.extend({},this.socialshareDefaults,a||{}),this.defaults.success&&"function"==typeof this.defaults.success&&this.$elm.bind("socialshareSuccess",this.defaults.success),this.defaults.error&&"function"==typeof this.defaults.error&&this.$elm.bind("socialshareError",this.defaults.error),this.defaults.cancel&&"function"==typeof this.defaults.cancel&&this.$elm.bind("socialshareCancel",this.defaults.cancel),this},_setContainer:function(){this.$container=$("#socialshare-container")},_closeBox:function(){this.isShareShown===!1&&this.defaults.more?this._displayMore():(this.$socialshareCallout.hide(),this.$elm.triggerHandler("socialshareClose"))},_displayShare:function(){if(!this.defaults.hasDisplayShareCalled){this.defaults.hasDisplayShareCalled=!0;var a=this,b=$("<div/>").html(Chapter.name).text(),c={header:this.defaults.header||"Let people know...",fname:Meetup.Data.fbname,chapter:Chapter.id,group:b,event:this.defaults.eventid,shorturl:this.defaults.shorturl,type:this.defaults.type,stars:this.defaults.stars};switch(c.defaultCopy=this.defaults.copy?[this.defaults.copy," ",this.defaults.shorturl].join(""):["I'm attending a Meetup with ",b," ",this.defaults.shorturl].join(""),this.defaults.type){case"rsvp":Meetup.Socialize.trackingCode="smb_rsvp";break;case"create_event":Meetup.Socialize.trackingCode="smb_evcr";break;case"approve_event":Meetup.Socialize.trackingCode="smb_apev";break;case"post_survey":Meetup.Socialize.trackingCode="smb_evrv";break;case"group_join":Meetup.Socialize.trackingCode="smb_join";break;case"mitm":Meetup.Socialize.trackingCode="smb_mitm";break;case"group_create":Meetup.Socialize.trackingCode="smb_grcr";break;default:Meetup.Socialize.trackingCode="smb_fxme"}temp=Handlebars.compile(Meetup.Templates.socialshareWidget.shareTemplate)(c),this.$container.replaceWith(temp),this._setContainer(),FB&&FB.XFBML.parse(document.getElementById("rsvpFacebookHandle")),Meetup.Socialize.initWithElement({shareIt:document.getElementById("submit-share"),imgFacebook:document.getElementById("rsvpIconFacebook"),imgTwitter:document.getElementById("rsvpIconTwitter"),handleFacebook:document.getElementById("rsvpFacebookHandle"),handleTwitter:document.getElementById("rsvpTwitterHandle"),textarea:document.getElementById("shareMessage"),checkboxFacebook:document.getElementById("rsvpToggleFacebook"),checkboxTwitter:document.getElementById("rsvpToggleTwitter")},void 0,function(){return a._closeBox(),!0}),Meetup.Socialize.attach("sendSocialMedia",$.proxy(this._onSocializeCallback,this)),$("#shareMessage").CharCounter(),$("#close-share").click(function(b){b.preventDefault(),a._closeBox(),a.$elm.triggerHandler("socialshareCancel")})}},_onSocializeCallback:function(a){void 0!==a&&a instanceof Array?this.$elm.triggerHandler("socialshareSuccess",[a]):this.$elm.triggerHandler("socialshareError")},showWidget:function(){this.$socialshareCallout.setPointerSide(this.defaults.position),this.$socialshareCallout.show(),this.$socialshareCallout.position(this.defaults.of,{my:this.defaults.my,at:this.defaults.at,offset:this.defaults.offset,collision:"none"}),this._displayShare()},hideWidget:function(){this._closeBox()},_displayMore:function(){this.isShareShown=!0;var a=this,b={title:this.defaults.more.title,body:this.defaults.more.body},c=Handlebars.compile(Meetup.Templates.socialshareWidget.moreTemplate)(b);this.$container.replaceWith(c),this._setContainer(),$("#close-share").click(function(b){b.preventDefault(),a._closeBox()})},showMore:function(a){a&&(this.defaults.more=a),this.$socialshareCallout.setPointerSide(this.defaults.position),this.$socialshareCallout.show(),this.$socialshareCallout.position(this.defaults.of,{my:this.defaults.my,at:this.defaults.at,offset:this.defaults.offset,collision:"none"}),this._displayMore()}};Meetup.Payment=function(a){var b=null,c=null,d=null,e=null,f='<div class="rsvp-section">						<h3>Add Payment</h3>						<p>Date:</p><input type="text" name="" value="" id="payment-date" class="date-picker" readonly="true" />					</div>					<div class="rsvp-section">						<p>Quantity:</p><input type="text" name="qty" id="qty" size="4" value="1">					</div>					<div class="rsvp-section">						<p>Total Amount:</p><span id="total_currency">'+rawCurrencySymbol+'</span><input class="inline" type="text" name="total" id="total" size="10" value=""></p>					</div>					<div style="margin: 0.75em 0 0.5em;">						<input type="hidden" value="" id="pay-memberid" name="pay-memberid" />						<input type="hidden" value="" id="formattedDate" name="formattedDate" />						<a class="button primary" href="#" id="submit-pay">Add payment</a> <a href=""#" id="close-pay">Cancel</a>					</div>',g=function(){a.plugin("payCallout",callout),a("#eventdets").payCallout(),c=a("#eventdets").data("payCallout"),b=c.getCallout(),b.find(".infowidget-container").html(f),a("#eventdets").delegate("a.addPayment","click",h),a("#close-pay").bind("click",function(a){a.preventDefault(),b.addClass("jsStartHidden")}),a("#submit-pay").bind("click",j),a("#payment-date").datepicker({altFormat:"yy-mm-dd",altField:"#formattedDate"}),a("#payment-date").datepicker("setDate",new Date)},h=function(b){b.preventDefault();var c=a(this);e=c.parents(".j_rsvper"),d=c.data("payinfo"),a("#total").val(Meetup.i18N.convertCurrency(parseFloat(d.amount))),a("#qty").val(d.quantity),a("#pay-memberid").val(d.memberid),c.trigger("hideWidget"),i(e)},i=function(a){c.setPointerSide("right"),c.show(),c.position(a,{my:"left top",at:"left top",offset:"-259 -12",collision:"none",side:"left"})},j=function(c){c.preventDefault();var f={method:"ledgerCreate",arg_orgMemberId:Member.id,arg_senderMemberId:a("#pay-memberid").val(),arg_chapterId:Chapter.id,arg_eventId:muEvent.id,arg_rootEventId:muEvent.rootEventId,arg_amount:a("#total").val(),arg_quantity:a("#qty").val(),arg_date:a("#formattedDate").val()+" 00:00:00",arg_description:"",arg_type:"event",arg_moneyContext:!0};Meetup.RemoteApi.post({dataType:"json",url:API_URL,data:f,async:!1,success:function(){if(a("#qty").val()>=d.quantity){e.find("span.status-badge.no").removeClass("no").addClass("yes").text("Paid");var c=e.find("a.addPayment");c.remove()}else e.data("quantity",parseInt(d.quantity,10)-parseInt(a("#qty").val(),10)),e.data("amount",parseInt(a("#qty").val(),10)*parseInt(d.fee,10));b.addClass("jsStartHidden")}})};return{init:g}}(jQuery),function(a,b){Meetup.MustacheTemplates===a&&(Meetup.MustacheTemplates={}),Meetup.MustacheTemplates.mobile=b.extend(Meetup.MustacheTemplates.mobile||{},{touchlist:{select:'<li class="touchList-item touchList-item--select" id="event-where-state-liselect">\n	<label class="ffbox" for="event-where-state">\n		<div class="ffbox-flex">\n			<div class="touchList-item--select-wrapper">\n				<select id="event-where-state" name="state" tabindex="0">\n					{{#states}}\n						{{#state}}\n							<option value="{{code}}" {{#selected}}selected{{/selected}}>{{{name}}}</option>\n						{{/state}}\n					{{/states}}\n				</select>\n				<div class="touchList-item--select-mask">\n					<span class="touchList-item--select-mask-arrow">\n						<i class="icon-s icon-drop-down"></i>\n					</span>\n				</div>\n			</div>\n		</div>\n	</label>\n	<label id="venueNamee-add-state_vmsg" for="event-where-state" class="touchList-validationMessage">\n	</label>\n</li>\n'}})}(void 0,jQuery),Meetup.venueHelper=function(a){var b=0,c=5,d=!1,e=null,f=[],g=0,h={},i=null,j=null,k=!1,l=function(a){d=a},m=function(){return d},n=function(a){j=d?MM.Chapter.country:Chapter.country,q(),r(),o(),function(){"undefined"!=typeof h[j]&&i&&k?a():setTimeout(arguments.callee,10)}()},o=function(h,i){if(g=h?h:b,f&&f[g])e=f[g],"function"==typeof i&&i(e);else{var j={method:"getRecentVenues",arg_member:d?MM.Member.id:Member.id,arg_chapter:d?MM.Chapter.id:Chapter.id,arg_index:g,arg_size:c},l=!1;a.ajax({dataType:"json",url:API_URL,data:j,success:function(b){if(b.length>0){b.length>c-1&&(l=!0,b.pop());var d={venues:a.map(b,function(a){Meetup.Cache.put("venues",a.venueId,a);var b=v(a),c=w(b.simple);return{id:a.venueId,name:a.name,address:b.full?b.full:b.simple,lat:a.lat,lon:a.lon,mapurl:c,trnSelect:Meetup.trn("common.select","Select")}}),hasmore:l||!l&&0!=g&&f.length>1,first:0==g,last:!l,trnPrevious:Meetup.trn("common.previous","Previous"),trnMore:Meetup.trn("common.more","More")};e=Handlebars.compile(Meetup.Templates.venue)(d),f[g]=e}else e=null;k=!0,"function"==typeof i&&i(e)}})}},p=function(b){b.preventDefault();var c=a(this),d=c.hasClass("next")?g+4:g-4,e=function(b){a("#recent").html(b)};o(d,e)},q=function(b,c){var d=b||j;if(j=d,"us"!=d&&"ca"!=d&&"it"!=d||"undefined"!=typeof h[d])"undefined"==typeof h[d]&&(h[d]=null),"function"==typeof c&&c();else{var e={co:d,json:1};a.ajax({dataType:"json",url:"/get-loc-data.jsp",data:e,success:function(a){h[d]=a.length>0?a:null,"function"==typeof c&&c()},fail:function(){alert("Sorry, there was a problem. Please try again.")}})}},r=function(){i||a.ajax({dataType:"html",url:"/shared/countryMenuOpts_inc.jsp",data:{select:j},success:function(a){i=a.length>0?a:null},fail:function(){alert("Sorry, there was a problem. Please try again.")}})},s=function(){var b=a(this),c=b.val();d?(a("#event-where-state").prop("disabled",!0),a("#event-where-state-liselect").hide()):a("#event-where-state").remove(),q(c,t)},t=function(){if(h[j]){var b={states:function(){return{state:a.map(h[j],function(a){return{code:a.code,name:a.name,selected:a.code==(d?MM.Chapter.state:Chapter.state)}})}}},c=Handlebars.compile(d?Meetup.MustacheTemplates.mobile.touchlist.select:Meetup.Templates.statemenu)(b);d?a("#event-where-state-liselect").replaceWith(c):a(c).insertBefore(a("#event-where-country"))}},u=function(b){b.preventDefault();var c=a(this),d=c.data("toggle"),e=a("#"+d);a("a.venue-toggle.selected").removeClass("selected"),c.addClass("selected"),e.hasClass("jsStartHidden")&&(e.siblings("div.venue-tab").addClass("jsStartHidden"),e.removeClass("jsStartHidden"))},v=function(a){var b={simple:escapeHTML((a.address1||a.address)+(a.city?", "+a.city:"")+(a.state?", "+a.state:"")),full:""};return a.address2||a.address3?(a.address2&&(b.full+=escapeHTML(a.address1)+"<br/><span>"+escapeHTML(a.address2)+"</span><br/>"),a.address3&&(b.full+="<span>"+escapeHTML(a.address3)+"</span><br/>"),a.city&&(b.full+=escapeHTML(a.city)),a.state&&(b.full+=", "+escapeHTML(a.state)),b):b},w=function(a){if(a){var b=encodeURIComponent(a);return"undefined"!=typeof Meetup.RTF&&Meetup.RTF.bing_map_links?"http://www.bing.com/maps/?where1="+b:"http://maps.google.com/maps?q="+b}},x=function(){return i},y=function(){return h},z=function(){return e};return{setState:s,updateStates:t,switchVenueTab:u,getRecentVenues:o,pageVenues:p,states:y,countries:x,venues:z,formatAddress:v,setIsMobile:l,getIsMobile:m,getMapAddressLink:w,init:n}}(jQuery),function(a,b){if(a.fn.hoverToEdit)return!1;var c="hoverToEdit",d="elementid",e={change:Handlebars.compile('<a href="#" class="hover-to-edit-change hover-to-edit-menu-item" title="{{TIP}}">{{{COPY}}}</a>'),cancel:Handlebars.compile('<a href="#" class="hover-to-edit-cancel hover-to-edit-menu-item" title="{{TIP}}">{{{COPY}}}</a>')},f="hover-to-edit-hovering",g="hover-to-edit-disable",h="hover-to-edit-noposchange",i="hover-to-edit-ext-change",j="hover-to-edit-disabled";a.fn.hoverToEdit=function(b){var e={delegate:!0,className:"hover-to-edit"},f=this,g=function(){if(a.extend(e,b||{}),e.delegate)f.find("."+e.className).each(function(a,b){new l(b,e)}),f.delegate("."+e.className,"hover",j).delegate("."+i,"click",function(a){h(a,"change")});else{var c=new l(f[0],b);f.hover(a.proxy(c.onMouseEnter,c),a.proxy(c.onMouseLeave,c)).delegate("."+i,"click",function(a){h(a,"change")})}},h=function(b,e){var f=a(b.currentTarget).data(d),g=document.getElementById(f);if(!g)return!1;var h=a(g).data(c);switch(e){case"change":h.onChangeClick(b)}},j=function(b){var d=a(b.currentTarget).data(c);"mouseenter"==b.type?d.onMouseEnter(b):d.onMouseLeave(b)};g()};var k={noCancel:!1,changeCopy:b&&b["common.change"]||"change",changeTip:b&&b["common.change"]||"change",changeCallback:null,cancelCopy:"x",cancelTip:b&&b["common.remove"]||"remove",cancelCallback:null,enabled:!0,noPosChange:!1},l=function(b,d){this.option=a.extend({},k,d.each["#"+b.id]||{}),this.original={};var e=m(b,{cancelCopy:this.option.cancelCopy,cancelTip:this.option.cancelTip,changeCopy:this.option.changeCopy,changeTip:this.option.changeTip},this.option.noCancel);this.element={root:b,change:e.change,cancel:e.cancel},a(b).hasClass(j)&&(this.option.enabled=!1),a(b).hasClass(h)&&(this.option.noPosChange=!0),a(this.element.change).click(a.proxy(this.onChangeClick,this)),this.option.noCancel||a(this.element.cancel).click(a.proxy(this.onCancelClick,this)),this.resetPosition(),this.option["background-color"]&&(this.original={"background-color":a(this.element.root).css("background-color")}),a(b).data(c,this)};l.prototype.onMouseEnter=function(){return this.option.enabled?void this.showHoverMenu():!0},l.prototype.onMouseLeave=function(){return this.option.enabled?void this.hideHoverMenu():!0},l.prototype.onChangeClick=function(a){a.preventDefault(),this.disable(),"function"==typeof this.option.changeCallback&&this.option.changeCallback(a,this.element.root)},l.prototype.onCancelClick=function(a){a.preventDefault(),this.disable(),"function"==typeof this.option.cancelCallback&&this.option.cancelCallback(a,this.element.root)},l.prototype.resetPosition=function(){{var b,c;a(this.element.root)}this.option.noCancel||(b=a(this.element.cancel),b.css({visibility:"hidden",display:"block"})),c=a(this.element.change),this.option.noCancel||(c.css("right",b.outerWidth()+1+"px"),b.attr("style",""))},l.prototype.disableCancel=function(){a(this.element.root).removeClass(j)},l.prototype.enableCancel=function(){a(this.element.root).addClass(j)},l.prototype.showHoverMenu=function(){var b=a(this.element.root);return b.hasClass(g)?!1:(b.addClass(f),this.option.noPosChange||b.css("position","relative"),void(this.option["background-color"]&&b.css("background-color",this.option["background-color"])))},l.prototype.hideHoverMenu=function(){var b=a(this.element.root);b.removeClass(f),this.option.noPosChange||b.css("position","static"),this.option["background-color"]&&b.css("background-color",this.original["background-color"])},l.prototype.enable=function(){this.option.noCancel||this.element.root.appendChild(this.element.cancel),this.element.root.appendChild(this.element.change),this.resetPosition(),this.option.enabled=!0},l.prototype.disable=function(){this.hideHoverMenu(),!this.option.noCancel&&a.contains(this.element.root,this.element.cancel)&&this.element.root.removeChild(this.element.cancel),a.contains(this.element.root,this.element.change)&&this.element.root.removeChild(this.element.change),this.option.enabled=!1};var m=function(b,c,d){var f,g,h={};return d||(f=a(e.cancel({COPY:c.cancelCopy,TIP:c.cancelTip})),h.cancel=f[0],b.appendChild(h.cancel)),g=a(e.change({COPY:c.changeCopy,TIP:c.changeTip})),h.change=g[0],b.appendChild(h.change),h}}(jQuery,Meetup.Copy),function(a){var b={startDelay:500,fadeThis:!1};a.fn.waitPls=function(c){var d=a.extend({},b,c);if(this.length){var e=this;e.spinner=!1,e.timeout=!1,e.show=function(){var b,c,f;clearTimeout(e.timeout),e.spinner||(e.spinner=a('<div class="BD_spinner"></div>').appendTo("body"),b=e.offset(),c=Math.round(b.top+e.outerHeight()/2-e.spinner.outerHeight()/2),f=Math.round(b.left+e.outerWidth()/2-e.spinner.outerWidth()/2),"number"==typeof d.fadeThis&&e.css("opacity",d.fadeThis),e.spinner.css({display:"none",top:c+"px",left:f+"px"}).fadeIn("slow"))},e.stop=e.hide=function(){clearTimeout(e.timeout),e.spinner&&(e.spinner.remove(),"number"==typeof d.fadeThis&&e.css("opacity",1),e.spinner=!1)},e.start=function(){e.timeout=setTimeout(e.show,d.startDelay)}}return this}}(jQuery),Meetup.Talk=function(a){var b,c,d,e,f,g={selector:"#event-comments-section",MAX_COMMENT_LENGTH:1e3,comment_table_name:"event_comment",itemTypeToken:"",comment_table_id:null,comment_reply:!1,comment_read:!1,comment_like:!1,comment_new:!1,like_reply_id:null},h=null,i=null,j=Meetup.TalkMustache,k="COMMENT",l="REPLY",m="MEMBER_EVENT_RATING",n="SUGGESTION_COMMENT",o={COMMENT:"event_comment",REPLY:"reply",EVENT_DIFF:"event_diff",MEMBER_EVENT_RATING:"member_event_rating",SUGGESTION_COMMENT:"event_suggestion_comment"},p=function(j){b=a.extend({},g,j||{}),c=a(b.selector),d=c.find(".comment-wrap"),e=c.find(".j-comment-input"),f=c.find(".j-submit-comment"),c.on("mouseenter",".x-mark",function(a){a.stopPropagation(),null!==i&&clearTimeout(i);var b=this;h=setTimeout(function(){x(b)},300)}).on("mouseleave",".x-mark",function(b){b.stopPropagation(),null!==h&&clearTimeout(h);var c=a(this),d=a.browser.mozilla===!0?b.relatedTarget:b.toElement,e=d.className.match(/x-mark-cont/),f=e&&e.length>0?300:10;i=setTimeout(function(){y(c.parent().next())},f)}).on("mouseenter",".x-menu",function(a){a.stopPropagation(),null!==i&&clearTimeout(i)}).on("mouseleave",".x-menu",function(b){b.stopPropagation();var c=a(this);i=setTimeout(function(){y(c)},10)}).on("click",".j-write-reply",z).on("click",".deleter",C).on("click",".cvoter",I).on("click",".j-undo-cd",D).on("click",".j-show-all-replies",H).on("keydown",".reply-input",function(a){if(!a.shiftKey&&13===a.which){a.preventDefault();var b=this.value;b.length>0&&b.replace(/\s/g,"").length>0&&E.call(this)}}).on("click",".j-like-list",function(){return!1}).on("click",".j-mark-as-spam",K).on("click",".j-flag-as-inappropriate",L).on("click",".alert-success .actions a",O).on("click",".j-mute",M).on("focus",".j-comment-input",function(){a(this).closest(".comment-wrap").removeClass("error").next(".fieldError").hide()}),f.on("click",A),e.on("focus",function(){d.hasClass("mini")&&t()}),s(),r(),Meetup.MemberInfoWidget(a(".talk"),{position:"left",my:"left top",at:"right center",offset:"-1 -30",trackingCode:"sj51c",hideMemberPhoto:!0}),Meetup.TooltipWidget(a("#conversation"))},q=function(a){return 0===a.length?!1:(a.addClass("scrollto-focus"),a.trigger("clearTip"),setTimeout(function(){a.focus()},1),void a.one("blur",function(){a.removeClass("scrollto-focus")}))},r=function(){e.length>0&&b.comment_new&&(q(e),scrollToElement(e))},s=function(){function d(){n.click()}function e(){return 0===k.length?!1:(l.find(".j-write-reply").click(),void q(m))}function f(){var c=b.like_reply_id?a("#reply-"+b.like_reply_id):j;if("unlike"!==c.html().toLowerCase()&&c.length>0){var d=c.find(".cvoter");"like"===d.html().toLowerCase()&&d.click()}}var g=o[b.itemTypeToken],h=g||b.comment_table_name,i=b.comment_table_id,j=a("#"+h+"-"+i);if("1"===b.comment_read&&!j.length)return void scrollToElement(c);if(0===j.length)return!1;var k=j.parents("li.replies"),l=k.prev("li"),m=k.find("textarea.reply-input"),n=k.find(".j-show-all-replies");b.comment_reply&&e(),(b.comment_read||"reply"==b.comment_table_name)&&d(),b.comment_like&&f(),scrollToElement(j)},t=function(){d.hasClass("mini")?d.removeClass("mini"):(u(e),d.addClass("mini"))},u=function(a){a.val("").blur()},v=function(a){return a.closest("ul.comments > li")},w=function(a){var b=a.split("-");return b[1]},x=function(b){var c=a(b),d=c.parent().next();null!==h&&clearTimeout(h),c.addClass("hoverintent"),d.addClass("hoverintent")},y=function(a){var b=a.prev().find(":first-child");null!==i&&clearTimeout(i),a.hasClass("hoverintent")&&b.hasClass("hoverintent")&&(a.removeClass("hoverintent"),b.removeClass("hoverintent"))},z=function(b){b.preventDefault();var c=a(this),d=a("#"+c.data("parent-id")).next();d.hasClass("replies")&&d.is(":hidden")&&d.show(),d.find("textarea").focus()},A=function(c){c.preventDefault();var f=a(this),g=f.next(),h=a.trim(e.val()),i=function(b){d.addClass("error");var c=d.parent().find(".fieldError");c.length>0?(c.text(b),c.show()):d.after(a('<p class="fieldError">'+b+"</p>")),f.prop("disabled",!1).removeClass("disabled")};if(h.length>0&&h.length<=b.MAX_COMMENT_LENGTH&&h!=e.attr("title")){f.prop("disabled",!0).addClass("disabled"),g.removeClass("invisible");var j={method:"addEventComment",arg_commentText:h,arg_member:memberId,arg_chapter:chapterId,arg_event:b.eventId,arg_brWidth:34,arg_linkifyWidth:34,arg_linkifySkipEsc:!0};Meetup.RemoteApi.post({dataType:"json",url:Meetup.URL.api,data:j,error:function(a){void 0!==a.error&&B(a.error,i),g.addClass("invisible")},success:function(b){return b.rsvpResponse?(f.prop("disabled",!1).removeClass("disabled"),a(".talk .error").removeClass("error"),a(".talk .fieldError").remove(),void(b.rsvpResponse?(F(b.eventCommentText,b.eventCommentId),g.addClass("invisible"),t()):(alert(Meetup.Copy.errorGeneric),g.addClass("invisible")))):void this.error(b)}})}else h.length>b.MAX_COMMENT_LENGTH&&B("COMMENT_LENGTH_OVER_LIMIT",i)},B=function(a,b){var c;switch(a){case"OVER_DAILY_GROUP_LIMIT":c=Meetup.Copy.overDailyGroupLimit;break;case"COMMENT_LENGTH_OVER_LIMIT":c=Meetup.Copy.commentLengthOverLimit;break;case"COMMENT_EMPTY":c=Meetup.Copy.commentEmpty;break;case"SPAM":c=Meetup.Copy.commentSpam;break;default:c=Meetup.Copy.commentErrorGeneric}"function"==typeof b&&b(c)},C=function(b){b.preventDefault();var c=a(this),d=c.data("anchor-id"),e=c.data("id"),f=c.data("commenttype");y(c.closest(".x-menu")),Meetup.RemoteApi.post({type:"POST",dataType:"json",url:Meetup.URL.chapterapi,data:{method:"deleteItem",arg_member:memberId,arg_chapter:chapterId,arg_itemId:e,arg_itemType:f},success:function(){var a;if(f===k)a="#event_comment-";else if(f===l)a="#reply-";else if(f===m)a="#member_event_rating-";else{if(f!==n)return;a="#event_suggestion_comment-"}var b=c.parents(a+e),g=b.children(".figureset"),h=b.next(".replies"),i=h.length>0;i?h.find("ul li").length>1?h.addClass("j-deleted").hide():h.hide():f===l&&G(d,-1),g.addClass("j-deleted").hide(),b.addClass("lipfix"),b.prepend("<p>"+Meetup.Copy.commentDeleted+' <a href="#" class="j-undo-cd" data-anchor-id="'+d+'" data-commenttype="'+f+'">'+Meetup.Copy.undoCapitalized+"</a></p>").fadeIn()},error:function(){alert(Meetup.Copy.errorGeneric)}})},D=function(b){b.preventDefault();var c=a(this),d=c.parent(),e=d.parent(),f=c.data("commenttype"),g=e.attr("id").split("-"),h=g[1],i=e.find(".j-deleted"),j=e.next();Meetup.RemoteApi.post({type:"POST",url:Meetup.URL.chapterapi,data:{method:"undeleteItem",arg_member:memberId,arg_chapter:chapterId,arg_itemId:h,arg_itemType:f},success:function(){j.hasClass("j-deleted")&&(i=i.add(j)),d.remove(),e.removeClass("lipfix"),i.removeClass("j-deleted").show(),"reply"===f&&G(c.data("anchor-id"),1)},error:function(){alert(Meetup.Copy.errorGeneric)}})},E=function(){var c=a(this),d=c.next(".dot-loader-16"),e=this.id.split("-"),f=e[2],g=e[1]+"-"+e[2],h=a("#"+g).data("commenttype"),i=this.value,k=function(b){c.addClass("error");var d=c.parent().find(".fieldError");d.length>0?d.text(b):c.after(a('<span class="fieldError">'+b+"</span>")),c.prop("disabled",!1)};i.length>0&&i.length<=b.MAX_COMMENT_LENGTH&&i!=c.attr("title")?(c.prop("disabled",!0),d.removeClass("invisible"),Meetup.RemoteApi.post({type:"POST",dataType:"json",url:Meetup.URL.api,data:{method:"addReply",arg_member:memberId,arg_chapter:chapterId,arg_event:b.eventId,arg_itemTypeToken:h,arg_tableId:f,arg_commentText:i,arg_brWidth:24,arg_linkifyWidth:24,arg_linkifySkipEsc:!0,_csrf_token:getCookie("MEETUP_CSRF"+(IS_DEV?"_DEV":""))},error:function(a){void 0!==a.error&&B(a.error,k),d.addClass("invisible")},success:function(b){if(b.error)return void this.error(b);var e={isAjax:!0,commenterMemberId:Member.id,isReply:!0,isReplyable:!1,likeCopy:Meetup.Copy.like,isLikeable:!0,showXMenu:!0,name:Member.name,url:Chapter.groupUrl+"members/"+Member.id,photo:RegExp(/noPhoto_50\.gif/).test(Member.memberThumb)?Meetup.Data.nobodyImgUrl:Member.memberThumb,blankImg:Meetup.Data.blankImgUrl,comment:b.comment_text,id:b.reply_id,anchorId:"event_comment-"+f,tablename:"reply",commentType:l,isMember:!0,isComment:!0,hasLikes:!1,posted:Meetup.Copy.justNow,canDelete:!0,muteStr:Meetup.Copy.mute,unmuteStr:Meetup.Copy.unmute,replyStr:Meetup.Copy.reply};
a(".talk .error").removeClass("error"),a(".talk .fieldError").remove();var g=Handlebars.compile(j.comment)(e);c.val(""),a(g).hide().insertBefore(c.closest("li.reply-wrap")).fadeIn(),G(c.data("anchor-id"),1),c.prop("disabled",!1),d.addClass("invisible"),c.trigger("autosize"),c.blur()}})):i.length>b.MAX_COMMENT_LENGTH&&B("COMMENT_LENGTH_OVER_LIMIT",k)},F=function(b,c){var d={isAjax:!0,commenterMemberId:Member.id,name:Member.name,showXMenu:!0,isReply:!1,isReplyable:!0,likeCopy:Meetup.Copy.like,isLikeable:!0,isMutable:!0,isMuted:!1,url:Chapter.groupUrl+"members/"+Member.id,photo:RegExp(/noPhoto_50\.(gif|png)/).test(Member.memberThumb)?Meetup.Data.nobodyImgUrl:Member.memberThumb,blankImg:Meetup.Data.blankImgUrl,comment:b,id:c,tablename:"event_comment",commentType:k,isMember:!0,isComment:!0,hasLikes:!1,posted:Meetup.Copy.justNow,canDelete:!0,deleteLi:'<li><a href="#" class="deleter" id="delete_'+c+'_event">'+Meetup.Copy.deleteCapital+"</a></li>",muteStr:Meetup.Copy.mute,unmuteStr:Meetup.Copy.unmute,replyStr:Meetup.Copy.reply},e=Handlebars.compile(j.comment)(d),f=a(e),g=a(f.get(0));f.hide().prependTo("#conversation"),g.fadeIn(),a(".ie6, .ie7, .ie8, .ie9").length&&f.find(".textInputTip").TextInputTip({dontStop:!0}),f.next(".replies").find("textarea").autosize()},G=function(b,c){var d="#"+b,e=a(d).next().find(".j-show-all-replies");if(e.length>0){var f=parseInt(e.text().split(" ")[2],10);f+=c,e.text(Meetup.TRN("talk").get("viewAllRepliesPlural",{count:f}))}},H=function(b){b.preventDefault();var c=a(this).parents("li:first"),d=c.siblings();d.filter(":hidden").show(),a.browser.msie&&parseInt(a.browser.version,10)<8&&d.not(".reply-wrap").css("zoom",1),c.remove()},I=function(b){b.preventDefault();var c=a(this),d=1===c.data("status")?!0:!1,e=c.data("id"),f=e.split("-"),g=f[0],h=f[1],i=a.data(document.body,"tooltip-widget");i&&delete i[e+"-likes"],Meetup.RemoteApi.post({type:"POST",url:Meetup.URL.api,data:{method:d?"removeLikeComment":"addLikeComment",arg_chapter:Chapter.id,arg_member:Member.id,arg_commentId:h,arg_commentType:g},success:function(){d?(c.html(Meetup.Copy.like),c.data("status",0),J(-1,c)):(c.html(Meetup.Copy.unlike),c.data("status",1),J(1,c))}})},J=function(a,b){var c,d,e=b.siblings(".likeWidget"),f=e.find("a");if(e.length)switch(c=e.is(":visible")?f.text():0,d=parseInt(c,10)+parseInt(a,10)){case 0:f.text("0"),e.hide();break;case 1:f.text("1"),e.show();break;default:f.text(d)}},K=function(b){b.preventDefault();var c=this.href,d=a(this),e=d.parent().parents("li:first");y(d.closest(".x-menu")),Meetup.RemoteApi.post({url:c,type:"POST",data:{},success:function(){var b=e.next(),c=b.hasClass("replies")&&"none"!==b.css("display"),d=e.outerWidth(),f=e.outerHeight()+(c?b.outerHeight():0)-1;e.css({position:"relative"});var g=a('<div class="overlay-alert"></div>').css({width:d,height:f}).hide(),h=a('<div class="overlay-alert-msg" style="width: '+d+"px; height: "+f+'px;"><p><strong>'+Meetup.Copy.markedAsSpam+'</strong><span class="small">'+Meetup.Copy.spamMistake+"</span></p></div>");h.hide(),g=g.add(h),e.append(g);var i=e.find(".undo");i.click(function(a){a.preventDefault();var b=e.data("fadeouttimeout");b&&""!==b&&clearTimeout(b),g.remove()}),N(g,e)},error:function(){alert(Meetup.Copy.errorGeneric)}})},L=function(b){b.preventDefault();var c=this.href,d=a(this),e=d.parent().parents("li:first");y(d.closest(".x-menu")),Meetup.RemoteApi.post({url:c,type:"POST",data:{},success:function(){var b=e.next(),c=b.hasClass("replies")&&"none"!==b.css("display"),d=e.outerWidth(),f=e.outerHeight()+(c?b.outerHeight():0)-1;e.css({position:"relative"});var g=a('<div class="overlay-alert"></div>').css({width:d,height:f}).hide(),h=a('<div class="overlay-alert-msg" style="width: '+d+"px; height: "+f+'px;"><p><strong>'+(Meetup.Copy.flagInappropriate||"This comment has been flagged as inappropriate")+'</strong><span class="small">'+Meetup.Copy.spamMistake+"</span></p></div>");h.hide(),g=g.add(h),e.append(g);var i=e.find(".undo");i.click(function(a){a.preventDefault();var b=e.data("fadeouttimeout");b&&""!==b&&clearTimeout(b),g.remove()}),N(g,e)},error:function(){alert(Meetup.Copy.errorGeneric)}})},M=function(b){b.preventDefault();var c=a(this),d=v(c),e=c.data("ismuted"),f=d.attr("id"),g=d.data("commenttype"),h={arg_eventCommentId:f.split("-").pop(),arg_member:Member.id,arg_itemTypeToken:g,arg_tableId:w(f)};if(0===e)h.method="unsubscribeFromCommentThread";else{if(1!==e)return alert("There was a problem. Please try again later."),!1;h.method="subscribeToCommentThread"}Meetup.RemoteApi.post({type:"POST",url:Meetup.URL.api,data:h,error:function(){return alert(Meetup.Copy.errorGeneric),!1},success:function(){var b=a("#"+f),d=b.next(),g=d.hasClass("replies")&&"none"!==d.css("display");0===e?(c.text(Meetup.Copy.unmute),c.data("ismuted",1)):(c.text(Meetup.Copy.mute),c.data("ismuted",0),g?d.find(".mute-success").remove():b.find(".mute-success").remove())}})},N=function(a,b){a.fadeIn();var c=function(){a.fadeOut(function(){clearTimeout(d),a.remove()})},d=setTimeout(c,5e3);a.hover(function(){d&&clearTimeout(d)},function(){d=setTimeout(c,3e3),b.data("fadeouttimeout",d)})},O=function(b){b.preventDefault();var c=a(this),d=c.attr("href"),e=c.closest(".alert-success");Meetup.RemoteApi.post({type:"POST",url:d,data:{},error:function(){alert(Meetup.Copy.errorGeneric)},success:function(){var a=e.next();e.slideUp(),a.addClass("first")}})};return{init:p,renderComment:F}}(jQuery),!function(a){var b,c={className:"autosizejs",id:"autosizejs",append:"\n",callback:!1,resizeDelay:10,placeholder:!0},d='<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>',e=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent","whiteSpace"],f=a(d).data("autosize",!0)[0];f.style.lineHeight="99px","99px"===a(f).css("lineHeight")&&e.push("lineHeight"),f.style.lineHeight="",a.fn.autosize=function(d){return this.length?(d=a.extend({},c,d||{}),f.parentNode!==document.body&&a(document.body).append(f),this.each(function(){function c(){var b,c=window.getComputedStyle?window.getComputedStyle(m,null):null;c?(b=parseFloat(c.width),("border-box"===c.boxSizing||"border-box"===c.webkitBoxSizing||"border-box"===c.mozBoxSizing)&&a.each(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],function(a,d){b-=parseFloat(c[d])})):b=n.width(),f.style.width=Math.max(b,0)+"px"}function g(){var g={};if(b=m,f.className=d.className,f.id=d.id,j=parseFloat(n.css("maxHeight")),a.each(e,function(a,b){g[b]=n.css(b)}),a(f).css(g).attr("wrap",n.attr("wrap")),c(),window.chrome){var h=m.style.width;m.style.width="0px",m.offsetWidth,m.style.width=h}}function h(){var a,e;b!==m?g():c(),f.value=!m.value&&d.placeholder?n.attr("placeholder")||"":m.value,f.value+=d.append||"",f.style.overflowY=m.style.overflowY,e=parseFloat(m.style.height)||0,f.scrollTop=0,f.scrollTop=9e4,a=f.scrollTop,j&&a>j?(m.style.overflowY="scroll",a=j):(m.style.overflowY="hidden",k>a&&(a=k)),a+=o,Math.abs(e-a)>.01&&(m.style.height=a+"px",f.className=f.className,p&&d.callback.call(m,m),n.trigger("autosize.resized"))}function i(){clearTimeout(l),l=setTimeout(function(){var a=n.width();a!==r&&(r=a,h())},parseInt(d.resizeDelay,10))}var j,k,l,m=this,n=a(m),o=0,p=a.isFunction(d.callback),q={height:m.style.height,overflow:m.style.overflow,overflowY:m.style.overflowY,wordWrap:m.style.wordWrap,resize:m.style.resize},r=n.width(),s=n.css("resize");n.data("autosize")||(n.data("autosize",!0),("border-box"===n.css("box-sizing")||"border-box"===n.css("-moz-box-sizing")||"border-box"===n.css("-webkit-box-sizing"))&&(o=n.outerHeight()-n.height()),k=Math.max(parseFloat(n.css("minHeight"))-o||0,n.height()),n.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word"}),"vertical"===s?n.css("resize","none"):"both"===s&&n.css("resize","horizontal"),"onpropertychange"in m?"oninput"in m?n.on("input.autosize keyup.autosize",h):n.on("propertychange.autosize",function(){"value"===event.propertyName&&h()}):n.on("input.autosize",h),d.resizeDelay!==!1&&a(window).on("resize.autosize",i),n.on("autosize.resize",h),n.on("autosize.resizeIncludeStyle",function(){b=null,h()}),n.on("autosize.destroy",function(){b=null,clearTimeout(l),a(window).off("resize",i),n.off("autosize").off(".autosize").css(q).removeData("autosize")}),h())})):this}}(jQuery||$),$(function(){var a=$(".event-attendees"),b=function(){$("#save-bio-button").removeClass("disabled"),$("#active-member-bio, #edit-bio-link-section, #bio-edit-form").toggle()};a.on("click","#cancel-bio-button",function(){var a=$("#active-member-bio").data("full-bio");$("#bio-edit-area").val(a),b()}),a.on("click","#save-bio-button",function(){if(!$(this).hasClass("disabled")){var a=$("#bio-edit-area").val(),c=function(a){$("#bio-edit-area").addClass("error"),$("#bio-edit-error").text(a),$("#bio-edit-error:hidden").slideDown("fast"),$("#save-bio-button").removeClass("disabled")},d=function(){$("#bio-edit-error").hide()};$("#save-bio-button").addClass("disabled"),Meetup.RemoteApi.post({data:{method:"updateBio",arg_member:Member.id,arg_chapter:Chapter.id,arg_bio:a,arg_linkifyWidth:20},success:function(a){switch(a.status){case 0:d(),$("#active-member-bio").html(a.linkified).data("full-bio",a.bio),$("#bio-edit-area").val(a.bio),$("#bio-edit-label").text(""===a.bio?Meetup.Copy.addAnIntro:Meetup.Copy.editYourIntro),b();break;case 3:c(Meetup.Copy.introTooLong);break;case 9:c(Meetup.Copy.introRequired);break;default:c(Meetup.Copy.introError)}},error:function(){c("Something went wrong! Try again.")}})}}),a.on("click","#edit-bio-link",function(a){a.preventDefault(),Member.isAuthFiltered||(b(),$("#bio-edit-area").focus().keyup())}),a.on("click",".rsvp-bio-more",function(a){a.preventDefault();var b=$(this).parents(".rsvp-list-content");b.html(linkify(escapeHTML(b.data("full-bio"))))}),a.on("input paste","#bio-edit-area",function(){$(this).val().length>250?$("#save-bio-button").addClass("disabled"):$("#save-bio-button").removeClass("disabled")})}),Meetup.SelectionManager={textNodesUnder:function(a,b,c){var d=[];if(a)for(a=a.firstChild;a;a=a.nextSibling)if(3===a.nodeType&&(c?a.data:!0)){if(b)return a;d.push(a)}else d=d.concat(this.textNodesUnder(a));return b?!1:d},nextNode:function(a){if(a.hasChildNodes())return a.firstChild;for(;a&&!a.nextSibling;)a=a.parentNode;return a?a.nextSibling:null},getRangeSelectedNodes:function(a){var b=a.startContainer,c=a.endContainer;if(b==c)return[b];for(var d=[];b&&b!=c;)d.push(b=this.nextNode(b));for(b=a.startContainer;b&&b!=a.commonAncestorContainer;)d.unshift(b),b=b.parentNode;return d},getSelectedNodes:function(){var a,b,c=[];return window.getSelection?(sel=window.getSelection(),sel.isCollapsed?[sel.anchorNode]:this.getRangeSelectedNodes(sel.getRangeAt(0))):document.selection&&document.selection.createRange?(a=document.selection.createRange(),document.createRange?(b=document.createRange(),b.setEnd(a.startContainer),b.setStart(a.endContainer),this.getRangeSelectedNodes(a)):(a.collapse(!0),[a.parentElement()])):c},getSelectionContainerNode:function(a,b){var c,d,e;return document.selection&&document.selection.createRange?(c=document.selection.createRange(),a&&c.collapse(b),c.parentElement()):window.getSelection&&(d=window.getSelection(),d.getRangeAt&&d.rangeCount>0&&(c=d.getRangeAt(0)),c)?(e=a?c[b?"startContainer":"endContainer"]:c.commonAncestorContainer,3===e.nodeType?e.parentNode:e):void 0},insertHTML:function(a,b){var c,b=b||null;if(window.getSelection){if(b=window.getSelection(),b.getRangeAt&&b.rangeCount){c=b.getRangeAt(0),c.deleteContents();var d=document.createElement("div");d.innerHTML=a;for(var e,f,g=document.createDocumentFragment();e=d.firstChild;)f=g.appendChild(e);c.insertNode(g),f&&(c=c.cloneRange(),c.setStartAfter(f),c.collapse(!0),b.removeAllRanges(),b.addRange(c))}}else document.selection&&"Control"!=document.selection.type&&document.selection.createRange().pasteHTML(a)},saveSelection:function(){if(window.getSelection){if(sel=window.getSelection(),sel.getRangeAt&&sel.rangeCount)return sel.getRangeAt(0)}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return null},restoreSelection:function(a){a&&(window.getSelection?(sel=window.getSelection(),sel.removeAllRanges(),sel.addRange(a)):document.selection&&a.select&&a.select())}};var rwindow,rdocument;if("undefined"==typeof RELANG)var RELANG={};var RLANG={html:"HTML",video:"Insert Video",image:"Insert Image",table:"Table",link:"Link",link_insert:"Insert link",unlink:"Unlink",formatting:"Formatting",paragraph:"Paragraph",quote:"Quote",code:"Code",header1:"Header 1",header2:"Header 2",header3:"Header 3",header4:"Header 4",bold:"Bold",italic:"Italic",fontcolor:"Font Color",backcolor:"Back Color",unorderedlist:"Unordered List",orderedlist:"Ordered List",outdent:"Outdent",indent:"Indent",cancel:"Cancel",insert:"Insert",save:"Save",_delete:"Delete",insert_table:"Insert Table",insert_row_above:"Add Row Above",insert_row_below:"Add Row Below",insert_column_left:"Add Column Left",insert_column_right:"Add Column Right",delete_column:"Delete Column",delete_row:"Delete Row",delete_table:"Delete Table",rows:"Rows",columns:"Columns",add_head:"Add Head",delete_head:"Delete Head",title:"Title",image_position:"Position",none:"None",left:"Left",right:"Right",image_web_link:"Image Web Link",text:"Text",mailto:"Email",web:"URL",video_html_code:"Video Embed Code",file:"Insert File",upload:"Upload",download:"Download",choose:"Choose",or_choose:"Or choose",drop_file_here:"Drop file here",align_left:"Align text to the left",align_center:"Center text",align_right:"Align text to the right",align_justify:"Justify text",horizontalrule:"Insert Horizontal Rule",deleted:"Deleted",anchor:"Anchor",link_new_tab:"Open link in new tab",underline:"Underline",alignment:"Alignment"};if(function(a){jQuery.fn.redactor=function(c){return this.each(function(){var d=a(this),e=d.data("redactor");e||d.data("redactor",e=new b(this,c))})};var b=function(b,c){this.$el=a(b),"undefined"!=typeof c&&"undefined"!=typeof c.lang&&"en"!==c.lang&&"undefined"!=typeof RELANG[c.lang]&&(RLANG=RELANG[c.lang]),this.opts=a.extend({iframe:!1,css:!1,lang:"en",direction:"ltr",callback:!1,keyupCallback:!1,keydownCallback:!1,execCommandCallback:!1,plugins:!1,cleanup:!0,focus:!1,tabindex:!1,autoresize:!0,minHeight:!1,fixed:!1,fixedTop:0,fixedBox:!1,source:!0,shortcuts:!0,mobile:!0,air:!1,wym:!1,convertLinks:!0,convertDivs:!0,protocol:"http://",autosave:!1,autosaveCallback:!1,interval:60,imageGetJson:!1,imageUpload:!1,imageUploadCallback:!1,imageUploadErrorCallback:!1,fileUpload:!1,fileUploadCallback:!1,fileUploadErrorCallback:!1,uploadCrossDomain:!1,uploadFields:!1,observeImages:!0,overlay:!0,allowedTags:["form","input","button","select","option","datalist","output","textarea","fieldset","legend","section","header","hgroup","aside","footer","article","details","nav","progress","time","canvas","code","span","div","label","a","br","p","b","i","del","strike","u","img","video","source","track","audio","iframe","object","embed","param","blockquote","mark","cite","small","ul","ol","li","hr","dl","dt","dd","sup","sub","big","pre","code","figure","figcaption","strong","em","table","tr","td","th","tbody","thead","tfoot","h1","h2","h3","h4","h5","h6"],toolbarExternal:!1,buttonsCustom:{},buttonsAdd:[],buttons:["html","|","formatting","|","bold","italic","deleted","|","unorderedlist","orderedlist","outdent","indent","|","image","video","file","table","link","|","fontcolor","backcolor","|","alignment","|","horizontalrule"],airButtons:["formatting","|","bold","italic","deleted","|","unorderedlist","orderedlist","outdent","indent","|","fontcolor","backcolor"],formattingTags:["p","blockquote","pre","h1","h2","h3","h4"],activeButtons:["deleted","italic","bold","underline","unorderedlist","orderedlist"],activeButtonsStates:{b:"bold",strong:"bold",i:"italic",em:"italic",del:"deleted",strike:"deleted",ul:"unorderedlist",ol:"orderedlist",u:"underline"},colors:["#ffffff","#000000","#eeece1","#1f497d","#4f81bd","#c0504d","#9bbb59","#8064a2","#4bacc6","#f79646","#ffff00","#f2f2f2","#7f7f7f","#ddd9c3","#c6d9f0","#dbe5f1","#f2dcdb","#ebf1dd","#e5e0ec","#dbeef3","#fdeada","#fff2ca","#d8d8d8","#595959","#c4bd97","#8db3e2","#b8cce4","#e5b9b7","#d7e3bc","#ccc1d9","#b7dde8","#fbd5b5","#ffe694","#bfbfbf","#3f3f3f","#938953","#548dd4","#95b3d7","#d99694","#c3d69b","#b2a2c7","#b7dde8","#fac08f","#f2c314","#a5a5a5","#262626","#494429","#17365d","#366092","#953734","#76923c","#5f497a","#92cddc","#e36c09","#c09100","#7f7f7f","#0c0c0c","#1d1b10","#0f243e","#244061","#632423","#4f6128","#3f3151","#31859b","#974806","#7f6000"],emptyHtml:"<p></p>",buffer:!1,visual:!0,modal_file:String()+'<div id="redactor_modal_content"><form id="redactorUploadFileForm" method="post" action="" enctype="multipart/form-data"><label>Name (optional)</label><input type="text" id="redactor_filename" class="redactor_input" /><div style="margin-top: 7px;"><input type="file" id="redactor_file" name="file" /></div></form><br></div>',modal_image_edit:String()+'<div id="redactor_modal_content"><label>'+RLANG.title+'</label><input id="redactor_file_alt" class="redactor_input" /><label>'+RLANG.link+'</label><input id="redactor_file_link" class="redactor_input" /><label>'+RLANG.image_position+'</label><select id="redactor_form_image_align"><option value="none">'+RLANG.none+'</option><option value="left">'+RLANG.left+'</option><option value="right">'+RLANG.right+'</option></select></div><div id="redactor_modal_footer"><a href="javascript:void(null);" id="redactor_image_delete_btn" class="redactor_modal_btn">'+RLANG._delete+'</a>&nbsp;&nbsp;&nbsp;<a href="javascript:void(null);" class="redactor_modal_btn redactor_btn_modal_close">'+RLANG.cancel+'</a><input type="button" name="save" class="redactor_modal_btn" id="redactorSaveBtn" value="'+RLANG.save+'" /></div>',modal_image:String()+'<div id="redactor_modal_content"><div id="redactor_tabs"><a href="javascript:void(null);" class="redactor_tabs_act">'+RLANG.upload+'</a><a href="javascript:void(null);">'+RLANG.choose+'</a><a href="javascript:void(null);">'+RLANG.link+'</a></div><form id="redactorInsertImageForm" method="post" action="" enctype="multipart/form-data"><div id="redactor_tab1" class="redactor_tab"><input type="file" id="redactor_file" name="file" /></div><div id="redactor_tab2" class="redactor_tab" style="display: none;"><div id="redactor_image_box"></div></div></form><div id="redactor_tab3" class="redactor_tab" style="display: none;"><label>'+RLANG.image_web_link+'</label><input type="text" name="redactor_file_link" id="redactor_file_link" class="redactor_input"  /></div></div><div id="redactor_modal_footer"><a href="javascript:void(null);" class="redactor_modal_btn redactor_btn_modal_close">'+RLANG.cancel+'</a><input type="button" name="upload" class="redactor_modal_btn" id="redactor_upload_btn" value="'+RLANG.insert+'" /></div>',modal_link:String()+'<div id="redactor_modal_content"><form id="redactorInsertLinkForm" method="post" action=""><div id="redactor_tabs"><a href="javascript:void(null);" class="redactor_tabs_act">URL</a><a href="javascript:void(null);">Email</a><a href="javascript:void(null);">'+RLANG.anchor+'</a></div><input type="hidden" id="redactor_tab_selected" value="1" /><div class="redactor_tab" id="redactor_tab1"><label>URL</label><input type="text" id="redactor_link_url" class="redactor_input"  /><label>'+RLANG.text+'</label><input type="text" class="redactor_input redactor_link_text" id="redactor_link_url_text" /><label><input type="checkbox" id="redactor_link_blank"> '+RLANG.link_new_tab+'</label></div><div class="redactor_tab" id="redactor_tab2" style="display: none;"><label>Email</label><input type="text" id="redactor_link_mailto" class="redactor_input" /><label>'+RLANG.text+'</label><input type="text" class="redactor_input redactor_link_text" id="redactor_link_mailto_text" /></div><div class="redactor_tab" id="redactor_tab3" style="display: none;"><label>'+RLANG.anchor+'</label><input type="text" class="redactor_input" id="redactor_link_anchor"  /><label>'+RLANG.text+'</label><input type="text" class="redactor_input redactor_link_text" id="redactor_link_anchor_text" /></div></form></div><div id="redactor_modal_footer"><a href="javascript:void(null);" class="redactor_modal_btn redactor_btn_modal_close">'+RLANG.cancel+'</a><input type="button" class="redactor_modal_btn" id="redactor_insert_link_btn" value="'+RLANG.insert+'" /></div>',modal_table:String()+'<div id="redactor_modal_content"><label>'+RLANG.rows+'</label><input type="text" size="5" value="2" id="redactor_table_rows" /><label>'+RLANG.columns+'</label><input type="text" size="5" value="3" id="redactor_table_columns" /></div><div id="redactor_modal_footer"><a href="javascript:void(null);" class="redactor_modal_btn redactor_btn_modal_close">'+RLANG.cancel+'</a><input type="button" name="upload" class="redactor_modal_btn" id="redactor_insert_table_btn" value="'+RLANG.insert+'" /></div>',modal_video:String()+'<div id="redactor_modal_content"><form id="redactorInsertVideoForm"><label>'+RLANG.video_html_code+'</label><textarea id="redactor_insert_video_area" style="width: 99%; height: 160px;"></textarea></form></div><div id="redactor_modal_footer"><a href="javascript:void(null);" class="redactor_modal_btn redactor_btn_modal_close">'+RLANG.cancel+'</a><input type="button" class="redactor_modal_btn" id="redactor_insert_video_btn" value="'+RLANG.insert+'" /></div>',toolbar:{html:{title:RLANG.html,func:"toggle"},formatting:{title:RLANG.formatting,func:"show",dropdown:{p:{title:RLANG.paragraph,exec:"formatblock"},blockquote:{title:RLANG.quote,exec:"formatblock",className:"redactor_format_blockquote"},pre:{title:RLANG.code,exec:"formatblock",className:"redactor_format_pre"},h1:{title:RLANG.header1,exec:"formatblock",className:"redactor_format_h1"},h2:{title:RLANG.header2,exec:"formatblock",className:"redactor_format_h2"},h3:{title:RLANG.header3,exec:"formatblock",className:"redactor_format_h3"},h4:{title:RLANG.header4,exec:"formatblock",className:"redactor_format_h4"}}},bold:{title:RLANG.bold,exec:"bold"},italic:{title:RLANG.italic,exec:"italic"},deleted:{title:RLANG.deleted,exec:"strikethrough"},underline:{title:RLANG.underline,exec:"underline"},unorderedlist:{title:"&bull; "+RLANG.unorderedlist,exec:"insertunorderedlist"},orderedlist:{title:"1. "+RLANG.orderedlist,exec:"insertorderedlist"},outdent:{title:"< "+RLANG.outdent,exec:"outdent"},indent:{title:"> "+RLANG.indent,exec:"indent"},image:{title:RLANG.image,func:"showImage"},video:{title:RLANG.video,func:"showVideo"},file:{title:RLANG.file,func:"showFile"},table:{title:RLANG.table,func:"show",dropdown:{insert_table:{title:RLANG.insert_table,func:"showTable"},separator_drop1:{name:"separator"},insert_row_above:{title:RLANG.insert_row_above,func:"insertRowAbove"},insert_row_below:{title:RLANG.insert_row_below,func:"insertRowBelow"},insert_column_left:{title:RLANG.insert_column_left,func:"insertColumnLeft"},insert_column_right:{title:RLANG.insert_column_right,func:"insertColumnRight"},separator_drop2:{name:"separator"},add_head:{title:RLANG.add_head,func:"addHead"},delete_head:{title:RLANG.delete_head,func:"deleteHead"},separator_drop3:{name:"separator"},delete_column:{title:RLANG.delete_column,func:"deleteColumn"},delete_row:{title:RLANG.delete_row,func:"deleteRow"},delete_table:{title:RLANG.delete_table,func:"deleteTable"}}},link:{title:RLANG.link,func:"show",dropdown:{link:{title:RLANG.link_insert,func:"showLink"},unlink:{title:RLANG.unlink,exec:"unlink"}}},fontcolor:{title:RLANG.fontcolor,func:"show"},backcolor:{title:RLANG.backcolor,func:"show"},alignment:{title:RLANG.alignment,func:"show",dropdown:{alignleft:{title:RLANG.align_left,exec:"JustifyLeft"},aligncenter:{title:RLANG.align_center,exec:"JustifyCenter"},alignright:{title:RLANG.align_right,exec:"JustifyRight"},justify:{title:RLANG.align_justify,exec:"JustifyFull"}}},alignleft:{exec:"JustifyLeft",title:RLANG.align_left},aligncenter:{exec:"JustifyCenter",title:RLANG.align_center},alignright:{exec:"JustifyRight",title:RLANG.align_right},justify:{exec:"JustifyFull",title:RLANG.align_justify},horizontalrule:{exec:"inserthorizontalrule",title:RLANG.horizontalrule}}},c,this.$el.data()),this.dropdowns=[],this.init()};b.prototype={init:function(){function b(){if(this.enableAir(),this.buildToolbar(),"object"==typeof this.opts.plugins&&a.each(this.opts.plugins,a.proxy(function(b,c){"undefined"!=typeof RedactorPlugins[c]&&(a.extend(this,RedactorPlugins[c]),"undefined"!=typeof RedactorPlugins[c].init&&this.init())},this)),this.opts.activeButtons!==!1&&this.opts.toolbar!==!1){var b=a.proxy(function(){this.observeFormatting()},this);this.$editor.click(b).keyup(b)}var c=!1;if(this.browser("webkit")&&-1===navigator.userAgent.indexOf("Chrome")){var d=this.browser("version").split(".");d[0]<536&&(c=!0)}if(this.isMobile(!0)===!1&&c===!1&&this.browser("opera")===!1&&this.$editor.bind("paste",a.proxy(function(){if(this.opts.cleanup===!1)return!0;this.pasteRunning=!0,this.setBuffer(),this.saveScroll=this.opts.autoresize===!0?this.document.body.scrollTop:this.$editor.scrollTop();var b=this.extractContent();setTimeout(a.proxy(function(){var a=this.extractContent();this.$editor.append(b),this.restoreSelection();var c=this.getFragmentHtml(a);this.pasteCleanUp(c),this.pasteRunning=!1},this),1)},this)),this.keyup(),this.keydown(),this.opts.autosave!==!1&&this.autoSave(),setTimeout(a.proxy(function(){this.observeImages(),this.observeTables()},this),1),this.browser("mozilla")){this.$editor.click(a.proxy(function(){this.saveSelection()},this));try{this.document.execCommand("enableObjectResizing",!1,!1),this.document.execCommand("enableInlineTableEditing",!1,!1)}catch(e){}}this.opts.focus&&setTimeout(a.proxy(function(){this.$editor.focus()},this),1),this.opts.fixed&&(this.observeScroll(),a(document).scroll(a.proxy(this.observeScroll,this))),"function"==typeof this.opts.callback&&this.opts.callback(this),this.opts.toolbar!==!1&&this.$toolbar.find("a").attr("tabindex","-1")}if(this.height=this.$el.css("height"),this.width=this.$el.css("width"),rdocument=this.document=document,rwindow=this.window=window,this.opts.mobile===!1&&this.isMobile())return this.build(!0),!1;if(this.opts.iframe&&(this.opts.autoresize=!1),this.opts.air)a.extend(this.opts.toolbar,this.opts.buttonsCustom),this.opts.buttons=this.opts.airButtons;else if(this.opts.toolbar!==!1){if(this.opts.source===!1){var c=this.opts.buttons.indexOf("html"),d=this.opts.buttons[c+1];this.opts.buttons.splice(c,1),"undefined"!=typeof d&&"|"===d&&this.opts.buttons.splice(c,1)}a.extend(this.opts.toolbar,this.opts.buttonsCustom),a.each(this.opts.buttonsAdd,a.proxy(function(a,b){this.opts.buttons.push(b)},this))}this.opts.toolbar!==!1&&a.each(this.opts.toolbar.formatting.dropdown,a.proxy(function(b){"-1"==a.inArray(b,this.opts.formattingTags)&&delete this.opts.toolbar.formatting.dropdown[b]},this)),this.build(!1,b)},shortcuts:function(a,b){a.preventDefault(),this.execCommand(b,!1)},keyup:function(){this.$editor.keyup(a.proxy(function(a){var b=a.keyCode||a.which;return this.browser("mozilla")&&!this.pasteRunning&&this.saveSelection(),"function"==typeof this.opts.keyupCallback&&this.opts.keyupCallback(this,a),8===b||46===b?(this.observeImages(),this.formatEmpty(a)):(13!==b||a.shiftKey||a.ctrlKey||a.metaKey||(this.browser("webkit")&&this.formatNewLine(a),this.opts.convertLinks&&this.$editor.linkify()),void this.syncCode())},this))},keydown:function(){this.$editor.keydown(a.proxy(function(b){var c=b.keyCode||b.which,d=this.getParentNode(),e=this.getCurrentNode(),f=!1,g=b.ctrlKey||b.metaKey;if(!d&&!e||"PRE"!==a(d).get(0).tagName&&"PRE"!==a(e).get(0).tagName||(f=!0),"function"==typeof this.opts.keydownCallback&&this.opts.keydownCallback(this,b),g&&this.opts.shortcuts&&(90===c?this.opts.buffer!==!1?(b.preventDefault(),this.getBuffer()):b.shiftKey?this.shortcuts(b,"redo"):this.shortcuts(b,"undo"):77===c?this.shortcuts(b,"removeFormat"):66===c?this.shortcuts(b,"bold"):73===c?this.shortcuts(b,"italic"):74===c?this.shortcuts(b,"insertunorderedlist"):75===c?this.shortcuts(b,"insertorderedlist"):76===c?this.shortcuts(b,"superscript"):72===c&&this.shortcuts(b,"subscript")),g||90===c||(this.opts.buffer=!1),f===!0&&13===c){b.preventDefault();var h=a(e).parent().text();return this.insertNodeAtCaret(this.document.createTextNode("\r\n")),-1==h.search(/\s$/)&&this.insertNodeAtCaret(this.document.createTextNode("\r\n")),this.syncCode(),!1}if(this.opts.shortcuts&&!b.shiftKey&&9===c){if(f!==!1)return b.preventDefault(),this.insertNodeAtCaret(this.document.createTextNode("	")),this.syncCode(),!1;this.shortcuts(b,"indent")}else this.opts.shortcuts&&b.shiftKey&&9===c&&this.shortcuts(b,"outdent");return this.browser("webkit")&&-1===navigator.userAgent.indexOf("Chrome")?this.safariShiftKeyEnter(b,c):void 0},this))},build:function(b,c){function d(){this.$editor=this.$content.contents().find("body").attr("contenteditable",!0).attr("dir",this.opts.direction),rdocument=this.document=this.$editor[0].ownerDocument,rwindow=this.window=this.document.defaultView||window,this.opts.css!==!1&&this.$content.contents().find("head").append('<link rel="stylesheet" href="'+this.opts.css+'" />'),this.$editor.html(g),c&&(c.call(this),c=null)}if(b!==!0){if(this.$box=a('<div class="redactor_box"></div>'),this.opts.air&&(this.air=a('<div class="redactor_air" style="display: none;"></div>')),this.$content=null,this.textareamode=!0,"TEXTAREA"===this.$el.get(0).tagName){if(this.opts.iframe){var e=this;this.$content=a('<iframe style="width: 100%;" frameborder="0"></iframe>').load(function(){d.call(e)})}else this.$content=this.$editor=a("<div></div>");var f=this.$el.get(0).className.split(/\s+/);a.each(f,a.proxy(function(a,b){this.$content.addClass("redactor_"+b)},this))}else this.textareamode=!1,this.$content=this.$editor=this.$el,this.$el=a('<textarea name="'+this.$editor.attr("id")+'"></textarea>').css("height",this.height);this.$editor&&this.$editor.addClass("redactor_editor").attr("contenteditable",!0).attr("dir",this.opts.direction),this.opts.tabindex!==!1&&this.$content.attr("tabindex",this.opts.tabindex),this.opts.minHeight!==!1&&this.$content.css("min-height",this.opts.minHeight+"px"),this.opts.wym===!0&&this.$content.addClass("redactor_editor_wym"),this.opts.autoresize===!1&&this.$content.css("height",this.height),this.$el.hide();var g="";this.textareamode?(g=this.$el.val(),g=this.savePreCode(g),this.$box.insertAfter(this.$el).append(this.$content).append(this.$el)):(g=this.$editor.html(),g=this.savePreCode(g),this.$box.insertAfter(this.$content).append(this.$el).append(this.$editor)),g=this.paragraphy(g),this.$editor&&this.$editor.html(g),this.textareamode===!1&&this.syncCode()}else if("TEXTAREA"!==this.$el.get(0).tagName){var g=this.$el.val(),h=a('<textarea name="'+this.$editor.attr("id")+'"></textarea>').css("height",this.height).val(g);this.$el.hide(),this.$el.after(h)}c&&this.$editor&&c.call(this)},enableAir:function(){return this.opts.air===!1?!1:(this.air.hide(),this.$editor.bind("textselect",a.proxy(function(a){this.showAir(a)},this)),void this.$editor.bind("textunselect",a.proxy(function(){this.air.hide()},this)))},showAir:function(b){a(".redactor_air").hide();var c=this.air.innerWidth(),d=b.clientX;a(this.document).width()<d+c&&(d-=c);var e=b.clientY+a(document).scrollTop()+14;this.opts.iframe===!0&&(e+=this.$box.position().top,d+=this.$box.position().left),this.air.css({left:d+"px",top:e+"px"}).show()},syncCode:function(){this.$el.val(this.$editor.html())},setCode:function(a){a=this.stripTags(a),this.$editor.html(a).focus(),this.syncCode()},getCode:function(){var a="";return a=this.opts.visual?this.$editor.html():this.$el.val(),this.stripTags(a)},insertHtml:function(a){this.$editor.focus(),this.pasteHtmlAtCaret(a),this.observeImages(),this.syncCode()
},pasteHtmlAtCaret:function(a){var b,c;if(this.document.getSelection){if(b=this.window.getSelection(),b.getRangeAt&&b.rangeCount){c=b.getRangeAt(0),c.deleteContents();var d=this.document.createElement("div");d.innerHTML=a;for(var e,f,g=this.document.createDocumentFragment();e=d.firstChild;)f=g.appendChild(e);c.insertNode(g),f&&(c=c.cloneRange(),c.setStartAfter(f),c.collapse(!0),b.removeAllRanges(),b.addRange(c))}}else this.document.selection&&"Control"!=this.document.selection.type&&this.document.selection.createRange().pasteHTML(a)},destroy:function(){var b=this.getCode();this.textareamode?(this.$box.after(this.$el),this.$box.remove(),this.$el.height(this.height).val(b).show()):(this.$box.after(this.$editor),this.$box.remove(),this.$editor.removeClass("redactor_editor").removeClass("redactor_editor_wym").attr("contenteditable",!1).html(b).show()),this.opts.toolbarExternal&&a(this.opts.toolbarExternal).empty(),a(".redactor_air").remove();for(var c=0;c<this.dropdowns.length;c++)this.dropdowns[c].remove(),delete this.dropdowns[c];this.opts.autosave!==!1&&clearInterval(this.autosaveInterval)},observeFormatting:function(){var b=this.getCurrentNode();this.inactiveAllButtons(),a.each(this.opts.activeButtonsStates,a.proxy(function(c,d){0!=a(b).closest(c,this.$editor.get()[0]).length&&this.setBtnActive(d)},this));var c=a(b).closest(["p","div","h1","h2","h3","h4","h5","h6","blockquote","td"]);if("undefined"!=typeof c[0]&&"undefined"!=typeof c[0].elem&&0!=a(c[0].elem).size()){var d=a(c[0].elem).css("text-align");switch(d){case"right":this.setBtnActive("alignright");break;case"center":this.setBtnActive("aligncenter");break;case"justify":this.setBtnActive("justify");break;default:this.setBtnActive("alignleft")}}},observeImages:function(){return this.opts.observeImages===!1?!1:void this.$editor.find("img").each(a.proxy(function(b,c){this.browser("msie")&&a(c).attr("unselectable","on"),this.resizeImage(c)},this))},observeTables:function(){this.$editor.find("table").click(a.proxy(this.tableObserver,this))},observeScroll:function(){var b=a(this.document).scrollTop(),c=this.$box.offset().top,d=0;if(b>c){var e="100%";this.opts.fixedBox&&(d=this.$box.offset().left,e=this.$box.innerWidth()),this.fixed=!0,this.$toolbar.css({position:"fixed",width:e,zIndex:1005,top:this.opts.fixedTop+"px",left:d})}else this.fixed=!1,this.$toolbar.css({position:"relative",width:"auto",zIndex:1,top:0,left:d})},setBuffer:function(){this.saveSelection(),this.opts.buffer=this.$editor.html()},getBuffer:function(){return this.opts.buffer===!1?!1:(this.$editor.html(this.opts.buffer),this.browser("msie")||this.restoreSelection(),void(this.opts.buffer=!1))},execCommand:function(b,c){if(0==this.opts.visual)return this.$el.focus(),!1;try{var d;if("inserthtml"===b)this.browser("msie")&&parseInt(this.browser("version"),10)<11?(this.$editor.focus(),this.document.selection.createRange().pasteHTML(c)):this.pasteHtmlAtCaret(c),this.observeImages();else if("unlink"===b)d=this.getParentNode(),"A"===a(d).get(0).tagName?a(d).replaceWith(a(d).text()):this.execRun(b,c);else if("JustifyLeft"===b||"JustifyCenter"===b||"JustifyRight"===b||"JustifyFull"===b){d=this.getCurrentNode();var e=a(d).get(0).tagName;if(this.opts.iframe===!1&&0==a(d).parents(".redactor_editor").size())return!1;var f=["P","DIV","H1","H2","H3","H4","H5","H6","BLOCKQUOTE","TD"];if(-1!=a.inArray(e,f)){var g=!1;"JustifyCenter"===b?g="center":"JustifyRight"===b?g="right":"JustifyFull"===b&&(g="justify"),g===!1?a(d).css("text-align",""):a(d).css("text-align",g)}else this.execRun(b,c)}else if("formatblock"===b&&"blockquote"===c)if(d=this.getCurrentNode(),"BLOCKQUOTE"===a(d).get(0).tagName)if(this.browser("msie")){var h=a("<p>"+a(d).html()+"</p>");a(d).replaceWith(h)}else this.execRun(b,"p");else if("P"===a(d).get(0).tagName){var i=a(d).parent();if("BLOCKQUOTE"===a(i).get(0).tagName){var h=a("<p>"+a(d).html()+"</p>");a(i).replaceWith(h),this.setSelection(h[0],0,h[0],0)}else if(this.browser("msie")){var h=a("<blockquote>"+a(d).html()+"</blockquote>");a(d).replaceWith(h)}else this.execRun(b,c)}else this.execRun(b,c);else"formatblock"!==b||"pre"!==c&&"p"!==c?("inserthorizontalrule"===b&&this.browser("msie")&&this.$editor.focus(),"formatblock"===b&&this.browser("mozilla")&&this.$editor.focus(),this.execRun(b,c)):(d=this.getParentNode(),"PRE"===a(d).get(0).tagName?a(d).replaceWith("<p>"+this.encodeEntities(a(d).text())+"</p>"):this.execRun(b,c));"inserthorizontalrule"===b&&this.$editor.find("hr").removeAttr("id"),this.syncCode(),this.oldIE()&&this.$editor.focus(),"function"==typeof this.opts.execCommandCallback&&this.opts.execCommandCallback(this,b),this.opts.air&&this.air.hide()}catch(j){}},execRun:function(a,b){"formatblock"===a&&this.browser("msie")&&(b="<"+b+">"),this.document.execCommand(a,!1,b)},formatNewLine:function(){var b=this.getParentNode();if("DIV"===b.nodeName&&"redactor_editor"===b.className){var c=a(this.getCurrentNode());if("DIV"===c.get(0).tagName&&(""===c.html()||"<br>"===c.html())){var d=a("<p>").append(c.clone().get(0).childNodes);c.replaceWith(d),d.html("<br />"),this.setSelection(d[0],0,d[0],0)}}},safariShiftKeyEnter:function(b,c){return b.shiftKey&&13===c?(b.preventDefault(),this.insertNodeAtCaret(a("<span><br /></span>").get(0)),this.syncCode(),!1):!0},formatEmpty:function(b){var c=a.trim(this.$editor.html());c=c.replace(/<br\s?\/?>/i,"");var d=c.replace(/<p>\s?<\/p>/gi,"");if(""===c||""===d){b.preventDefault();var e=a(this.opts.emptyHtml).get(0);return this.$editor.html(e),this.setSelection(e,0,e,0),this.syncCode(),!1}this.syncCode()},paragraphy:function(b){if(b=a.trim(b),""===b||"<p></p>"===b)return this.opts.emptyHtml;this.opts.convertDivs&&(b=b.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"<p>$2</p>"));var c=function(a,b,c){return a.replace(new RegExp(b,"g"),c)},d=function(a,d){return c(b,a,d)},e="(table|thead|tfoot|caption|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|select|form|blockquote|address|math|style|script|object|input|param|p|h[1-6])";return b+="\n",d("<br />\\s*<br />","\n\n"),d("(<"+e+"[^>]*>)","\n$1"),d("(</"+e+">)","$1\n\n"),d("\r\n|\r","\n"),d("\n\n+","\n\n"),d("\n?((.|\n)+?)$","<p>$1</p>\n"),d("<p>\\s*?</p>",""),d("<p>(<div[^>]*>\\s*)","$1<p>"),d("<p>([^<]+)\\s*?(</(div|address|form)[^>]*>)","<p>$1</p>$2"),d("<p>\\s*(</?"+e+"[^>]*>)\\s*</p>","$1"),d("<p>(<li.+?)</p>","$1"),d("<p>\\s*(</?"+e+"[^>]*>)","$1"),d("(</?"+e+"[^>]*>)\\s*</p>","$1"),d("(</?"+e+"[^>]*>)\\s*<br />","$1"),d("<br />(\\s*</?(p|li|div|dl|dd|dt|th|pre|td|ul|ol)[^>]*>)","$1"),-1!=b.indexOf("<pre")&&d("(<pre(.|\n)*?>)((.|\n)*?)</pre>",function(a,b,d,e){return c(b,"\\\\(['\"\\\\])","$1")+c(c(c(e,"<p>","\n"),"</p>|<br />",""),"\\\\(['\"\\\\])","$1")+"</pre>"}),d("\n</p>$","</p>")},stripTags:function(b){var c=this.opts.allowedTags,d=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;return b.replace(d,function(b,d){return a.inArray(d.toLowerCase(),c)>"-1"?b:""})},savePreCode:function(b){var c=b.match(/<pre(.*?)>([\w\W]*?)<\/pre>/gi);return null!==c&&a.each(c,a.proxy(function(a,c){var d=c.match(/<pre(.*?)>([\w\W]*?)<\/pre>/i);d[2]=this.encodeEntities(d[2]),b=b.replace(c,"<pre"+d[1]+">"+d[2]+"</pre>")},this)),b},encodeEntities:function(a){return a=String(a).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"'),String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},cleanupPre:function(a){a=a.replace(/<br>/gi,"\n"),a=a.replace(/<\/p>/gi,"\n"),a=a.replace(/<\/div>/gi,"\n");var b=this.document.createElement("div");return b.innerHTML=a,b.textContent||b.innerText},pasteCleanUp:function(b){var c=this.getParentNode();return"PRE"===a(c).get(0).tagName?(b=this.cleanupPre(b),this.pasteCleanUpInsert(b),!0):(b=b.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,""),b=b.replace(/(&nbsp;){2,}/gi,"&nbsp;"),b=b.replace(/<b\sid="internal-source-marker(.*?)">([\w\W]*?)<\/b>/gi,"$2"),b=this.stripTags(b),b=b.replace(/<td><\/td>/gi,"[td]"),b=b.replace(/<td>&nbsp;<\/td>/gi,"[td]"),b=b.replace(/<td><br><\/td>/gi,"[td]"),b=b.replace(/<a(.*?)href="(.*?)"(.*?)>([\w\W]*?)<\/a>/gi,'[a href="$2"]$4[/a]'),b=b.replace(/<iframe(.*?)>([\w\W]*?)<\/iframe>/gi,"[iframe$1]$2[/iframe]"),b=b.replace(/<video(.*?)>([\w\W]*?)<\/video>/gi,"[video$1]$2[/video]"),b=b.replace(/<audio(.*?)>([\w\W]*?)<\/audio>/gi,"[audio$1]$2[/audio]"),b=b.replace(/<embed(.*?)>([\w\W]*?)<\/embed>/gi,"[embed$1]$2[/embed]"),b=b.replace(/<object(.*?)>([\w\W]*?)<\/object>/gi,"[object$1]$2[/object]"),b=b.replace(/<param(.*?)>/gi,"[param$1]"),b=b.replace(/<img(.*?)style="(.*?)"(.*?)>/gi,"[img$1$3]"),b=b.replace(/<(\w+)([\w\W]*?)>/gi,"<$1>"),b=b.replace(/<[^\/>][^>]*>(\s*|\t*|\n*|&nbsp;|<br>)<\/[^>]+>/gi,""),b=b.replace(/<[^\/>][^>]*>(\s*|\t*|\n*|&nbsp;|<br>)<\/[^>]+>/gi,""),b=b.replace(/\[td\]/gi,"<td>&nbsp;</td>"),b=b.replace(/\[a href="(.*?)"\]([\w\W]*?)\[\/a\]/gi,'<a href="$1">$2</a>'),b=b.replace(/\[iframe(.*?)\]([\w\W]*?)\[\/iframe\]/gi,"<iframe$1>$2</iframe>"),b=b.replace(/\[video(.*?)\]([\w\W]*?)\[\/video\]/gi,"<video$1>$2</video>"),b=b.replace(/\[audio(.*?)\]([\w\W]*?)\[\/audio\]/gi,"<audio$1>$2</audio>"),b=b.replace(/\[embed(.*?)\]([\w\W]*?)\[\/embed\]/gi,"<embed$1>$2</embed>"),b=b.replace(/\[object(.*?)\]([\w\W]*?)\[\/object\]/gi,"<object$1>$2</object>"),b=b.replace(/\[param(.*?)\]/gi,"<param$1>"),b=b.replace(/\[img(.*?)\]/gi,"<img$1>"),this.opts.convertDivs&&(b=b.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"<p>$2</p>")),b=b.replace(/<span>([\w\W]*?)<\/span>/gi,"$1"),b=b.replace(/\n{3,}/gi,"\n"),b=b.replace(/<p><p>/gi,"<p>"),b=b.replace(/<\/p><\/p>/gi,"</p>"),this.browser("mozilla")&&(b=b.replace(/<br>$/gi,"")),void this.pasteCleanUpInsert(b))},pasteCleanUpInsert:function(b){this.execCommand("inserthtml",b),this.opts.autoresize===!0?a(this.document.body).scrollTop(this.saveScroll):this.$editor.scrollTop(this.saveScroll)},formattingRemove:function(b){var c=[],d=b.match(/<pre(.*?)>([\w\W]*?)<\/pre>/gi);return null!==d&&a.each(d,function(a,d){b=b.replace(d,"prebuffer_"+a),c.push(d)}),b=b.replace(/\s{2,}/g," "),b=b.replace(/\n/g," "),b=b.replace(/[\t]*/g,""),b=b.replace(/\n\s*\n/g,"\n"),b=b.replace(/^[\s\n]*/g,""),b=b.replace(/[\s\n]*$/g,""),b=b.replace(/>\s+</g,"><"),c&&(a.each(c,function(a,c){b=b.replace("prebuffer_"+a,c)}),c=[]),b},formattingIndenting:function(a){return a=a.replace(/<li/g,"	<li"),a=a.replace(/<tr/g,"	<tr"),a=a.replace(/<td/g,"		<td"),a=a.replace(/<\/tr>/g,"	</tr>")},formattingEmptyTags:function(a){for(var b=["<pre></pre>","<blockquote>\\s*</blockquote>","<em>\\s*</em>","<ul></ul>","<ol></ol>","<li></li>","<table></table>","<tr></tr>","<span>\\s*<span>","<span>&nbsp;<span>","<b>\\s*</b>","<b>&nbsp;</b>","<p>\\s*</p>","<p>&nbsp;</p>","<p>\\s*<br>\\s*</p>","<div>\\s*</div>","<div>\\s*<br>\\s*</div>"],c=0;c<b.length;++c){var d=b[c];a=a.replace(new RegExp(d,"gi"),"")}return a},formattingAddBefore:function(a){for(var b="\r\n",c=["<p","<form","</ul>","</ol>","<fieldset","<legend","<object","<embed","<select","<option","<input","<textarea","<pre","<blockquote","<ul","<ol","<li","<dl","<dt","<dd","<table","<thead","<tbody","<caption","</caption>","<th","<tr","<td","<figure"],d=0;d<c.length;++d){var e=c[d];a=a.replace(new RegExp(e,"gi"),b+e)}return a},formattingAddAfter:function(a){for(var b="\r\n",c=["</p>","</div>","</h1>","</h2>","</h3>","</h4>","</h5>","</h6>","<br>","<br />","</dl>","</dt>","</dd>","</form>","</blockquote>","</pre>","</legend>","</fieldset>","</object>","</embed>","</textarea>","</select>","</option>","</table>","</thead>","</tbody>","</tr>","</td>","</th>","</figure>"],d=0;d<c.length;++d){var e=c[d];a=a.replace(new RegExp(e,"gi"),e+b)}return a},formatting:function(a){return a=this.formattingRemove(a),a=this.formattingEmptyTags(a),a=this.formattingAddBefore(a),a=this.formattingAddAfter(a),a=this.formattingIndenting(a)},toggle:function(){var a;if(this.opts.visual){var b=this.$editor.innerHeight();this.$editor.hide(),this.$content.hide(),a=this.$editor.html(),this.$el.height(b).val(a).show().focus(),this.setBtnActive("html"),this.opts.visual=!1}else{this.$el.hide();var a=this.$el.val();this.$editor.html(a).show(),this.$content.show(),""===this.$editor.html()&&this.setCode(this.opts.emptyHtml),this.$editor.focus(),this.setBtnInactive("html"),this.opts.visual=!0,this.observeImages(),this.observeTables()}},autoSave:function(){this.autosaveInterval=setInterval(a.proxy(function(){a.ajax({url:this.opts.autosave,type:"post",data:this.$el.attr("name")+"="+escape(encodeURIComponent(this.getCode())),success:a.proxy(function(a){"function"==typeof this.opts.autosaveCallback&&this.opts.autosaveCallback(a,this)},this)})},this),1e3*this.opts.interval)},buildToolbar:function(){return this.opts.toolbar===!1?!1:(this.$toolbar=a("<ul>").addClass("redactor_toolbar"),this.opts.air?(a(this.air).append(this.$toolbar),a("body").append(this.air)):this.opts.toolbarExternal===!1?this.$box.prepend(this.$toolbar):a(this.opts.toolbarExternal).html(this.$toolbar),void a.each(this.opts.buttons,a.proxy(function(b,c){if("|"!==c&&"undefined"!=typeof this.opts.toolbar[c]){var d=this.opts.toolbar[c];if(this.opts.fileUpload===!1&&"file"===c)return!0;this.$toolbar.append(a("<li>").append(this.buildButton(c,d)))}"|"===c&&this.$toolbar.append(a('<li class="redactor_separator"></li>'))},this)))},buildButton:function(b,c){var d=a('<a href="javascript:void(null);" title="'+c.title+'" class="redactor_btn_'+b+'"></a>');if("undefined"==typeof c.func?d.click(a.proxy(function(){-1!=a.inArray(b,this.opts.activeButtons)&&(this.inactiveAllButtons(),this.setBtnActive(b)),this.browser("mozilla")&&this.$editor.focus(),this.execCommand(c.exec,b)},this)):"show"!==c.func&&d.click(a.proxy(function(a){this[c.func](a)},this)),"undefined"!=typeof c.callback&&c.callback!==!1&&d.click(a.proxy(function(a){c.callback(this,a,b)},this)),"backcolor"===b||"fontcolor"===b||"undefined"!=typeof c.dropdown){var e=a('<div class="redactor_dropdown" style="display: none;">');e="backcolor"===b||"fontcolor"===b?this.buildColorPicker(e,b):this.buildDropdown(e,c.dropdown),this.dropdowns.push(e.appendTo(a(document.body))),this.hdlShowDropDown=a.proxy(function(a){this.showDropDown(a,e,b)},this),d.click(this.hdlShowDropDown)}return d},buildDropdown:function(b,c){return a.each(c,a.proxy(function(c,d){"undefined"==typeof d.className&&(d.className="");var e;"undefined"!=typeof d.name&&"separator"===d.name?e=a('<a class="redactor_separator_drop">'):(e=a('<a href="javascript:void(null);" class="'+d.className+'">'+d.title+"</a>"),a(e).click("function"==typeof d.callback?a.proxy(function(a){d.callback(this,a,c)},this):"undefined"==typeof d.func?a.proxy(function(){this.execCommand(d.exec,c)},this):a.proxy(function(a){this[d.func](a)},this))),a(b).append(e)},this)),b},buildColorPicker:function(b,c){var d;d="backcolor"===c?this.browser("msie")?"BackColor":"hilitecolor":"forecolor",a(b).width(210);for(var e=this.opts.colors.length,f=0;e>f;++f){var g=this.opts.colors[f],h=a('<a rel="'+g+'" href="javascript:void(null);" class="redactor_color_link"></a>').css({backgroundColor:g});a(b).append(h);var i=this;a(h).click(function(){i.execCommand(d,a(this).attr("rel")),"forecolor"===d&&i.$editor.find("font").replaceWith(function(){return a('<span style="color: '+a(this).attr("color")+';">'+a(this).html()+"</span>")}),i.browser("msie")&&"BackColor"===d&&i.$editor.find("font").replaceWith(function(){return a('<span style="'+a(this).attr("style")+'">'+a(this).html()+"</span>")})})}var j=a('<a href="javascript:void(null);" class="redactor_color_none"></a>').html(RLANG.none);return j.click("backcolor"===c?a.proxy(this.setBackgroundNone,this):a.proxy(this.setColorNone,this)),a(b).append(j),b},setBackgroundNone:function(){a(this.getParentNode()).css("background-color","transparent"),this.syncCode()},setColorNone:function(){a(this.getParentNode()).attr("color","").css("color",""),this.syncCode()},showDropDown:function(b,c,d){if(this.getBtn(d).hasClass("dropact"))this.hideAllDropDown();else{this.hideAllDropDown(),this.setBtnActive(d),this.getBtn(d).addClass("dropact");var e=this.getBtn(d).offset().left;if(this.opts.air){var f=this.air.offset().top;a(c).css({position:"absolute",left:e+"px",top:f+30+"px"}).show()}else if(this.opts.fixed&&this.fixed)a(c).css({position:"fixed",left:e+"px",top:"30px"}).show();else{var g=this.$toolbar.offset().top+30;a(c).css({position:"absolute",left:e+"px",top:g+"px"}).show()}}var h=a.proxy(function(a){this.hideDropDown(a,c,d)},this);a(document).one("click",h),this.$editor.one("click",h),this.$content.one("click",h),b.stopPropagation()},hideAllDropDown:function(){this.$toolbar.find("a.dropact").removeClass("redactor_act").removeClass("dropact"),a(".redactor_dropdown").hide()},hideDropDown:function(b,c){a(b.target).hasClass("dropact")||(a(c).removeClass("dropact"),this.showedDropDown=!1,this.hideAllDropDown())},getBtn:function(b){return this.opts.toolbar===!1?!1:a(this.$toolbar.find("a.redactor_btn_"+b))},setBtnActive:function(a){this.getBtn(a).addClass("redactor_act")},setBtnInactive:function(a){this.getBtn(a).removeClass("redactor_act")},inactiveAllButtons:function(){a.each(this.opts.activeButtons,a.proxy(function(a,b){this.setBtnInactive(b)},this))},changeBtnIcon:function(a,b){this.getBtn(a).addClass("redactor_btn_"+b)},removeBtnIcon:function(a,b){this.getBtn(a).removeClass("redactor_btn_"+b)},addBtnSeparator:function(){this.$toolbar.append(a('<li class="redactor_separator"></li>'))},addBtnSeparatorAfter:function(b){var c=this.getBtn(b);c.parent().after(a('<li class="redactor_separator"></li>'))},addBtnSeparatorBefore:function(b){var c=this.getBtn(b);c.parent().before(a('<li class="redactor_separator"></li>'))},removeBtnSeparatorAfter:function(a){var b=this.getBtn(a);b.parent().next().remove()},removeBtnSeparatorBefore:function(a){var b=this.getBtn(a);b.parent().prev().remove()},setBtnRight:function(a){return this.opts.toolbar===!1?!1:void this.getBtn(a).parent().addClass("redactor_btn_right")},setBtnLeft:function(a){return this.opts.toolbar===!1?!1:void this.getBtn(a).parent().removeClass("redactor_btn_right")},addBtn:function(b,c,d,e){if(this.opts.toolbar===!1)return!1;var f=this.buildButton(b,{title:c,callback:d,dropdown:e});this.$toolbar.append(a("<li>").append(f))},addBtnFirst:function(b,c,d,e){if(this.opts.toolbar===!1)return!1;var f=this.buildButton(b,{title:c,callback:d,dropdown:e});this.$toolbar.prepend(a("<li>").append(f))},addBtnAfter:function(b,c,d,e,f){if(this.opts.toolbar===!1)return!1;var g=this.buildButton(c,{title:d,callback:e,dropdown:f}),h=this.getBtn(b);h.parent().after(a("<li>").append(g))},addBtnBefore:function(b,c,d,e,f){if(this.opts.toolbar===!1)return!1;var g=this.buildButton(c,{title:d,callback:e,dropdown:f}),h=this.getBtn(b);h.parent().before(a("<li>").append(g))},removeBtn:function(a,b){var c=this.getBtn(a);b===!0&&c.parent().next().remove(),c.parent().removeClass("redactor_btn_right"),c.remove()},getFragmentHtml:function(a){var b=a.cloneNode(!0),c=this.document.createElement("div");return c.appendChild(b),c.innerHTML},extractContent:function(){for(var a,b=this.$editor.get(0),c=this.document.createDocumentFragment();a=b.firstChild;)c.appendChild(a);return c},saveSelection:function(){this.$editor.focus(),this.savedSel=this.getOrigin(),this.savedSelObj=this.getFocus()},restoreSelection:function(){"undefined"!=typeof this.savedSel&&null!==this.savedSel&&null!==this.savedSelObj&&"BODY"!==this.savedSel[0].tagName?this.opts.iframe===!1&&0==a(this.savedSel[0]).closest(".redactor_editor").size()?this.$editor.focus():(this.browser("opera")&&this.$editor.focus(),this.setSelection(this.savedSel[0],this.savedSel[1],this.savedSelObj[0],this.savedSelObj[1]),this.browser("mozilla")&&this.$editor.focus()):this.$editor.focus()},getSelection:function(){var a=this.document;return this.window.getSelection?this.window.getSelection():a.getSelection?a.getSelection():a.selection.createRange()},hasSelection:function(){if(this.oldIE()){var a,b=this.$editor.get(0);return b.focus(),b.document.selection?(a=b.document.selection.createRange(),a&&a.parentElement().document===b.document):!1}var c;return(c=this.getSelection())&&null!=c.focusNode&&null!=c.anchorNode},getOrigin:function(){if(this.oldIE()){var a,b=this.$editor.get(0);return b.focus(),this.hasSelection()?(a=b.document.selection.createRange(),this._getBoundary(b.document,a,!0)):null}var c;return(c=this.getSelection())&&null!=c.anchorNode?[c.anchorNode,c.anchorOffset]:null},getFocus:function(){if(this.oldIE()){var a,b=this.$editor.get(0);return b.focus(),this.hasSelection()?(a=b.document.selection.createRange(),this._getBoundary(b.document,a,!1)):null}var c;return(c=this.getSelection())&&null!=c.focusNode?[c.focusNode,c.focusOffset]:null},setSelection:function(a,b,c,d){if(null==c&&(c=a),null==d&&(d=b),this.oldIE()){var e=this.$editor.get(0),f=e.document.body.createTextRange();return this._moveBoundary(e.document,f,!1,c,d),this._moveBoundary(e.document,f,!0,a,b),f.select()}var g=this.getSelection();if(g)if(g.collapse&&g.extend)g.collapse(a,b),g.extend(c,d);else{r=this.document.createRange(),r.setStart(a,b),r.setEnd(c,d);try{g.removeAllRanges()}catch(h){}g.addRange(r)}},getCurrentNode:function(){return"undefined"!=typeof this.window.getSelection?this.getSelectedNode().parentNode:"undefined"!=typeof this.document.selection?this.getSelection().parentElement():void 0},getParentNode:function(){return a(this.getCurrentNode()).parent()[0]},getSelectedNode:function(){if(this.oldIE())return this.getSelection().parentElement();if("undefined"!=typeof this.window.getSelection){var a=this.window.getSelection();return a.rangeCount>0?this.getSelection().getRangeAt(0).commonAncestorContainer:!1}return"undefined"!=typeof this.document.selection?this.getSelection():void 0},_getBoundary:function(a,b,c){var d,e,f,g,h;for(e=a.createElement("a"),d=b.duplicate(),d.collapse(c),h=d.parentElement();;)if(h.insertBefore(e,e.previousSibling),d.moveToElementText(e),!(d.compareEndPoints(c?"StartToStart":"StartToEnd",b)>0&&null!=e.previousSibling))break;return-1===d.compareEndPoints(c?"StartToStart":"StartToEnd",b)&&e.nextSibling?(d.setEndPoint(c?"EndToStart":"EndToEnd",b),f=e.nextSibling,g=d.text.length):(f=e.parentNode,g=this._getChildIndex(e)),e.parentNode.removeChild(e),[f,g]},_moveBoundary:function(a,b,c,d,e){var f,g,h,i,j;return j=0,f=this._isText(d)?d:d.childNodes[e],g=this._isText(d)?d.parentNode:d,this._isText(d)&&(j=e),i=a.createElement("a"),g.insertBefore(i,f||null),h=a.body.createTextRange(),h.moveToElementText(i),i.parentNode.removeChild(i),b.setEndPoint(c?"StartToStart":"EndToEnd",h),b[c?"moveStart":"moveEnd"]("character",j)},_isText:function(a){return null!=a?3==a.nodeType:!1},_getChildIndex:function(a){for(var b=0;a=a.previousSibling;)b++;return b},insertNodeAfterCaret:function(a){this.saveSelection(),this.insertNodeAtCaret(a),this.restoreSelection()},insertNodeAtCaret:function(a){if(this.window.getSelection){var b=this.getSelection();if(b.rangeCount){var c=b.getRangeAt(0);c.collapse(!1),c.insertNode(a),c=c.cloneRange(),c.selectNodeContents(a),c.collapse(!1),b.removeAllRanges(),b.addRange(c)}}else if(this.document.selection){var d=1===a.nodeType?a.outerHTML:a.data,e="marker_"+(""+Math.random()).slice(2);d+='<span id="'+e+'"></span>';var f=this.getSelection();f.collapse(!1),f.pasteHTML(d);var g=this.document.getElementById(e);f.moveToElementText(g),f.select(),g.parentNode.removeChild(g)}},getSelectedHtml:function(){var a="";if(this.window.getSelection){var b=this.window.getSelection();if(b.rangeCount){for(var c=this.document.createElement("div"),d=0,e=b.rangeCount;e>d;++d)c.appendChild(b.getRangeAt(d).cloneContents());a=c.innerHTML}}else this.document.selection&&"Text"===this.document.selection.type&&(a=this.document.selection.createRange().htmlText);return a},resizeImage:function(b){var c,d,e=!1,f=!1,g=a(b).width()/a(b).height(),h=10,i=10;a(b).off("hover mousedown mouseup click mousemove"),a(b).hover(function(){a(b).css("cursor","nw-resize")},function(){a(b).css("cursor",""),e=!1}),a(b).mousedown(function(h){h.preventDefault(),g=a(b).width()/a(b).height(),e=!0,f=!0,c=Math.round(h.pageX-a(b).eq(0).offset().left),d=Math.round(h.pageY-a(b).eq(0).offset().top)}),a(b).mouseup(a.proxy(function(){e=!1,a(b).css("cursor",""),this.syncCode()},this)),a(b).click(a.proxy(function(a){f&&this.imageEdit(a)},this)),a(b).mousemove(function(j){if(e){f=!1;var k=(Math.round(j.pageX-a(this).eq(0).offset().left)-c,Math.round(j.pageY-a(this).eq(0).offset().top)-d),l=a(b).height(),m=parseInt(l,10)+k,n=m*g;n>h&&a(b).width(n),m>i&&a(b).height(m),c=Math.round(j.pageX-a(this).eq(0).offset().left),d=Math.round(j.pageY-a(this).eq(0).offset().top)}})},showTable:function(){this.saveSelection(),this.modalInit(RLANG.table,this.opts.modal_table,300,a.proxy(function(){a("#redactor_insert_table_btn").click(a.proxy(this.insertTable,this)),setTimeout(function(){a("#redactor_table_rows").focus()},200)},this))},insertTable:function(){for(var b=a("#redactor_table_rows").val(),c=a("#redactor_table_columns").val(),d=a("<div></div>"),e=Math.floor(99999*Math.random()),f=a('<table id="table'+e+'"><tbody></tbody></table>'),g=0;b>g;g++){for(var h=a("<tr></tr>"),i=0;c>i;i++){var j=a("<td><br></td>");a(h).append(j)}a(f).append(h)}a(d).append(f);var k=a(d).html()+"<p></p>";this.restoreSelection(),this.execCommand("inserthtml",k),this.modalClose(),this.observeTables()},tableObserver:function(b){this.$table=a(b.target).closest("table"),this.$table_tr=this.$table.find("tr"),this.$table_td=this.$table.find("td"),this.$tbody=a(b.target).closest("tbody"),this.$thead=a(this.$table).find("thead"),this.$current_td=a(b.target),this.$current_tr=a(b.target).closest("tr")},deleteTable:function(){a(this.$table).remove(),this.$table=!1,this.syncCode()},deleteRow:function(){a(this.$current_tr).remove(),this.syncCode()},deleteColumn:function(){var b=a(this.$current_td).get(0).cellIndex;a(this.$table).find("tr").each(function(){a(this).find("td").eq(b).remove()}),this.syncCode()},addHead:function(){if(0!==a(this.$table).find("thead").size())this.deleteHead();else{var b=a(this.$table).find("tr").first().clone();b.find("td").html("&nbsp;"),this.$thead=a("<thead></thead>"),this.$thead.append(b),a(this.$table).prepend(this.$thead),this.syncCode()}},deleteHead:function(){a(this.$thead).remove(),this.$thead=!1,this.syncCode()},insertRowAbove:function(){this.insertRow("before")},insertRowBelow:function(){this.insertRow("after")},insertColumnLeft:function(){this.insertColumn("before")},insertColumnRight:function(){this.insertColumn("after")},insertRow:function(b){var c=a(this.$current_tr).clone();c.find("td").html("&nbsp;"),"after"===b?a(this.$current_tr).after(c):a(this.$current_tr).before(c),this.syncCode()},insertColumn:function(b){var c=0;this.$current_tr.find("td").each(a.proxy(function(b,d){a(d)[0]===this.$current_td[0]&&(c=b)},this)),this.$table_tr.each(function(d,e){var f=a(e).find("td").eq(c),g=f.clone();g.html("&nbsp;"),"after"===b?a(f).after(g):a(f).before(g)}),this.syncCode()},showVideo:function(){this.saveSelection(),this.modalInit(RLANG.video,this.opts.modal_video,600,a.proxy(function(){a("#redactor_insert_video_btn").click(a.proxy(this.insertVideo,this)),setTimeout(function(){a("#redactor_insert_video_area").focus()},200)},this))},insertVideo:function(){var b=a("#redactor_insert_video_area").val();b=this.stripTags(b),this.restoreSelection(),this.execCommand("inserthtml",b),this.modalClose()},imageEdit:function(b){var c=a(b.target),d=c.parent(),e=a.proxy(function(){a("#redactor_file_alt").val(c.attr("alt")),a("#redactor_image_edit_src").attr("href",c.attr("src")),a("#redactor_form_image_align").val(c.css("float")),"A"===a(d).get(0).tagName&&a("#redactor_file_link").val(a(d).attr("href")),a("#redactor_image_delete_btn").click(a.proxy(function(){this.imageDelete(c)},this)),a("#redactorSaveBtn").click(a.proxy(function(){this.imageSave(c)},this))},this);this.modalInit(RLANG.image,this.opts.modal_image_edit,380,e)},imageDelete:function(b){var c=a(b).parent();0!=c.size()&&"A"==c[0].tagName?c.remove():a(b).remove(),this.modalClose(),this.syncCode()},imageSave:function(b){var c=a(b).parent();a(b).attr("alt",a("#redactor_file_alt").val());var d=a("#redactor_form_image_align").val();a(b).css("left"===d?{"float":"left",margin:"0 10px 10px 0"}:"right"===d?{"float":"right",margin:"0 0 10px 10px"}:{"float":"none",margin:"0"});var e=a.trim(a("#redactor_file_link").val());""!==e?"A"!==a(c).get(0).tagName?a(b).replaceWith('<a href="'+e+'">'+this.outerHTML(b)+"</a>"):a(c).attr("href",e):"A"===a(c).get(0).tagName&&a(c).replaceWith(this.outerHTML(b)),this.modalClose(),this.observeImages(),this.syncCode()},showImage:function(){this.saveSelection();var b=a.proxy(function(){if(this.opts.imageGetJson!==!1?a.getJSON(this.opts.imageGetJson,a.proxy(function(b){var c={},d=0;a.each(b,a.proxy(function(a,b){"undefined"!=typeof b.folder&&(d++,c[b.folder]=d)},this));var e=!1;if(a.each(b,a.proxy(function(b,d){var f="";"undefined"!=typeof d.title&&(f=d.title);var g=0;a.isEmptyObject(c)||"undefined"==typeof d.folder||(g=c[d.folder],e===!1&&(e=".redactorfolder"+g));var h=a('<img src="'+d.thumb+'" class="redactorfolder redactorfolder'+g+'" rel="'+d.image+'" title="'+f+'" />');a("#redactor_image_box").append(h),a(h).click(a.proxy(this.imageSetThumb,this))},this)),!a.isEmptyObject(c)){a(".redactorfolder").hide(),a(e).show();var f=function(b){a(".redactorfolder").hide(),a(".redactorfolder"+a(b.target).val()).show()},g=a('<select id="redactor_image_box_select">');a.each(c,function(b,c){g.append(a('<option value="'+c+'">'+b+"</option>"))}),a("#redactor_image_box").before(g),g.change(f)}},this)):a("#redactor_tabs a").eq(1).remove(),this.opts.imageUpload!==!1)this.opts.uploadCrossDomain===!1&&this.isMobile()===!1&&0!==a("#redactor_file").size()&&a("#redactor_file").dragupload({url:this.opts.imageUpload,uploadFields:this.opts.uploadFields,success:a.proxy(this.imageUploadCallback,this),error:a.proxy(this.opts.imageUploadErrorCallback,this)}),this.uploadInit("redactor_file",{auto:!0,url:this.opts.imageUpload,success:a.proxy(this.imageUploadCallback,this),error:a.proxy(this.opts.imageUploadErrorCallback,this)});else if(a(".redactor_tab").hide(),this.opts.imageGetJson===!1)a("#redactor_tabs").remove(),a("#redactor_tab3").show();else{var b=a("#redactor_tabs a");b.eq(0).remove(),b.eq(1).addClass("redactor_tabs_act"),a("#redactor_tab2").show()}a("#redactor_upload_btn").click(a.proxy(this.imageUploadCallbackLink,this)),this.opts.imageUpload===!1&&this.opts.imageGetJson===!1&&setTimeout(function(){a("#redactor_file_link").focus()},200)},this);this.modalInit(RLANG.image,this.opts.modal_image,610,b)},imageSetThumb:function(b){this._imageSet('<img src="'+a(b.target).attr("rel")+'" alt="'+a(b.target).attr("title")+'" />',!0)},imageUploadCallbackLink:function(){if(""!==a("#redactor_file_link").val()){var b='<img src="'+a("#redactor_file_link").val()+'" />';this._imageSet(b,!0)}else this.modalClose()},imageUploadCallback:function(a){this._imageSet(a)},_imageSet:function(a,b){if(this.restoreSelection(),a!==!1){var c="";c=b!==!0?'<p><img src="'+a.filelink+'" /></p>':a,this.execCommand("inserthtml",c),b!==!0&&"function"==typeof this.opts.imageUploadCallback&&this.opts.imageUploadCallback(this,a)}this.modalClose(),this.observeImages()},showLink:function(){this.saveSelection();var b=a.proxy(function(){this.insert_link_node=!1;var b=this.getSelection(),c="",d="",e="";if(this.browser("msie")){var f=this.getParentNode();"A"===f.nodeName?(this.insert_link_node=a(f),d=this.insert_link_node.text(),c=this.insert_link_node.attr("href"),e=this.insert_link_node.attr("target")):d=this.oldIE()?b.text:b.toString()}else b&&b.anchorNode&&"A"===b.anchorNode.parentNode.tagName?(c=b.anchorNode.parentNode.href,d=b.anchorNode.parentNode.text,e=b.anchorNode.parentNode.target,""===b.toString()&&(this.insert_link_node=b.anchorNode.parentNode)):d=b.toString();a(".redactor_link_text").val(d);var g=self.location.href.replace(/\/$/i,""),h=c.replace(g,"");0===c.search("mailto:")?(this.setModalTab(2),a("#redactor_tab_selected").val(2),a("#redactor_link_mailto").val(c.replace("mailto:",""))):0===h.search(/^#/gi)?(this.setModalTab(3),a("#redactor_tab_selected").val(3),a("#redactor_link_anchor").val(h.replace(/^#/gi,""))):a("#redactor_link_url").val(h),"_blank"===e&&a("#redactor_link_blank").attr("checked",!0),a("#redactor_insert_link_btn").click(a.proxy(this.insertLink,this)),setTimeout(function(){a("#redactor_link_url").focus()
},200)},this);this.modalInit(RLANG.link,this.opts.modal_link,460,b)},insertLink:function(){var b=a("#redactor_tab_selected").val(),c="",d="",e="",f="";if("1"===b){c=a("#redactor_link_url").val(),d=a("#redactor_link_url_text").val(),a("#redactor_link_blank").prop("checked")&&(e=' target="_blank"',f="_blank");var g="/(w+:{0,1}w*@)?(S+)(:[0-9]+)?(/|/([w#!:.?+=&%@!-/]))?/",h=new RegExp("^(http|ftp|https)://"+g,"i"),i=new RegExp("^"+g,"i");-1==c.search(h)&&0==c.search(i)&&this.opts.protocol!==!1&&(c=this.opts.protocol+c)}else"2"===b?(c="mailto:"+a("#redactor_link_mailto").val(),d=a("#redactor_link_mailto_text").val()):"3"===b&&(c="#"+a("#redactor_link_anchor").val(),d=a("#redactor_link_anchor_text").val());this._insertLink('<a href="'+c+'"'+e+">"+d+"</a>",a.trim(d),c,f)},_insertLink:function(b,c,d,e){this.$editor.focus(),this.restoreSelection(),""!==c&&(this.insert_link_node?(a(this.insert_link_node).text(c),a(this.insert_link_node).attr("href",d),""!==e?a(this.insert_link_node).attr("target",e):a(this.insert_link_node).removeAttr("target"),this.syncCode()):this.execCommand("inserthtml",b)),this.modalClose()},showFile:function(){this.saveSelection();var b=a.proxy(function(){var b=this.getSelection(),c="";c=this.oldIE()?b.text:b.toString(),a("#redactor_filename").val(c),this.opts.uploadCrossDomain===!1&&this.isMobile()===!1&&a("#redactor_file").dragupload({url:this.opts.fileUpload,uploadFields:this.opts.uploadFields,success:a.proxy(this.fileUploadCallback,this),error:a.proxy(this.opts.fileUploadErrorCallback,this)}),this.uploadInit("redactor_file",{auto:!0,url:this.opts.fileUpload,success:a.proxy(this.fileUploadCallback,this),error:a.proxy(this.opts.fileUploadErrorCallback,this)})},this);this.modalInit(RLANG.file,this.opts.modal_file,500,b)},fileUploadCallback:function(b){if(this.restoreSelection(),b!==!1){var c=a("#redactor_filename").val();""===c&&(c=b.filename);var d='<a href="'+b.filelink+'">'+c+"</a>";this.browser("webkit")&&this.window.chrome&&(d+="&nbsp;"),this.execCommand("inserthtml",d),"function"==typeof this.opts.fileUploadCallback&&this.opts.fileUploadCallback(this,b)}this.modalClose()},modalInit:function(b,c,d,e){if(0===a("#redactor_modal_overlay").size()&&(this.overlay=a('<div id="redactor_modal_overlay" style="display: none;"></div>'),a("body").prepend(this.overlay)),this.opts.overlay&&(a("#redactor_modal_overlay").show(),a("#redactor_modal_overlay").click(a.proxy(this.modalClose,this))),0===a("#redactor_modal").size()&&(this.modal=a('<div id="redactor_modal" style="display: none;"><div id="redactor_modal_close">&times;</div><div id="redactor_modal_header"></div><div id="redactor_modal_inner"></div></div>'),a("body").append(this.modal)),a("#redactor_modal_close").click(a.proxy(this.modalClose,this)),this.hdlModalClose=a.proxy(function(a){return 27===a.keyCode?(this.modalClose(),!1):void 0},this),a(document).keyup(this.hdlModalClose),this.$editor.keyup(this.hdlModalClose),a("#redactor_modal_inner").empty().append(0==c.indexOf("#")?a(c).html():c),a("#redactor_modal_header").html(b),"undefined"!=typeof a.fn.draggable&&(a("#redactor_modal").draggable({handle:"#redactor_modal_header"}),a("#redactor_modal_header").css("cursor","move")),0!==a("#redactor_tabs").size()){var f=this;a("#redactor_tabs a").each(function(b,c){b++,a(c).click(function(){if(a("#redactor_tabs a").removeClass("redactor_tabs_act"),a(this).addClass("redactor_tabs_act"),a(".redactor_tab").hide(),a("#redactor_tab"+b).show(),a("#redactor_tab_selected").val(b),f.isMobile()===!1){var c=a("#redactor_modal").outerHeight();a("#redactor_modal").css("margin-top","-"+(c+10)/2+"px")}})})}a("#redactor_modal .redactor_btn_modal_close").click(a.proxy(this.modalClose,this)),this.isMobile()===!1?(a("#redactor_modal").css({position:"fixed",top:"-2000px",left:"50%",width:d+"px",marginLeft:"-"+(d+60)/2+"px"}).show(),this.modalSaveBodyOveflow=a(document.body).css("overflow"),a(document.body).css("overflow","hidden")):a("#redactor_modal").css({position:"fixed",width:"100%",height:"100%",top:"0",left:"0",margin:"0",minHeight:"300px"}).show(),"function"==typeof e&&e(),this.isMobile()===!1&&setTimeout(function(){var b=a("#redactor_modal").outerHeight();a("#redactor_modal").css({top:"50%",height:"auto",minHeight:"auto",marginTop:"-"+(b+10)/2+"px"})},20)},modalClose:function(){return a("#redactor_modal_close").unbind("click",this.modalClose),a("#redactor_modal").fadeOut("fast",a.proxy(function(){a("#redactor_modal_inner").html(""),this.opts.overlay&&(a("#redactor_modal_overlay").hide(),a("#redactor_modal_overlay").unbind("click",this.modalClose)),a(document).unbind("keyup",this.hdlModalClose),this.$editor.unbind("keyup",this.hdlModalClose)},this)),this.isMobile()===!1&&a(document.body).css("overflow",this.modalSaveBodyOveflow?this.modalSaveBodyOveflow:"visible"),!1},setModalTab:function(b){a(".redactor_tab").hide();var c=a("#redactor_tabs a");c.removeClass("redactor_tabs_act"),c.eq(b-1).addClass("redactor_tabs_act"),a("#redactor_tab"+b).show()},uploadInit:function(b,c){this.uploadOptions={url:!1,success:!1,error:!1,start:!1,trigger:!1,auto:!1,input:!1},a.extend(this.uploadOptions,c),0!==a("#"+b).size()&&"INPUT"===a("#"+b).get(0).tagName?(this.uploadOptions.input=a("#"+b),this.element=a(a("#"+b).get(0).form)):this.element=a("#"+b),this.element_action=this.element.attr("action"),this.uploadOptions.auto?a(this.uploadOptions.input).change(a.proxy(function(){this.element.submit(function(){return!1}),this.uploadSubmit()},this)):this.uploadOptions.trigger&&a("#"+this.uploadOptions.trigger).click(a.proxy(this.uploadSubmit,this))},uploadSubmit:function(){this.uploadForm(this.element,this.uploadFrame())},uploadFrame:function(){this.id="f"+Math.floor(99999*Math.random());var b=this.document.createElement("div"),c='<iframe style="display:none" id="'+this.id+'" name="'+this.id+'"></iframe>';return b.innerHTML=c,a(b).appendTo("body"),this.uploadOptions.start&&this.uploadOptions.start(),a("#"+this.id).load(a.proxy(this.uploadLoaded,this)),this.id},uploadForm:function(b,c){if(this.uploadOptions.input){var d="redactorUploadForm"+this.id,e="redactorUploadFile"+this.id;this.form=a('<form  action="'+this.uploadOptions.url+'" method="POST" target="'+c+'" name="'+d+'" id="'+d+'" enctype="multipart/form-data"></form>'),this.opts.uploadFields!==!1&&"object"==typeof this.opts.uploadFields&&a.each(this.opts.uploadFields,a.proxy(function(b,c){0===c.toString().indexOf("#")&&(c=a(c).val());var d=a("<input/>",{type:"hidden",name:b,value:c});a(this.form).append(d)},this));var f=this.uploadOptions.input,g=a(f).clone();a(f).attr("id",e),a(f).before(g),a(f).appendTo(this.form),a(this.form).css("position","absolute"),a(this.form).css("top","-2000px"),a(this.form).css("left","-2000px"),a(this.form).appendTo("body"),this.form.submit()}else b.attr("target",c),b.attr("method","POST"),b.attr("enctype","multipart/form-data"),b.attr("action",this.uploadOptions.url),this.element.submit()},uploadLoaded:function(){var b,c=a("#"+this.id)[0];if(b=c.contentDocument?c.contentDocument:c.contentWindow?c.contentWindow.document:window.frames[this.id].document,this.uploadOptions.success)if("undefined"!=typeof b){var d=b.body.innerHTML,e=d.match(/\{(.|\n)*\}/)[0],f=a.parseJSON(e);"undefined"==typeof f.error?this.uploadOptions.success(f):(this.uploadOptions.error(this,f),this.modalClose())}else alert("Upload failed!"),this.modalClose();this.element.attr("action",this.element_action),this.element.attr("target","")},browser:function(a){var b=navigator.userAgent.toLowerCase(),c=/(chrome)[ \/]([\w.]+)/.exec(b)||/(webkit)[ \/]([\w.]+)/.exec(b)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(b)||/(msie) ([\w.]+)/.exec(b)||b.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(b)||[];return"version"==a?c[2]:"webkit"==a?"chrome"==c[1]||"webkit"==c[1]:"mozilla"==c[1]&&/trident\//.test(b)?"msie"==a:c[1]==a},oldIE:function(){return this.browser("msie")&&parseInt(this.browser("version"),10)<9?!0:!1},outerHTML:function(b){return a("<p>").append(a(b).eq(0).clone()).html()},normalize:function(a){return parseInt(a.replace("px",""),10)},isMobile:function(a){return a===!0&&/(iPhone|iPod|iPad|BlackBerry|Android)/.test(navigator.userAgent)?!0:/(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent)?!0:!1}},a.fn.getObject=function(){return this.data("redactor")},a.fn.getEditor=function(){return this.data("redactor").$editor},a.fn.getCode=function(){return a.trim(this.data("redactor").getCode())},a.fn.getText=function(){return this.data("redactor").$editor.text()},a.fn.getSelected=function(){return this.data("redactor").getSelectedHtml()},a.fn.setCode=function(a){this.data("redactor").setCode(a)},a.fn.insertHtml=function(a){this.data("redactor").insertHtml(a)},a.fn.destroyEditor=function(){this.each(function(){"undefined"!=typeof a(this).data("redactor")&&(a(this).data("redactor").destroy(),a(this).removeData("redactor"))})},a.fn.setFocus=function(){this.data("redactor").$editor.focus()},a.fn.execCommand=function(a,b){this.data("redactor").execCommand(a,b)}}(jQuery),function(a){"use strict";function b(b,c){this.opts=a.extend({url:!1,success:!1,error:!1,preview:!1,uploadFields:!1,text:RLANG.drop_file_here,atext:RLANG.or_choose},c),this.$el=a(b)}a.fn.dragupload=function(a){return this.each(function(){var c=new b(this,a);c.init()})},b.prototype={init:function(){if(-1===navigator.userAgent.search("MSIE")){this.droparea=a('<div class="redactor_droparea"></div>'),this.dropareabox=a('<div class="redactor_dropareabox">'+this.opts.text+"</div>"),this.dropalternative=a('<div class="redactor_dropalternative">'+this.opts.atext+"</div>"),this.droparea.append(this.dropareabox),this.$el.before(this.droparea),this.$el.before(this.dropalternative),this.dropareabox.bind("dragover",a.proxy(function(){return this.ondrag()},this)),this.dropareabox.bind("dragleave",a.proxy(function(){return this.ondragleave()},this));var b=a.proxy(function(a){var b=parseInt(a.loaded/a.total*100,10);this.dropareabox.text("Loading "+b+"%")},this),c=jQuery.ajaxSettings.xhr();c.upload&&c.upload.addEventListener("progress",b,!1);var d=function(){return c};this.dropareabox.get(0).ondrop=a.proxy(function(b){b.preventDefault(),this.dropareabox.removeClass("hover").addClass("drop");var c=b.dataTransfer.files[0],e=new FormData;this.opts.uploadFields!==!1&&"object"==typeof this.opts.uploadFields&&a.each(this.opts.uploadFields,a.proxy(function(b,c){0===c.toString().indexOf("#")&&(c=a(c).val()),e.append(b,c)},this)),e.append("file",c),a.ajax({url:this.opts.url,dataType:"html",data:e,xhr:d,cache:!1,contentType:!1,processData:!1,type:"POST",success:a.proxy(function(b){var c=a.parseJSON(b);"undefined"==typeof c.error?this.opts.success(c):(this.opts.error(this,c),this.opts.success(!1))},this)})},this)}},ondrag:function(){return this.dropareabox.addClass("hover"),!1},ondragleave:function(){return this.dropareabox.removeClass("hover"),!1}}}(jQuery),function(a,b){"use strict";var c="http://",d=/(^|&lt;|\s)(www\..+?\..+?)(\s|&gt;|$)/g,e=/(^|&lt;|\s)(((https?|ftp):\/\/|mailto:).+?)(\s|&gt;|$)/g,f=function(){for(var g=this.childNodes,h=g.length;h--;){var i=g[h];if(3===i.nodeType){var j=i.nodeValue;if(j&&(d.test(j)||e.test(j))){j=j.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(d,'$1<a href="'+c+'$2">$2</a>$3').replace(e,'$1<a href="$2">$2</a>$5'),a(i).before(j).remove();var k=b.saveSelection();b.restoreSelection(k)}}else 1!==i.nodeType||/^(a|button|textarea)$/i.test(i.tagName)||f.call(i)}};a.fn.linkify=function(){this.each(f)}}(jQuery,Meetup.SelectionManager),function(a){a.event.special.textselect={setup:function(b){a(this).data("textselected",!1),a(this).data("ttt",b),a(this).on("mouseup",a.event.special.textselect.handler)},teardown:function(){a(this).off("mouseup",a.event.special.textselect.handler)},handler:function(b){var c=a(this).data("ttt"),d=a.event.special.textselect.getSelectedText(c).toString();""!=d&&(a(this).data("textselected",!0),b.type="textselect",b.text=d,a.event.dispatch.apply(this,arguments))},getSelectedText:function(){var a="";return rwindow.getSelection?a=rwindow.getSelection():rdocument.getSelection?a=rdocument.getSelection():rdocument.selection&&(a=rdocument.selection.createRange().text),a}},a.event.special.textunselect={setup:function(b){a(this).data("rttt",b),a(this).data("textselected",!1),a(this).on("mouseup",a.event.special.textunselect.handler),a(this).on("keyup",a.event.special.textunselect.handlerKey)},teardown:function(){a(this).unbind("mouseup",a.event.special.textunselect.handler)},handler:function(b){if(a(this).data("textselected")){var c=a(this).data("rttt"),d=a.event.special.textselect.getSelectedText(c).toString();""==d&&(a(this).data("textselected",!1),b.type="textunselect",a.event.dispatch.apply(this,arguments))}},handlerKey:function(b){if(a(this).data("textselected")){var c=a(this).data("rttt"),d=a.event.special.textselect.getSelectedText(c).toString();(b.keyCode=27)&&""==d&&(a(this).data("textselected",!1),b.type="textunselect",a.event.dispatch.apply(this,arguments))}}}}(jQuery),"undefined"==typeof RedactorPlugins)var RedactorPlugins={};if(RedactorPlugins.Bulleter={bulletString:"• ",reBulletString:/^\u2022(\u00a0|\s)/,init:function(){var a=this;this.addBtn("bulleter","Insert bullet",$.proxy(a.bulletizeSelection,a)),a.$editor.on("keyup",$.proxy(function(a){var b=a.keyCode||a.which;13!==b||a.shiftKey||a.ctrlKey||a.metaKey||(this.$editor.imglinkify(),setTimeout($.proxy(function(){this.bulletizeNewNode(this.getSelectedNode())},this),5))},this))},bulletize:function(a,b,c){var d=Meetup.SelectionManager.textNodesUnder(a,!0,!0),e=!d.data;e||(d.data=d.data.replace(this.reBulletString,"")),b&&(c||d&&e?this.insertNodeAtCaret(document.createTextNode(this.bulletString)):$(a).prepend(this.bulletString))},bulletizeSelection:function(){var a=this;this.$editor.focus(),this.setBuffer();var b=Meetup.SelectionManager.getSelectedNodes(),c=$(b.length>0?b[0]:Meetup.SelectionManager.getSelectionContainerNode()),d=c.closest("p"),e=Meetup.SelectionManager.textNodesUnder(d[0],!0),f=!this.reBulletString.test(e.data),g=d.add($(b).filter("p"));c.is(this.$editor)?this.execCommand("inserthtml","<p>"+this.bulletString+"</p>"):g.each(function(){a.bulletize(this,f)}),this.syncCode()},bulletizeNewNode:function(a){var b=$(a).closest("p"),c=b.prev("p");if(c.length>0){var d=Meetup.SelectionManager.textNodesUnder(c[0],!0),e=this.reBulletString.test(d.data+" ");this.bulletize(b[0],e,!0)}}},function(a,b){Meetup.MustacheTemplates===a&&(Meetup.MustacheTemplates={}),Meetup.MustacheTemplates.widgets=b.extend(Meetup.MustacheTemplates.widgets||{},{textInputForm:"<div class='text-input-form {{class}}'>\n	{{#inputs}}\n	<label for=\"\">{{label}}</label>\n	<input type='text' class='{{class}}' placeholder='{{placeholder}}' value='{{value}}'/>\n	{{#note}}<span class=\"text-input-note\">{{note}}</span>{{/note}}\n	{{/inputs}}\n	<div class=\"text-input-buttons\">\n		<button class='button primary text-input-form-submit'>{{action}}{{^action}}Submit{{/action}}</button>\n		<a class='text-input-form-cancel' href='#'>cancel</a>\n	</div>\n	<!--[if IE]><iframe class=\"cover\" src=\"about:blank\" frameborder=\"0\" ></iframe><![endif]-->\n</div>\n",editorHelp:"<p>{{ editorExplanation }}</p>\n<p>{{{more}}}</p>\n",selectList:'<ul class="selectlist">\n	{{#selectables}}\n	<li class="selectlist-item"><a href="{{url}}{{^url}}#{{/url}}" class="selectlist-link">{{#name}}{{name}}{{/name}}{{^name}}{{.}}{{/name}}</a></li>\n	{{/selectables}}\n</ul>\n',pagination:'{{! renders style guide .nav-pagination                                   }}\n{{! expects object with following properties                              }}\n{{!     pages: array of page objects, each with the following properties  }}\n{{!         link : (required) link to page                                }}\n{{!         number: (required) page number, used for indexing             }}\n{{!         label: (optional) override page number for button label       }}\n{{!         selected: (optional) boolean whether this page is selected    }}\n{{!     isFirstPage: (optional) boolean whether first page is selected    }}\n{{!     isLastPage: (optional) boolean whetehr last page is selected      }}\n{{!                                                                       }}\n{{! If we move to templates with logic (Handlebars), this could be simpler}}\n\n<ul class="nav-pagination">\n	<li class="nav-pageitem"><a class="nav-button nav-prev {{#isFirstPage}}disabled{{/isFirstPage}}" href="#"><i class="icon-back"></i></a></li><!--\n	{{#pages}}\n	--><li class="nav-pageitem{{#selected}} selected{{/selected}}">\n		<a class="nav-button nav-pagelink" data-pagenumber="{{number}}" href="{{link}}">{{#label}}{{label}}{{/label}}{{^label}}{{number}}{{/label}}</a>\n	</li><!--\n	{{/pages}}\n	--><li class="nav-pageitem"><a class="nav-button nav-next {{#isLastPage}}disabled{{/isLastPage}}" href="#"><i class="icon-forward"></i></a></li>\n</ul>\n',starRating:'<div\n    {{#id}}id="{{id}}"{{/id}}\n    data-value="{{value}}"\n    class="star-rating {{^id}}disabled {{/id}}{{class}}"\n    title="{{value}}">\n\n    {{#stars}}\n        <i\n            {{#index}}data-index={{index}}{{/index}}\n            class="icon {{size}} {{star}}">\n        </i>\n    {{/stars}}\n</div>\n'})}(void 0,jQuery),Meetup.Linker=function(a,b,c){function d(a){return a.$linkerForm.on("click",".text-input-form-cancel",function(b){b.preventDefault(),a.deactivate(!1)}).on("click",".text-input-form-submit",function(b){b.preventDefault(),a.deactivate(!0)}),a}function e(b){a.extend(this,{$linkerForm:a({}),$linkText:a({}),$linkURL:a({}),$replaceText:a({}),insertCallback:function(){},isActive:!1,$editor:null,$form:null,$toolbar:null},b)}function f(c,d){var e=a(b.getSelectionContainerNode(!0,!0)).closest("a",c.$editor),f={label:"Link text","class":"linker-text",placeholder:"e.g. 'More info'",value:void 0===d.text?d.toString():d.text},g={label:"Link address","class":"linker-url",placeholder:"e.g. http://www.meetup.com",value:null};return e.length>0&&(parentLinkNode=e[0],g.value=parentLinkNode.href,f.value=e.text(),c.replaceLinkNode=parentLinkNode),[f,g]}return c=Handlebars.compile(c),e.prototype={activate:function(b,e,g){var h={inputs:f(this,b),"class":"linker-form redactor_dropdown",action:"Insert"},i=c(h);return this.$linkerForm=a(i).appendTo(g),this.$linkText=this.$linkerForm.find(".linker-text").focus(),this.$linkURL=this.$linkerForm.find(".linker-url"),this.$editor=e,this.isActive=!0,this.$form=e.closest("form").on("submit",this.preventDefault),this.$toolbar=g.trigger("open.linker"),d(this),this},deactivate:function(a){var b=this.$linkText.val(),c=this.$linkURL.val(),d="http://",e=/((https?|ftp):\/\/|mailto:)/g,f=/(^|\s)(((https?|ftp):\/\/|mailto:).+?)(\s|$)/g;return c=c.match(e)?c:d+c,a=c.match(f),this.isActive=!1,this.$form.off("submit",this.preventDefault),this.$toolbar.trigger("close.linker"),a&&b&&c&&this.insertCallback("<a href='"+c+"'>"+b+"</a>",this.replaceLinkNode),this.$linkerForm.remove(),this.replaceLinkNode=null,this},preventDefault:function(a){a.preventDefault()}},e}(jQuery,Meetup.SelectionManager,Meetup.MustacheTemplates.widgets.textInputForm),"undefined"==typeof RedactorPlugins)var RedactorPlugins={};if(RedactorPlugins.Linker={init:function(){var a=this;a.linker=new Meetup.Linker({insertCallback:$.proxy(a.insertHTML,a)}),a.$toolbar.on("close.linker",function(){a.setBtnInactive("linker")}),this.addBtn("linker","Link/Unlink",function(){a.linker.isActive?a.deactivateLinker():a.activateLinker()})},activateLinker:function(){this.$editor.focus();var a=$(Meetup.SelectionManager.getSelectionContainerNode(!0,!0)).closest("a",this.$editor);a.length>0?(a.replaceWith(a.contents()),this.$editor.trigger("keyup")):(this.selectedText=Meetup.SelectionManager.saveSelection(),this.linker.activate(this.getSelection(),this.$editor,this.$toolbar))},deactivateLinker:function(){this.linker.deactivate(!1)},insertHTML:function(a,b){this.$editor.focus(),Meetup.SelectionManager.restoreSelection(this.selectedText),b?$(b).replaceWith(a):Meetup.SelectionManager.insertHTML(a,this.getSelection()),this.syncCode()}},function(a){var b="iframeupload",c=1e3,d={photopicker:"photo",body:"theme_upload",header:"theme_upload"},e=Handlebars.compile('			<form action="{{uploadUrl}}" id="{{elemId}}_upload" target="{{elemId}}_frame" name="{{elemId}}_upload" method="post" enctype="multipart/form-data">				<input type="file"  name="{{inputId}}" id="{{inputId}}" size="12" />				<input type="hidden" name="chapterId" value="{{chapterId}}" />				<input type="hidden" name="eventId" value="" />				<input type="hidden" name="type" value="{{uploadType}}"/>				<input type="hidden" name="elemId" value="{{elemId}}_picker_frame"/>				<input type="hidden" name="op" value="submit"/>				<iframe src="about:blank" name="{{elemId}}_frame" id="{{elemId}}_frame"  style="display: none;"></iframe>			</form>		'),f=function(a,b){a.$frame.trigger("upload",b.data)},g=function(a,b){var c=b.data.reason;switch(b.data.error){case"pending":a.$frame.trigger("pending",c);break;case"fail":a.$frame.trigger("error",c);break;default:a.$frame.trigger("error",c)}},h=function(a,b){a.$frame.trigger("upload",b.urls)},i=function(a,b){var c;switch(b.error){case"TIMEOUT":c="Successful upload but still pending",a.$frame.trigger("pending",c);break;case"BAD_FORMAT":c="Upload failed, try again later",a.$frame.trigger("error",c);break;case"UPLOAD":c="Upload failed, try again later",a.$frame.trigger("error",c);break;case"STAGING":c="Upload failed, try again later",a.$frame.trigger("error",c);break;case"BAD_AUTH":c="Upload failed, try again later",a.$frame.trigger("error",c);break;case"BAD_CHAPTER":c="Upload failed, try again later",a.$frame.trigger("error",c);break;default:c="Upload failed, try again later",a.$frame.trigger("error",c)}},j=function(a,b){this._init(a,b)};j.prototype={_pollForCompletion:function(){var b,d,e=this;b=setInterval(function(){d()},c),d=function(){if(e.isCancled)return e.$frame.trigger("stop"),clearInterval(b),void(e.isCancled=!1);var c=e.$frame[0].contentWindow.document.body.innerHTML,d=a.parseJSON(c);c.length>0&&(clearInterval(b),d.response?"success"==d.response?f(e,d):g(e,d):d.photoId?h(e,d):i(e,d))}},_getOptions:function(c){return a.extend({},a.fn[b].defaults,c)},uploadStart:function(a,b){return b.$fileInput.val()?(b.$frame[0].contentWindow.document.body.innerHTML="",b.$frame.trigger("start"),void b._pollForCompletion()):void a.preventDefault()},uploadStop:function(){this.isCancled=!0,this.$frame[0].stop&&(this.$frame[0].trigger("stop"),this.$frame[0].stop())},_init:function(b,c){var f=this;if(f.options=f._getOptions(c),f.$el=a(b),f.isCancled=!1,f.options.uploadType&&f.options.elemId&&f.options.uploadUrl&&Chapter.id){var g=e(a.extend({},f.options,{chapterId:Chapter.id,inputId:d[f.options.uploadType]}));f.$el.append(g),f.$form=f.$el.find("form"),f.$frame=f.$form.find("iframe"),f.$fileInput=f.$form.find('input[type="file"]'),f.$form.bind("submit",function(a){f.uploadStart(a,f)})}}},a.fn[b]=function(c){return this.each(function(){var d=a(this),e=d.data(b);e||d.data(b,e=new j(this,c))})},a.fn[b].defaults={uploadType:null,elemId:null,uploadUrl:null}}(jQuery),function(a,b){Meetup.MustacheTemplates===a&&(Meetup.MustacheTemplates={}),Meetup.MustacheTemplates.dialogs=b.extend(Meetup.MustacheTemplates.dialogs||{},{photoPicker:{photos:'<div class="photocollection clearfix">\n{{#photos}}\n<a class="photocollection-photo" data-photo-url="{{urls.six00}}" href="#"><img class="photocollection-img" src="{{urls.thumb}}" width="80" height="60" /></a>\n{{/photos}}\n{{^photos}}  {{! no photos}}\n<p>No photos found</p>\n{{/photos}}\n</div>\n{{#pagination}}\n{{>pagination}}  {{! widgets.pagination}}\n{{/pagination}}\n',albumOptions:'{{! <option value="8525432"> title </option>}}\n{{#albums}}\n<option value="{{photoAlbumId}}">{{title}}</option>\n{{/albums}}\n{{^albums}} {{! no albums}}\n<option value="none">No albums found</option>\n{{/albums}}\n',dialog:'{{! we can\'t use ids in this template - there might be multiple photopickers per page}}\n{{! parameters expected:}}\n	{{! title - dialog box title}}\n	{{! photoUploadURI}}\n	{{! albums}}\n	{{! chapterId}}\n\n<div class="photopicker docBox">\n	<div class="docSection">\n		<h2 class="dialog-title">{{trn.insertPhoto}}</h2>\n\n		<ul class="nav-tabs">\n			<li class="selected"><a class="nav-tab" data-tab="album" href="#">{{trn.albums}}</a></li>\n			<li><a class="nav-tab" data-tab="upload" href="#">{{trn.upload}}</a></li>\n			<li><a class="nav-tab" data-tab="link" href="#">{{trn.link}}</a></li>\n		</ul>\n		<div class="nav-tab-target album-tab">\n			<div class="albumpicker">\n				<select name="album" class="albumpicker-select">\n					<option value="">{{trn.loadingAlbums}}&hellip;</option>\n				</select>\n			</div>\n			<div class="photopicker-photocontainer">\n				<div class="photopicker-photos">\n\n				</div>\n			</div>\n		</div>\n		<div class="nav-tab-target link-tab hidden">\n			<form class="photopicker-link-insert" action="">\n				<input type="text" class="photoLink" size="60" maxlength="400" placeholder="http://example.com/image.jpg" />\n				<input type="submit" value="Insert" class="button primary link-submit" />\n			</form>\n		</div>\n\n		<div class="nav-tab-target upload-tab hidden" data-uploadurl="{{photoUploadURI}}">\n			{{! $.iframeupload - provides upload field ONLY}}\n		</div>\n	</div>\n</div>\n'}})}(void 0,jQuery),function(a,b){Meetup.MustacheTemplates===a&&(Meetup.MustacheTemplates={}),Meetup.MustacheTemplates.widgets=b.extend(Meetup.MustacheTemplates.widgets||{},{textInputForm:"<div class='text-input-form {{class}}'>\n	{{#inputs}}\n	<label for=\"\">{{label}}</label>\n	<input type='text' class='{{class}}' placeholder='{{placeholder}}' value='{{value}}'/>\n	{{#note}}<span class=\"text-input-note\">{{note}}</span>{{/note}}\n	{{/inputs}}\n	<div class=\"text-input-buttons\">\n		<button class='button primary text-input-form-submit'>{{action}}{{^action}}Submit{{/action}}</button>\n		<a class='text-input-form-cancel' href='#'>cancel</a>\n	</div>\n	<!--[if IE]><iframe class=\"cover\" src=\"about:blank\" frameborder=\"0\" ></iframe><![endif]-->\n</div>\n",editorHelp:"<p>{{ editorExplanation }}</p>\n<p>{{{more}}}</p>\n",selectList:'<ul class="selectlist">\n	{{#selectables}}\n	<li class="selectlist-item"><a href="{{url}}{{^url}}#{{/url}}" class="selectlist-link">{{#name}}{{name}}{{/name}}{{^name}}{{.}}{{/name}}</a></li>\n	{{/selectables}}\n</ul>\n',pagination:'{{! renders style guide .nav-pagination                                   }}\n{{! expects object with following properties                              }}\n{{!     pages: array of page objects, each with the following properties  }}\n{{!         link : (required) link to page                                }}\n{{!         number: (required) page number, used for indexing             }}\n{{!         label: (optional) override page number for button label       }}\n{{!         selected: (optional) boolean whether this page is selected    }}\n{{!     isFirstPage: (optional) boolean whether first page is selected    }}\n{{!     isLastPage: (optional) boolean whetehr last page is selected      }}\n{{!                                                                       }}\n{{! If we move to templates with logic (Handlebars), this could be simpler}}\n\n<ul class="nav-pagination">\n	<li class="nav-pageitem"><a class="nav-button nav-prev {{#isFirstPage}}disabled{{/isFirstPage}}" href="#"><i class="icon-back"></i></a></li><!--\n	{{#pages}}\n	--><li class="nav-pageitem{{#selected}} selected{{/selected}}">\n		<a class="nav-button nav-pagelink" data-pagenumber="{{number}}" href="{{link}}">{{#label}}{{label}}{{/label}}{{^label}}{{number}}{{/label}}</a>\n	</li><!--\n	{{/pages}}\n	--><li class="nav-pageitem"><a class="nav-button nav-next {{#isLastPage}}disabled{{/isLastPage}}" href="#"><i class="icon-forward"></i></a></li>\n</ul>\n',starRating:'<div\n    {{#id}}id="{{id}}"{{/id}}\n    data-value="{{value}}"\n    class="star-rating {{^id}}disabled {{/id}}{{class}}"\n    title="{{value}}">\n\n    {{#stars}}\n        <i\n            {{#index}}data-index={{index}}{{/index}}\n            class="icon {{size}} {{star}}">\n        </i>\n    {{/stars}}\n</div>\n'})}(void 0,jQuery),Meetup.PhotoPickerDialog=function(a,b,c,d,e){function f(a,b){var c={albums:b},d=getHandlebarsTemplate("photoPicker.albumOptions",r.dialogs.photoPicker.albumOptions)(c),e=a.$el.find(".albumpicker-select");e.html(d),a.currentAlbum=e.val()}function g(b){a.ajax({method:"GET",url:Meetup.URL.api,data:{method:"getAlbumsForChapter",arg_chapter:c.id,arg_member:d.id},success:function(a){f(b,a),"none"!==b.currentAlbum&&i(b,1)},error:function(){}})}function h(a,b){var c=a.photoCount,d=Math.ceil(c/p),e={photos:a.photos},f=1,g=d,h=10;if(1===d)return e;e.pagination={isFirstPage:1===b,isLastPage:b===d,pages:[]},d>h&&(f=Math.max(b-Math.floor(h/2),1),f=Math.min(d-h,f),g=f+h);for(var i=f;g>=i;i++){var j=i===b,k={link:"#",number:i,selected:j};e.pagination.pages.push(k)}return e}function i(b,e){a.ajax({method:"GET",url:Meetup.URL.api,data:{method:"getAlbumPhotos",arg_photoAlbumId:b.currentAlbum,arg_offset:e-1,arg_chapter:c.id,arg_member:d.id},success:function(a){var c=h(a,e),d={pagination:r.widgets.pagination},f=getHandlebarsTemplate("photoPicker.photos",r.dialogs.photoPicker.photos)(c,{partials:d});b.currentPage=e,b.$el.find(".photopicker-photos").html(f)},error:function(){alert("We couldn't load the photos from this album - please try again!")}})}function j(a,b){a.$el.find(".nav-tab").parent().removeClass("selected"),b.parent().addClass("selected");var c=b.data("tab");a.$el.find(".nav-tab-target").addClass("hidden").filter("."+c+"-tab").removeClass("hidden")}function k(b){var c=".nav-button, .nav-pagelink, .close-dialog, .photocollection-photo";b.$el.on("click",c,function(a){return a.preventDefault(),!1}).on("click",".nav-next:not(.disabled)",function(){i(b,b.currentPage+1)}).on("click",".nav-prev:not(.disabled)",function(){i(b,Math.max(b.currentPage-1,1))}).on("click",".nav-pagelink",function(){i(b,a(this).data("pagenumber"))}).on("click",".close-dialog",function(){b.destroy()}).on("change",".albumpicker-select",function(){b.currentAlbum=a(this).val(),i(b,1)}).on("click",".photocollection-photo",function(){var c=a(this).data("photo-url");b.pickCallback(c),b.destroy()}).on("click",".nav-tab",function(c){c.preventDefault(),j(b,a(this))}),b.$el.find(".photopicker-link-insert").on("submit",function(a){a.preventDefault(),b.pickCallback(b.$el.find(".photoLink").val()),b.destroy()})}function l(b,c){c.$fileInput.bind("change",function(){c.$form.submit()}),c.$frame.bind("start",function(){a(this).parent().hide().after(a('<div class="please-wait"><img src="/img/ajax_loader_trans.gif" /> </div>'))}),c.$frame.bind("stop",function(){}),c.$frame.bind("pending",function(a,b){}),c.$frame.bind("error",function(a,b){}),c.$frame.bind("upload",function(a,c){var d=c[s];b.pickCallback(d),b.destroy()})}function m(a){var b=a.$el.find(".upload-tab");b.iframeupload({uploadType:"photopicker",elemId:"uploader"+a.index,uploadUrl:b.data("uploadurl")});var c=b.data("iframeupload");l(a,c)}function n(b,c){var d=a(c);"undefined"==typeof b.$el?(b.$el=d,k(b),a("body").append(b.$el),b.$el.dialog().trigger("appear")):b.$el.html(d.html()).trigger("appear")}function o(b){var c={selectedImage:null,pickCallback:function(){}};a.extend(this,c,b),this.albums=[],this.index=q++}var p=12,q=0,r=Meetup.MustacheTemplates,s="six00";return o.prototype={activate:function(){n(this,getHandlebarsTemplate("photoPicker.dialog",r.dialogs.photoPicker.dialog)({photoUploadURI:"/uploadsinglephoto/event/",trn:b})),g(this,1),m(this)},destroy:function(){this.$el.trigger("close").remove(),this.$el=void 0}},o}(jQuery,Meetup.Copy.Redactor.Photopicker,Chapter,Member,LOG),"undefined"==typeof RedactorPlugins)var RedactorPlugins={};if(RedactorPlugins.PhotoPicker={init:function(){var a=this,b=new Meetup.PhotoPickerDialog({pickCallback:function(b){a.restoreSelection(),a.insertPhoto.call(a,b)}});
a.photoPicker=b,a.addBtn("photo_picker","Insert image",function(){a.saveSelection(),b.activate.call(b)}),a.addBtnSeparatorBefore("photo_picker")},insertPhoto:function(a){var b=this.getSelection(),c="<p><img src='"+a+"'/></p>";if(b&&b.anchorNode){var d=$(b.anchorNode);$curBlock=d.closest("p",this.$editor[0]),0===$curBlock.length||$curBlock.is(this.$editor)?this.execCommand("inserthtml",c+this.opts.emptyHtml):$curBlock[b.anchorOffset?"after":"before"](c+this.opts.emptyHtml)}else this.execCommand("inserthtml","<p>"+c+"</p>");this.$editor.find("img").attr("unselectable","on"),this.syncCode()}},function(a){"use strict";var b=/(^|\s)(https?.+?)\.(jpg|jpeg|png|gif)(\s|$)/g,c=function(){for(var d,e,f,g,h=this.childNodes,i=h.length,j=!1;i--;){var k=h[i];3===k.nodeType?(e=k.nodeValue,(d=e.match(b))&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(b,"$1$4"),g=a(k).closest("p"),k.nodeValue=e,j=d[0],f=a("<p><img src='"+j+"'/></p>"),f.attr("unselectable","on"),g.after(f))):1!==k.nodeType||/^(a|button|textarea)$/i.test(k.tagName)||c.call(k)}};a.fn.imglinkify=function(){this.each(c),a(this).closest("div").find("img").attr("unselectable","on")}}(jQuery),function(a,b){Meetup.MustacheTemplates===a&&(Meetup.MustacheTemplates={}),Meetup.MustacheTemplates.widgets=b.extend(Meetup.MustacheTemplates.widgets||{},{textInputForm:"<div class='text-input-form {{class}}'>\n	{{#inputs}}\n	<label for=\"\">{{label}}</label>\n	<input type='text' class='{{class}}' placeholder='{{placeholder}}' value='{{value}}'/>\n	{{#note}}<span class=\"text-input-note\">{{note}}</span>{{/note}}\n	{{/inputs}}\n	<div class=\"text-input-buttons\">\n		<button class='button primary text-input-form-submit'>{{action}}{{^action}}Submit{{/action}}</button>\n		<a class='text-input-form-cancel' href='#'>cancel</a>\n	</div>\n	<!--[if IE]><iframe class=\"cover\" src=\"about:blank\" frameborder=\"0\" ></iframe><![endif]-->\n</div>\n",editorHelp:"<p>{{ editorExplanation }}</p>\n<p>{{{more}}}</p>\n",selectList:'<ul class="selectlist">\n	{{#selectables}}\n	<li class="selectlist-item"><a href="{{url}}{{^url}}#{{/url}}" class="selectlist-link">{{#name}}{{name}}{{/name}}{{^name}}{{.}}{{/name}}</a></li>\n	{{/selectables}}\n</ul>\n',pagination:'{{! renders style guide .nav-pagination                                   }}\n{{! expects object with following properties                              }}\n{{!     pages: array of page objects, each with the following properties  }}\n{{!         link : (required) link to page                                }}\n{{!         number: (required) page number, used for indexing             }}\n{{!         label: (optional) override page number for button label       }}\n{{!         selected: (optional) boolean whether this page is selected    }}\n{{!     isFirstPage: (optional) boolean whether first page is selected    }}\n{{!     isLastPage: (optional) boolean whetehr last page is selected      }}\n{{!                                                                       }}\n{{! If we move to templates with logic (Handlebars), this could be simpler}}\n\n<ul class="nav-pagination">\n	<li class="nav-pageitem"><a class="nav-button nav-prev {{#isFirstPage}}disabled{{/isFirstPage}}" href="#"><i class="icon-back"></i></a></li><!--\n	{{#pages}}\n	--><li class="nav-pageitem{{#selected}} selected{{/selected}}">\n		<a class="nav-button nav-pagelink" data-pagenumber="{{number}}" href="{{link}}">{{#label}}{{label}}{{/label}}{{^label}}{{number}}{{/label}}</a>\n	</li><!--\n	{{/pages}}\n	--><li class="nav-pageitem"><a class="nav-button nav-next {{#isLastPage}}disabled{{/isLastPage}}" href="#"><i class="icon-forward"></i></a></li>\n</ul>\n',starRating:'<div\n    {{#id}}id="{{id}}"{{/id}}\n    data-value="{{value}}"\n    class="star-rating {{^id}}disabled {{/id}}{{class}}"\n    title="{{value}}">\n\n    {{#stars}}\n        <i\n            {{#index}}data-index={{index}}{{/index}}\n            class="icon {{size}} {{star}}">\n        </i>\n    {{/stars}}\n</div>\n'})}(void 0,jQuery),function(a,b){Meetup.MustacheTemplates===a&&(Meetup.MustacheTemplates={}),Meetup.MustacheTemplates.misc=b.extend(Meetup.MustacheTemplates.misc||{},{youtubeEmbed:'{{! expecting a video ID}}\n\n<iframe width=" 480" height="270" src="http://www.youtube.com/embed/{{videoID}}" frameborder="0" allowfullscreen></iframe>\n',"null":"",vineEmbed:'<iframe class="vine-embed" src="https://vine.co/v/{{videoID}}/embed/simple" width="600" height="600" frameborder="0"></iframe><script async src="//platform.vine.co/static/scripts/embed.js" charset="utf-8"></script>\n'})}(void 0,jQuery),RegExp.escape=function(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},Meetup.EmbedConverter={supportedServices:{"vimeo.com/":"http://vimeo.com/api/oembed.json","hulu.com/watch/":"http://www.hulu.com/api/oembed.json","youtu.be/":!1,"youtube.com/":!1},insertEmbed:function(a){if(a){var b=$(a);b.filter("iframe").attr("data-video-url",$(this).attr("href")),$(this).replaceWith(b)}},getEmbed:function(a,b){var c=$.map(this.supportedServices,function(a,b){return RegExp.escape(b)}),d=new RegExp(c.join("|")).exec(a)||[null],e=[],f=!1;switch(d[0]){case"youtu.be/":case"youtube.com/":return e=a.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*)/),b(e&&11==e[2].length?Handlebars.compile(Meetup.MustacheTemplates.misc.youtubeEmbed)({videoID:e[2],protocol:window.location.protocol}):!1);case"vine.co/":return e=a.match(/^.*vine.co\/v\/([^\/#\&\?]*)/),b(e&&11==e[1].length?Handlebars.compile(Meetup.MustacheTemplates.misc.vineEmbed)({videoID:e[1]}):!1);case null:return b(!1);default:$.ajax({method:"GET",url:this.supportedServices[d[0]]||"//noembed.com/embed",dataType:"jsonp",data:{url:a,maxwidth:"480px",nowrap:"on"}}).done(function(a){return f=!0,b(a.html)}),setTimeout(function(){f||b(!1)},3e3)}},replaceLink:function(){Meetup.EmbedConverter.getEmbed($(this).attr("href"),$.proxy(Meetup.EmbedConverter.insertEmbed,this))},replaceEmbed:function(){var a=$(this);videoURL=a.data("video-url"),$videoLink=$("<p><a class='embedded' href='"+videoURL+"'>"+videoURL+"</a></p>"),a.replaceWith($videoLink)}},Meetup.VideoInsert=function(a,b,c,d){function e(a){return a.$videoinserterForm.on("click",".text-input-form-cancel",function(b){b.preventDefault(),a.deactivate(!1)}).on("click",".text-input-form-submit",function(b){b.preventDefault(),a.testEmbed(a.$link.val())}),a}function f(b){a.extend(this,{$videoinserterForm:a({}),insertCallback:function(){}},b)}return c=Handlebars.compile(c),f.prototype={activate:function(b,d){var f="videoinserter-embed",g={inputs:{label:"Video url","class":f,placeholder:"e.g. http://www.youtube.com/watch?v=...",value:"",note:"Supported services: YouTube, Vimeo, and Hulu"},"class":"redactor_dropdown",action:"Insert"},h=c(g);return this.$videoinserterForm=a(h).appendTo(d),this.$link=this.$videoinserterForm.find("."+f).focus(),this.$editor=b,this.$form=b.closest("form").on("submit",this.preventDefault),this.$toolbar=d.trigger("open.videoinserter"),e(this),this.isActive=!0,this},preventDefault:function(a){a.preventDefault()},deactivate:function(a,b){var c=this.$link.val(),d="http://",e=/^https?:\/\//g;return a&&c&&(c=c.match(e)?c:d+c,this.insertCallback(c,b)),this.$videoinserterForm.remove(),this.isActive=!1,this.$form.off("submit",this.preventDefault),this.$toolbar.trigger("close.videoinserter"),this},successfulEmbed:function(a){if(this.isActive){if("string"==typeof a)return this.deactivate(!0,a);alert("Sorry, that link cannot be embedded")}},testEmbed:function(b){d.getEmbed(b,a.proxy(this.successfulEmbed,this))}},f}(jQuery,Meetup.SelectionManager,Meetup.MustacheTemplates.widgets.textInputForm,Meetup.EmbedConverter),"undefined"==typeof RedactorPlugins)var RedactorPlugins={};RedactorPlugins.VideoInsert={init:function(){var a=this;a.videoinserter=new Meetup.VideoInsert({insertCallback:function(b,c){a.restoreSelection(),a.insertVideo.call(a,b,c)}}),a.$toolbar.on("close.videoinserter",function(){a.setBtnInactive("videoinserter")}),this.addBtn("videoinserter","Insert video",function(){a.videoinserter.isActive?a.deactivateVideoInsert():a.activateVideoInsert()}),this.loadEmbeds()},cleanEmbeds:function(){var a=this.$editor.html(),b=$("<div>"+a+"</div>"),c=b.find("iframe").add(b.filter("iframe"));c.length>0&&(c.each(Meetup.EmbedConverter.replaceEmbed),this.setCode(b.html()),this.$editor.html(a))},loadEmbeds:function(){this.$editor.find(".embedded").each(Meetup.EmbedConverter.replaceLink)},activateVideoInsert:function(){this.setBtnActive("videoinserter"),this.$editor.focus(),this.saveSelection(),this.videoinserter.activate(this.$editor,this.$toolbar)},deactivateVideoInsert:function(){this.setBtnInactive("linker"),this.videoinserter.deactivate(!1),this.restoreSelection()},insertVideo:function(a,b){this.restoreSelection(),this.setBuffer();var c=$(b);if(selection=this.getSelection(),c.filter("iframe").attr("data-video-url",a),selection&&selection.anchorNode){var d=$(selection.anchorNode);$insertAfter=d.closest("p",this.$editor[0]),0===$insertAfter.length||$insertAfter.is(this.$editor)?this.execCommand("inserthtml","<p><br></p>"+c[0].outerHTML):$insertAfter.after(c)}else this.execCommand("inserthtml","<p></p><div>"+$("<div>").append(c).html()+"</div><p></p>");this.syncCode()}},Meetup.Redactor=function(a){"use strict";function b(b,c){for(var d,e,f,g,h,i,j=c.length-1;j>=0;j--)if(d=c[j],3===d.nodeType&&d.data.length>0&&"\n"!==d.data){for(e=d.parentNode.nodeName.toLowerCase();"p"!==e&&"div"!==e;)d=d.parentNode,e=d.parentNode.nodeName.toLowerCase();h=a(d.parentNode),f=h.find("img"),"p"==e&&f.length>0?(g=a(d),i=0!==g.prevAll("img").length?"before":"after",h[i](a("<p/>").append(f))):"div"==e&&"embedded"!==d.className&&(b.saveSelection(),a(d).wrap("<p/>"),b.restoreSelection())}}function c(c,d){if(0!==c.length){return this.config={buttons:["bold","italic"],plugins:["SelectionManager","Bulleter","Linker","PhotoPicker","VideoInsert"],observeImages:!1,activeButtons:["italic","bold","linker"],activeButtonsStates:{b:"bold",strong:"bold",i:"italic",em:"italic",a:"linker"},keyupCallback:function(a,c){var d=c.keyCode||c.which,e=Meetup.SelectionManager.getSelectedNodes()[0];b(a,[e]),13!==d||c.shiftKey||c.ctrlKey||c.metaKey||a.$editor.imglinkify()},allowedTags:["a","p","b","i","img","br","iframe"],itemDate:new Date},a.extend(this.config,d),this.$formInput=c,this}}var d={activate:function(){this.initContent=this.$formInput.html(),this.$formInput.redactor(this.config);var b=this;return this.redactor=this.$formInput.data("redactor"),this.redactor.$toolbar.on("click",".redactor_btn_bold, .redactor_btn_italic",function(){b.redactor.$editor.focus(),b.redactor.keyup()}),this.redactor.$editor.bind("paste",function(){setTimeout(function(){b.dirtyStrip()},5)}),this.redactor.observeFormatting=function(){var b=this.getSelectedNode();this.inactiveAllButtons(),a.each(this.opts.activeButtonsStates,a.proxy(function(c,d){0!=a(b).closest(c,this.$editor.get()[0]).length&&this.setBtnActive(d)},this))},this.dirtyStrip(),this.redactor.$editor.find("img").attr("unselectable","on").filter(function(){return!a(this).parent().is("p")}).wrap("<p/>"),this},destroy:function(){return this.$formInput.destroyEditor(),this},cancelEdit:function(a){return a.preventDefault(),this.$formInput.destroyEditor(),this.$formInput.html(this.initContent),this},dirtyStrip:function(){var c=this.$formInput.getEditor();return c.find("li").replaceWith(function(){return a("<p />").append(a(this).contents())}),b(this.redactor,Meetup.SelectionManager.textNodesUnder(c[0])),this.redactor.syncCode(),this}};return a.extend(c.prototype,d),c}(jQuery),function(a,b,c){c.WebAjax=function(c,d,e){var f={url:b.href,dataType:"json",cache:!1,data:{__fragment:c}};return"object"==typeof d?e=d:"string"==typeof d&&(f.success=function(b){if(b){var c=a(d);a.each(b,function(b,d){a(c[b]).replaceWith(d)})}}),a.ajax(a.extend(f,e))}}(jQuery,location,Meetup),function(a){a.fn.cancelEvent=function(b){var c={dispatch:!0,className:"delete-event"},d=a(this),e=0,f=!1,g=null,h=null,i=null,j=require("core/trn"),k=j("common.meetupSeries","Meetup Series");a("#cancel-dialog, #cancel-delete-dialog, #cancel-auto-dialog").remove();var l=Handlebars.compile(['<div class="D_dialog" id="cancel-dialog">','<p class="center-text bold" id="cancel-headline">{{{copy.cancelConfirm}}}</p>','<p class="center-text" id="cancel-explanation">{{{copy.cancelExplanation}}}</p>','<p class="center-text"><input type="checkbox" class="inline" value="1" id="delete-meetup" />{{{copy.deleteFromCalendar}}}</p>','<div class="footElement">','<p><input type="submit" name="delete" value="{{{copy.cancelThisMeetup}}}" class="button primary" id="cancel-meetup" /></p>','<a href="#" id="cancelMeetupDelete">{{{copy.neverMind}}}</a>',"</div>","</div>"].join("")),m=a(l({copy:{neverMind:j("common.neverMind","Never mind"),cancelThisMeetup:j("event.cancelThisMeetup","Cancel this Meetup"),cancelConfirm:j("event.cancelConfirm","Ready to cancel this {meetupType}?",{meetupType:"<span class='meetup-type'>Meetup</span>"}),deleteFromCalendar:j("event.deleteFromCalendar","Cancel AND delete it from the calendar?"),cancelExplanation:j("event.cancelExplanation","Once you cancel, we'll alert any members who RSVPed yes. Your canceled Meetup will appear crossed out on the calendar in case you want to dig up its details later.")}})).dialog({autoOpen:!1,closeText:"x",modal:!0,minHeight:!1,width:"500px"}),n=Handlebars.compile(['<div class="D_dialog" id="cancel-delete-dialog">','<p class="center-text bold">{{copy.deleteConfirm}}</p>','<div class="footElement">','<p><input type="submit" name="delete" value="{{copy.deleteThisMeetup}}" class="button primary" id="delete-meetup-only" /></p>','<a href="#" id="meetupDelete">{{copy.neverMind}}</a>',"</div>","</div>"].join("")),o=a(n({copy:{neverMind:j("common.neverMind","Never mind"),deleteThisMeetup:j("event.deleteThisMeetup","Delete this Meetup"),deleteConfirm:j("event.deleteConfirm","Are you sure you want to delete this Meetup?")}})).dialog({autoOpen:!1,closeText:"x",modal:!0,minHeight:!1,width:"500px"}),p=Handlebars.compile(['<div class="D_dialog" id="cancel-auto-dialog">','<p class="bold">{{copy.meetupOnRepeatingSchedule}}</p>','<p><input type="radio" value="false" name="cancel-series" class="inline" id="cancel-onlyone" /> <label class="inline" for="cancel-onlyone">{{copy.cancelOnlyThisMeetup}}</label></input></p>','<p><input type="radio" value="true" name="cancel-series" class="inline" id="cancel-all" /> <label for="cancel-all" class="inline">{{copy.cancelThisAndFollowingMeetups}}</label></input></p>','<p><input type="checkbox" value="1" id="delete-meetup-auto" /> {{copy.alsoDeleteFromCalendar}}</p>','<div class="footElement">','<p><input type="submit" name="delete" value="{{copy.cancelThisMeetup}}" class="button primary" id="cancel-meetup-auto" /></p>','<a href="#" id="cancelMeetupDelete-auto">{{copy.neverMind}}</a>',"</div>","</div>"].join("")),q=a(p({copy:{meetupOnRepeatingSchedule:j("group.event.cancelThisOrAll2","This Meetup is on a repeating schedule"),cancelOnlyThisMeetup:j("event.cancelOnlyThisMeetup","Cancel only this Meetup"),cancelThisAndFollowingMeetups:j("event.cancelThisAndFollowingMeetups","Cancel this Meetup and all following Meetups"),alsoDeleteFromCalendar:j("event.alsoDeleteFromCalendar","Also delete from the calendar"),neverMind:j("common.neverMind","Never mind"),cancelThisMeetup:j("event.cancelThisMeetup","Cancel this Meetup")}})).dialog({autoOpen:!1,closeText:"x",modal:!0,minHeight:!1,width:"500px"});a.extend(c,b||{});var r=function(){return a("#delete-meetup-only").click(t),a("#deletedialog-report-meetup").click(u),a("#meetupDelete").click(function(a){a.preventDefault(),o.dialog("close")}),a("#cancel-meetup-auto").click(t),a("#cancelMeetupDelete-auto").click(function(a){a.preventDefault(),q.dialog("close")}),a("#cancel-meetup").click(t),a("#dialog-report-meetup").click(u),a("#cancelMeetupDelete").click(function(a){a.preventDefault(),m.dialog("close")}),c.dispatch?(d.delegate("."+c.className,"click",s),d):d.each(function(){a(this).click(s)})},s=function(b){b.preventDefault(),a(document.body).trigger("click");var c=a(this),d=a(this).data("nospam");c.data("dialog")&&"deleteOnly"==c.data("dialog")?(g="deleteOnly",o.dialog("open"),e=c.data("event"),f=c.data("series")||!1,i=c.data("creatorid"),Member.id==i||d?a("#deletedialog-report-meetup").parent().css("display","none"):a("#deletedialog-report-meetup").parent().css("display","block")):c.data("dialog")?(g="auto",q.dialog("open"),e=c.data("event"),h=c.data("eventdate"),i=null):(g="normal",m.dialog("open"),e=c.data("event"),h=c.data("eventdate"),f=c.data("series")||!1,i=c.data("creatorid"),Member.id==i||d?a("#dialog-report-meetup").parent().css("display","none"):a("#dialog-report-meetup").parent().css("display","block"),m.find(".meetup-type").html(f?k:"Meetup"))},t=function(b){b.preventDefault();var c="auto"==g?a("#delete-meetup-auto").is(":checked"):a("#delete-meetup").is(":checked")||"deleteOnly"==g,d="auto"==g?a("input[name='cancel-series']:checked",$get("cancel-auto-dialog")).val():f,i={method:"deleteEvent",arg_member:Member.id,arg_chapter:Chapter.id,arg_eventToken:e,arg_emailText:"",arg_isDelete:c,arg_entireSeries:d};a.ajax({type:"post",dataType:"json",url:API_URL,data:i,success:function(b){var d={success:c?"event_delete":"event_cancel",eventId:e,eventTitle:b.event_title,returnUri:Chapter.groupUrl};h&&(d.eventDate=h),window.location="redirect"==b.success?b.redirect:Chapter.groupUrl+"?"+a.param(d)},fail:function(){alert("Sorry, there was a problem. Please try again.")}})},u=function(b){b.preventDefault();var c=!0,d=!1,f={method:"deleteEvent",arg_member:Member.id,arg_chapter:Chapter.id,arg_eventToken:e,arg_emailText:"",arg_isDelete:c,arg_entireSeries:d};a.ajax({dataType:"json",url:API_URL,data:f,success:function(a){var b=[Meetup.Data.grouphome.baseUrl,"abuse/",i,"/?success=event_delete&eventTitle=",encodeURIComponent(a.event_title)].join("");window.location.replace(b)},fail:function(){alert("Sorry, there was a problem. Please try again.")}})};r()}}(jQuery),function(a,b){"use strict";b&&$(document).on("track:microtarget",function(){$(".mt-track").waypoint({handler:function(){var a=$(this).data();b.get({data:{method:"logImpression",arg_area:a.area,arg_rule:a.rule,arg_banditCode:a.banditCode||"",arg_banditVariant:a.banditVariant||""}})},offset:"bottom-in-view",triggerOnce:!0})})}(window,window[Meetup.Mobile?"MM":"Meetup"].RemoteApi),function(){function a(a,b,c){var d=b.View.extend({initialize:function(a){a&&(this.callback=a.callback)},events:{"click i":"starClick","mouseenter i":"starEnter","mouseleave i":"starLeave"},refreshStars:function(a){a||(a=this.model.get("value"));var b,d=this.$el.find("i"),e=this.model.get("stars");return this.$el.attr("title",Math.round(10*a)/10),c.each(e,function(c,e){c.full=a-e>=.75,c.half=a-e>=.25&&.75>a-e,b=c.full?"icon-star":c.half?"icon-half-star":"icon-star empty-star",d.eq(e).removeClass("icon-star empty-star icon-half-star").addClass(b)}),e},starEnter:function(b){var c=a(b.currentTarget).data("index");"number"==typeof c&&this.model.set("stars",this.refreshStars(c+1))},starLeave:function(){this.model.set("stars",this.refreshStars())},starClick:function(b){var c=a(b.currentTarget).data("index");"number"==typeof c&&(this.callback&&this.callback(c+1),this.model.set("value",c+1),this.model.set("stars",this.refreshStars()))}});return{create:function(a,c){if(a&&a.get(0)){var e,f,g,h,i;h=new b.Model,i=new d({callback:c,model:h,$el:a,el:a.get(0)}),e=i.$el.data("value")||h.get("value")||0,h.set("value",e),f=i.$el.find("i").length||h.get("total")||5,h.set("total",f),g=[];for(var j=0;f>j;j++)g.push({index:j});return h.set("stars",g),i.refreshStars(e),h}}}}define("shared/widgets/StarRating",["jquery","backbone","underscore"],a)}(),function(){require(["jquery","shared/widgets/StarRating","state","core/api","core/trn"],function($,StarRating,State,Api,trn){$(function(){function onRatingChanged(a){var b={url:State.Chapter.groupApiUrl,data:{method:"submitEventStars",arg_member:State.Member.id,arg_event:State.Event.id,arg_eventStars:a}};Api.RemoteApi.post(b)}var EventDetails={},savedGuestCount=0,savedPolicyState=!1,HIDDEN_CLASS="jsStartHidden",SUGGEST_PARAM_NAME="ed",suggestParamValue=null,isLoaded=!1,templates={},hours12=["7","8","9","10","11","12","1","2","3","4","5","6"],hours24=["19","20","21","22","23","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18"],minutes=["00","15","30","45"],settime=null,setdate=null,evtdets=$("#eventdets"),gmapAPILoaded,venueMarker,rsvpwidget=null,defaults={isPast:!1,hasPayment:!1,hasGuests:!0,takeAttend:!1,isAutoSched:!1,isEventAdmin:!1,eventDate:null,eventTime:null,currentRSVP:null,showRSVP:null},MUVR=Meetup.UI.ValidatorRules,VENUE_START=0,VENUE_MAX=5,venues=null,currentVenue=null,venuePages=[],curr=0,states=null,countries=null,COMMENT_PAGE_SIZE=50,greetingsQueue=[],SPINNER_THEMED_COLOR=$("#C_page").hasClass("dk")?"#f2f2f2":"#555555",$rsvpList=$("#rsvp-list"),$el_howToFindUs;templates["event-howToFindUs"]={display:Handlebars.compile(Meetup.EventDetailMustache.howToFindUs.display),edit:Handlebars.compile(Meetup.EventDetailMustache.howToFindUs.edit)},templates["event-where"]={display:Handlebars.compile(Meetup.EventDetailMustache.where.display),edit:Handlebars.compile(Meetup.EventDetailMustache.where.edit),empty:Handlebars.compile(Meetup.EventDetailMustache.where.empty),current:null},templates["event-when"]={display:Handlebars.compile('<div class="figureset">					<div class="figureset-figure event-stack-icon sprite-event-stack spr-event-stack-calendar margin-bottom"></div>					<div class="clearfix figureset-description" id="event-when-display">						{{#if isMultiDay}}						<time id="event-start-time"><h3>{{date}} {{time}}</h3></time>							<p class="subtext">{{to}} <time id="event-end-time">{{endDateTime}}</time></p>						{{else}}							{{#if isDefaultEndTime}}								<time><h3>{{date}}</h3>								<p class="subtext">{{time}}</p></time>							{{else}}								<div class="margin-bottom"><time id="event-start-time"><h3>{{date}}</h3> <span class="subtext">{{time}}</span></time> <span class="subtext">{{to}}</span> <time id="event-end-time"><span class="subtext">{{endDateTime}}</span></time></div>							{{/if}}						{{/if}}					</div>				</div>'),edit:Handlebars.compile(Meetup.EventDetailMustache.when.edit),empty:Handlebars.compile(Meetup.EventDetailMustache.when.empty),current:null},templates["event-title"]={display:Handlebars.compile("<h1>{{title}}</h1>"),edit:Handlebars.compile(['<form id="titleEdit" action="javascript:void(0);" class="align-right">','<input type="text" name="" value="{{title}}" id="event-title-field" style="width: 98%; padding: 0.2em; font-size: 1.3em;" class="hasMaxLen maxChars80" />','<input type="submit" class="button primary" id="event-title-submit" value="'+Meetup.Copy["common.save"]+'" /> ','<a id="cancel-title" class="margin-left" data-elm="event-title">'+Meetup.Copy["common.cancelLcase"]+"</a>","</form>"].join("")),current:null},templates["event-why"]={display:Handlebars.compile('&ldquo;<span id="eventWhy">{{why}}</span>&rdquo;'),edit:Handlebars.compile(['<p class="lma-question edit">We should do this because</p>','<textarea id="descr_why" name="descr_why" class="hasMaxLen maxChars250">{{{why}}}</textarea>','<p class="why-actions">','<input type="button" value="'+Meetup.Copy["common.save"]+'" class="button primary small" id="event-why-submit" /> ','<a id="cancel-why" class="cancel-field" data-elm="event-why">'+Meetup.Copy["common.cancelLcase"]+"</a>","</p>"].join("")),empty:"",current:null},templates.dialogSpam=Handlebars.compile(['<div class="D_dialog" id="spam-dialog">','<p class="bold">Report this Meetup as spam?</p>','<form action="{{GROUP_URL}}report_event/" method="POST">','<input type="hidden" name="eventId" value="{{EVENT_ID}}" />','<input type="hidden" name="memberId" value="{{CREATOR_ID}}" />','<p><input type="checkbox" value="true" name="delete" id="delete_checkbox" checked="checked" /> <label for="delete_checkbox">Delete this Meetup</label></input></p>','<p><input type="checkbox" value="true" name="spam" id="spam_checkbox" checked="checked" /> <label for="spam_checkbox">Report this as spam</label></p>','<div class="footElement">','<p><input type="submit" name="delete" value="'+Meetup.Copy["common.submit"]+'" class="button small" id="report-spam" /></p>','<a href="#" id="cancel-report-spam">'+Meetup.Copy["common.neverMind"]+"</a>","</div>","</form>","</div>"].join("")),templates["waitlist-header-li"]=Handlebars.compile('<li class="D_maybe" id="wait-list"></li>'),templates.rsvpGuests=Handlebars.compile('<span class="small muted rsvp-guests">+{{ guestCount }}</span>');var updateGuestCount=function(a,b){var c=$("#rsvp_"+Member.id+" .member-name"),d=c.children(".rsvp-guests");d.remove(),$("#guests").val(b),$("#rsvp-control").data("currentrsvp").guests=String(b),b>0&&c.append(templates.rsvpGuests({guestCount:b}))},doAttendeeListWebAjax=function doAttendeeListWebAjax(e){e.preventDefault();var $this=$(this),elData=$this.data(),text=$this.text();if($this.spin(!0,{version:"small",hideContent:!0}),elData.currentPage<elData.maxPage){var ajaxData={__fragment:"past-attendee-list",p_attendeeList:elData.currentPage+1};Meetup.RemoteApi.get({url:window.location.href,data:ajaxData,success:function success(data,textStatus,jqXHR){return 0==data.length?void $this.remove():($rsvpList.find("li:last").removeClass("last"),$rsvpList.append($(eval(data)[0]).find("li")),doLazyLoad(),void(ajaxData.p_attendeeList===elData.maxPage?$this.remove():$this.data("current-page",ajaxData.p_attendeeList)))},error:function(a,b,c){LOG.error("Error with event webajax call: "+ajaxData.__fragment+": "+c)},complete:function(){return $this.closest(document.body).length>0?void $this.spin("stop"):!1}})}},toggleEditor=function(a){a.preventDefault();var b=$(this),c=b.attr("data-elm"),d=b.data();toggle(c,d)},toggleEmpty=function(a){a.preventDefault();var b=$(this),c=b.attr("data-elm")+"-clear";toggle(c)},generateTimes=function(){var a,b="en_US"===Meetup.Language?hours12:hours24,c=b.length,d=minutes.length,e=[],f=j=0,g="it"===Meetup.Language?".":":",h=settime||defaults.eventTime,i=h?h.split(" ")[0].replace(/^0(\d:)/,"$1"):"";for(f=0;c>f;f++){for(j=0;d>j;j++)a={option:b[f]+":"+minutes[j]+":00",formatted:b[f]+g+minutes[j],selected:b[f]+g+minutes[j]===i?!0:!1},e.push(a);j=0}return e},loadEmbeds=function(a){a.find(".embedded").each(Meetup.EmbedConverter.replaceLink)},toggle=function(a,b){var c=a;evtdets.trigger(c,[c,b])},editTitle=function(a,b){var c={title:$("#"+b).find("h1").text()};templates[b].current=$("#"+b).html();var d=templates[b].edit(c);$("#"+b).html(d),$("#event-title-field").CharCounter(),$("#event-title-field").bindValidation([{rule:MUVR.notEmpty},{rule:MUVR.isMaxLength,param:80}],{pass:updateEventTitle,fail:$.noop}).addClass("validate"),$("#cancel-title").click(function(a){a.preventDefault(),$(this).unbind(),$("#"+b).html(templates[b].current).data("hoverToEdit").enable()}),$("#event-title-submit").bind("click",function(){$("#event-title-field").trigger("validate")})},editWhen=function(a,b){var c=setdate||defaults.eventDate,d=settime||defaults.eventTime,e=$("#event-end-time");"pt"===Meetup.Language&&(c=c.replace(/-/g,"/"));var f={label:"<h3>"+trn("group.event.suggestDateTime","Suggest a date and time:")+"</h3>",eventdate:c,options:generateTimes(),isUS:function(){return"en_US"===Meetup.Language},ampm:function j(){var a=null;if("en_US"===Meetup.Language){var j=d?d.split(" ")[1]:"PM";a="PM"==j?!0:!1}return a},durationText:Meetup.Copy.durationText,eventPageDivWrapper:!0,hideCancel:!0,endTimeRuntimeFlag:Meetup.Data.endTimeRuntimeFlag,linkColor:Meetup.Data.linkColor,trnSetEndTime:Meetup.Copy["group.event.setEndTime"],trnAt:Meetup.Copy["common.at"],trnAddDate:trn("group.event.addDate","Add date"),trnSave:Meetup.Copy["common.save"],trnCancel:Meetup.Copy["common.cancelLcase"]};f.event_when_fields=Handlebars.compile(Meetup.Templates.lma.lma_when.edit)(f),templates[b].current=$("#"+b).html();var g=templates[b].edit(f);$("#"+b).html(g),$("#event-date-field").datepicker({minDate:new Date,altFormat:"yy-mm-dd",altField:"#formattedDate"}),$("#event-when-display").bindValidation([{rule:Meetup.EventCommon.validateReqDate}],{pass:updateEventTime,fail:$.noop}).addClass("validate"),$("#event-change-duration a").on("click",Meetup.EventCommon.eventChangeDurationHandler),$("#cancel-when").click(function(a){a.preventDefault(),$(this).unbind();var c=$("#"+b);c.html(templates[b].current),c.hasClass("complete")&&c.data("hoverToEdit").enable()});var h=$("#event-date-field").datepicker("getDate"),i=$.datepicker.formatDate("yy-mm-dd",h);$("#event-date-field").datepicker("setDate",h),$("#formattedDate").val(i),$("#event-date-submit").bind("click",function(){$("#event-when-display").trigger("validate")}),e.length>0&&Meetup.EventCommon.eventChangeDurationHandler()},clearWhen=function(){setEventTime("",""),$("#eventdets div.event-subinfo").remove();var a=$("#event-when");setCompletionStatus(a,!1)},setCompletionStatus=function(a,b){b?a.removeClass("incomplete").addClass("complete"):a.removeClass("complete").addClass("incomplete")},editWhere=function(a,b,c){c&&(currentVenue={name:c.name,desc:c.address,id:c.id}),Meetup.venueHelper.init(showWhere.curry(b))},showWhere=function(a){function b(){return checkField("#event-where-field")||checkField("#event-where-address")||checkField("#event-where-city")?checkField("#event-where-field")?"A name is required":checkField("#event-where-address")?"An address is required":"A city is required":(e.setUserVenue(),!1)}var c={venues:Meetup.venueHelper.venues,venuename:currentVenue?currentVenue.name:null,venueaddress:currentVenue?currentVenue.desc:null,venueid:currentVenue?currentVenue.id:0,city:Chapter.city,countries:Meetup.venueHelper.countries,trnPrivateRes:Meetup.Copy.trnPrivateRes||"This location is a private residence.",trnCurrentPlacePrompt:trn("group.event.currentPlacePrompt","Current place:"),trnSelectAPlace:trn("group.lma.selectAPlaceNoPrompt","Select a place"),trnCancel:Meetup.Copy["common.cancelLcase"],trnRecentPlaces:Meetup.Copy["group.event.recentPlaces"],trnFindAPlace:Meetup.Copy["group.event.findAPlace"],trnWhereExample:Meetup.Copy["group.event.whereExample"],trnAddress:Meetup.Copy["common.address"],trnCity:Meetup.Copy["common.city"],trnSave:Meetup.Copy["common.save"],trnMore:Meetup.Copy["common.more"]};templates[a].current=$("#"+a).html();var d=templates[a].edit(c);$("#"+a).html(d),Meetup.venueHelper.updateStates(),$("#"+a+" .textInputTip").TextInputTip(),$.plugin("venuePicker",venuePicker),$("#event-where-field").venuePicker({callback:setVenue});var e=$("#event-where-field").data("venuePicker");$("#venueId").bindValidation([{rule:b}]).addClass("validate"),$("#event-where-submit").bind("click",function(){$("#venueId").trigger("validate")}),$("#cancel-where").click(function(b){b.preventDefault(),$(this).unbind();var c=$("#"+a);c.html(templates[a].current),c.hasClass("complete")&&c.data("hoverToEdit").enable()})},checkField=function(a){var a=$(a);return""==$.trim(a.val())||a.val()==a.attr("title")},clearWhere=function(){var a={id:-1,lat:Chapter.lat,lon:Chapter.lon};setVenue(a)},setHowToFindDisplay=function(a){if(a){var b=(Meetup.Copy,{value:a}),c=templates["event-howToFindUs"].display(b);$el_howToFindUs.html(c).data("value",a),$el_howToFindUs.data("hoverToEdit").enable()}else $el_howToFindUs.remove()},setVenue=function(a){if(a.id>0||-1==a.id){var b={arg_member:memberId,arg_chapter:chapterId,arg_eventToken:defaults.eventId,arg_value:-1==a.id?0:a.id,arg_eventEditToken:Meetup.Data.eventEditToken,method:"updateEventVenue"},c=a.name,d=a.desc,e=a.mapAddress,f=a.id,g=a.lat||null,h=a.lon||null;Meetup.RemoteApi.post({dataType:"json",data:b,success:function(a){var b,i;if(a.success&&f>0)currentVenue=a,i={venuename:"new"==a.from?escapeHTML(c):c,venueaddress:"new"==a.from?escapeHTML(d):d,mapurl:Meetup.venueHelper.getMapAddressLink(e),lat:g,lon:h,name:Member.name,editMapCopy:Meetup.Copy.editMap,url:Chapter.groupUrl+"members/"+Member.id,canEditMap:Meetup.Data.eventId>0?!0:!1,trnMap:Meetup.Copy["common.mapLcase"]},b=$("#event-where"),setCompletionStatus(b,!0),b.data("id",f).data("name",c).data("address",d).html(Handlebars.compile(Meetup.EventDetailMustache.where.display)(i)).data("hoverToEdit").enable();
else{currentVenue=null,b=$("#event-where"),setCompletionStatus(b,!1);var j={trnAddLocation:Meetup.Copy["group.event.addLocation"],trnNeedsALocation:Meetup.Copy["group.event.needsALocationLabel"]};b.data("id","").data("name","").data("address","").html(Handlebars.compile(Meetup.EventDetailMustache.where.empty)(j)).data("hoverToEdit").disable()}return muEvent.isGhost?void window.location.reload():void 0},fail:function(){alert("Sorry, there was a problem. Please try again.")}})}else if(0==$("#errorList_addy").length){var i=$('<ul id="errorList_addy" class="inlineErrorMsgs" style="width: auto" ><li class="inlineErrorMsg">We couldn\'t find your location. Please double check the address.</li></ul>');i.insertBefore($("#venueId"))}},setEventTime=function(a,b){$("#errorList_event-when-display").remove();var c={arg_member:memberId,arg_chapter:chapterId,arg_eventToken:defaults.eventId,arg_startValue:a,arg_endValue:b,arg_eventEditToken:Meetup.Data.eventEditToken,method:"updateEventLocalTimeWithEnd"},d=function(a){var b;b="invalid_value"==a?"This date is in the past, or we can't understand it.":"Sorry, there was a problem. Please try again.";var c=$('<ul style="width: 475px;" class="inlineErrorMsgs" id="errorList_event-when-display"><li class="inlineErrorMsg">'+b+"</li></ul>");$("#editWhen").append(c)};Meetup.RemoteApi.post({dataType:"json",data:c,success:function(b){var c;if("undefined"!=typeof b.error)return void d(b.error);if(muEvent.isGhost)return void window.location.reload();if(b.success&&""!=a){var e=b.success.split(" "),f=e[0].split("-"),g=e[1].split(":"),h=new Date(f[0],f[1]-1,f[2],g[0],g[1],g[2],0),i="";if(""!=b.enddatetime){var j=b.enddatetime.split(" "),k=j[0].split("-"),l=j[1].split(":"),m=new Date(k[0],k[1]-1,k[2],l[0],l[1],l[2],0);i=("0"==b.ismultiday?"":Meetup.i18N.formatDate(m,"full")+", ")+Meetup.i18N.formatTime(m,"short")}c={date:Meetup.i18N.formatDate(h,"full"),time:Meetup.i18N.formatTime(h,"short"),name:Member.name,url:Chapter.groupUrl+"members/"+Member.id,isDefaultEndTime:"0"==b.duration?1:0,to:Meetup.Copy.prepositionForDateRange,endDateTime:i,isMultiDay:"0"==b.ismultiday?0:1,trnNeedsADate:trn("group.event.needsADateLabel","Needs a date"),trnAddDate:trn("group.event.addDate","Add date")},setdate=Meetup.i18N.formatDate(h,"short"),settime=Meetup.i18N.formatTime(h,"short"),$("#event-when").html(templates["event-when"].display(c)).data("hoverToEdit").enable()}else{var n={trnAddDate:Meetup.Copy["group.event.addDate"],trnNeedsADate:Meetup.Copy["group.event.needsADate"]};$("#event-when").html(Handlebars.compile(Meetup.EventDetailMustache.when.empty)(n)).data("hoverToEdit").disable()}},fail:d})},updateHowToFindUs=function(a){var b=a||"",c={method:"updateEventHowToFind",arg_member:memberId,arg_chapter:chapterId,arg_eventToken:defaults.eventId,arg_value:b};Meetup.RemoteApi.post({data:c,success:function(){setHowToFindDisplay(a)},error:function(){$el_howToFindUs.data("hoverToEdit").enable()}})},_makeDateStringFromDom=function(a,b,c){if(0===$(a).length)return"";var d=$.trim($(a).val()),e=$(c).val()||null,f=$(b).val().split(":"),g=parseInt(f[0],10),h=parseInt(f[1],10),i="1"==e&&12>g?g+12:"0"==e&&12==g?0:g,j=i+":"+h+":00",k=d+" "+j;return k},updateEventTime=function(){var a=_makeDateStringFromDom("#formattedDate","#event-when-time","#event-when-ampm"),b=_makeDateStringFromDom("#formattedEndDate","#event-end-when-time","#event-end-when-ampm");setEventTime(a,b);var c=$("#event-when");setCompletionStatus(c,!0)},updateEventTitle=function(){var a={arg_member:memberId,arg_chapter:chapterId,arg_eventToken:defaults.eventId,arg_value:$.trim($("#event-title-field").val()),arg_eventEditToken:Meetup.Data.eventEditToken,method:"updateEventTitle"};Meetup.RemoteApi.post({dataType:"json",data:a,success:function(a){var b=$.trim(a.success),c={title:b};$("#event-title").html(templates["event-title"].display(c)).data("name",b).data("hoverToEdit").enable(),$("#event-title").find("h1").shyize({limit:20})},fail:function(){alert("Sorry, there was a problem. Please try again.")}})},updateWhoCanEdit=function(a){a.preventDefault();var b=$(a.target).parent(),c=b.data("event"),d=b.data("onlyorg"),e=b.text(),f={arg_member:Member.id,arg_chapter:Chapter.id,arg_eventToken:c,arg_value:d,arg_entireSeries:!1,method:"updateOrgOnlyEditPref"};Meetup.RemoteApi.post({dataType:"json",data:f,success:function(){$("#who-can-edit").html(e),$(document.body).trigger("click")},fail:function(){alert("Sorry, there was a problem. Please try again.")}})},betterParseInt=function(a){var b=parseInt(a,10);return isNaN(b)&&(b=0),b},cleanupNoList=function(a,b){var c=(parseInt(defaults.currentRSVP,10),parseInt(a,10)),d=$("#no-list"),e=$("#no-list-count"),f=betterParseInt(d.data("count"));switch(c){case 4:case 3:--f,e.html(f),0===f&&d.addClass("jsStartHidden");break;case 2:0===f&&d.removeClass("jsStartHidden"),++f,e.html(f)}d.data("count",f);var g=$("#wait-list"),h=$("#wait-list").find(".rsvp-count-waiting:first");g.length>0&&(h.html(b),0===parseInt(b,10)?g.addClass("jsStartHidden"):g.removeClass("jsStartHidden"))},addToRSVP=function(a,b){var c,d=a.response,e=templates["addToRsvp-li"],f={name:Member.name,memberid:Member.id,url:Chapter.groupUrl+"members/"+Member.id,photo:Member.memberThumb,comment:a.comment,guests:a.guests>0,guestcount:a.guests,blank:Meetup.Data.blankgif};if($("#rsvp_"+Member.id).length>0&&(c=$("#rsvp_"+Member.id)),d>2){if(3==d)c&&c.remove(),$rsvpList.find(".rsvp-header").after(e(f));else{if(4==defaults.currentRSVP)c.replaceWith(e(f));else{if(c&&c.remove(),0==$("#wait-list").length){var g=$(templates["waitlist-header-li"]);$rsvpList.append(g),$rsvpList.find("li:first").apppend(Meetup.Copy.xxWaiting.replace("__COUNT__",0))}$rsvpList.append(e(f))}$("#wait-list-count").html($("#wait-list").nextAll().length)}$("#rsvp_"+Member.id).fadeIn("slow")}else 2==d&&(c&&c.remove(),$("#rsvp-list-no").prepend(e(f)),$("#rsvp_"+Member.id).fadeIn("slow"));cleanupNoList(d,b.waitingCount),defaults.currentRSVP=d},loadRedactor=function(){{var a={init:function(a,b){return this.descriptionRedactor=new Meetup.Redactor($(b)),this},loadOnClick:function(a){return a.preventDefault(),this.descriptionRedactor.activate(),displayDescEdit(a),this}};$.plugin("descEditor",a)}$("#short_desc").descEditor()},loadTiny=function(){var a=$("#event-description-wrap"),b={w:a.outerWidth(),h:a.outerHeight()};b.h<300&&(b.h=300);{var c={buttons1:"addImageCustom, imageAlign, separator, fontsizeselect, forecolor, separator, bold, italic, separator, link, unlink, separator, pasteword, code",buttons2:"",buttons3:""};$.plugin("descEditor",Meetup.tinymce_details)}$("#short_desc").descEditor({h:b.h,w:b.w,plugins:"-emotions, -paste, -pasteword, -spellchecker, -imgAlign",buttons:c,html:Meetup.Data.eventDescription,callback:displayDescEdit,clickElm:0,wrapElm:"#event-description-wrap",addClass:"event-desc",loadPlugins:function(){tinymce.create("tinymce.plugins.EmotionsPlugin",{init:function(a){a.addCommand("mceEmotion",function(){});a.addButton("addImageCustom",{title:"Add Image",image:"http://img1.meetupstatic.com/img/tinymce/advanced/img/addImageCustom.png",onclick:function(){Meetup.PhotoDialog.makeRequests(),$("#pickerDiv").trigger("appear")}})}}),tinymce.create("tinymce.plugins.PasteWordPlugin",{init:function(a){a.addCommand("mcePasteWord",function(){});var b=$("#wordEditorDialog"),c=$get("wordSource"),d=function(){c.innerHTML="",setTimeout(function(){c.focus()},500)},e=function(){b.trigger("dismiss"),tinyMCE.activeEditor.execCommand("mceInsertContent",!1,$("#wordSource").val().replace(/\u000A/gi,"<br />").replace(/\u000D/gi,"<br />"))};$(function(){b.bind("appear",d),$("#updateWordButton").click(e)}),a.addButton("pasteword",{title:"Paste From MS Word",cmd:"mcePasteWord"})}}),tinymce.PluginManager.add("emotions",tinymce.plugins.EmotionsPlugin),tinymce.PluginManager.add("pasteword",tinymce.plugins.PasteWordPlugin)}})},displayDescEdit=function(a,b){a&&a.preventDefault(),eventEditorToggle(),b&&!Meetup.Data.Redactor.useRedactor&&b.setContent(Meetup.FixTinymceFlash($("#event-description-wrap").html()))},updateEventDesc=function(a,b){a.preventDefault();var c={arg_member:memberId,arg_chapter:chapterId,arg_eventToken:defaults.eventId,arg_value:b,arg_eventEditToken:Meetup.Data.eventEditToken,method:"updateEventDescr"};Meetup.RemoteApi.post({data:c,success:function(a){return muEvent.isGhost?void window.location.reload():(eventEditorToggle(),void("string"==typeof a.success?(Meetup.Data.eventDescription=$.trim(a.success),$("#event-description-wrap").html(Meetup.Data.eventDescription),Meetup.Data.eventDescription.length>0?($("#event-desc").data("hoverToEdit").enable(),$("#event-description-empty-nudge").addClass("jsStartHidden"),$("#event-description-wrap").removeClass("jsStartHidden"),loadEmbeds($("#eventdets"))):($("#event-description-empty-nudge").removeClass("jsStartHidden"),$("#event-description-wrap").addClass("jsStartHidden"))):$("#event-description-empty-nudge").removeClass("jsStartHidden")))},fail:function(){alert("Sorry, there was a problem. Please try again.")}})},eventEditorToggle=function(){$("#edit-desc-wrap").toggleClass("jsStartHidden"),$("#event-description-wrap").toggleClass("jsStartHidden"),$("#event-desc-submit").removeClass("disabled").removeAttr("disabled")},cancelEventDesc=function(a){if(a.preventDefault(),eventEditorToggle(),Meetup.Data.Redactor.useRedactor){var b=$("#short_desc").getObject();b.setCode($("#event-description-wrap").html())}Meetup.Data.eventDescription.length>0?$("#event-desc").data("hoverToEdit").enable():$("#event-description-empty-nudge").removeClass("jsStartHidden")},doLazyLoad=function(){var a=$("img[data-src]"),b=$("a[data-src]"),c=a.length+b.length<80,d=c?"fadeIn":"show",e=c?500:null;queueSize=c?5:null,a.lazyImg({effect:d,effectspeed:e,threshold:300,throttleQueue:queueSize}),b.lazyImg({effect:d,effectspeed:e,threshold:300,background:!0,throttleQueue:queueSize})},pageComments=function(a){a.preventDefault();var b=$(this),c=b.data("pages"),d=b.data("page");b.spin("start",{version:"small",hideContent:!0}),$.ajax({url:document.location.toString().replace(/\?.*$/,""),type:"GET",dataType:"json",data:{__fragment:"comments",comment_pagesize:COMMENT_PAGE_SIZE,comment_offset:COMMENT_PAGE_SIZE*d},success:function(a){b.before(a[0]),d++,d>=c?b.remove():b.data("page",d),doLazyLoad(),Member.isMember&&$("#conversation .textInputTip").TextInputTip()},fail:function(){alert("Sorry, there was a problem. Please try again.")},complete:function(){b.spin("stop")}})},setSuggestParam=function(){var a=new String(window.location);if(qs=a.split("?")[1]){var b=parseQueryString(qs);b&&b[SUGGEST_PARAM_NAME]&&(suggestParamValue=b[SUGGEST_PARAM_NAME])}},handleSuggestParam=function(){switch(suggestParamValue){case"date":$("#event-when a.editor").trigger("click");break;case"venue":$("#event-where a.editor").trigger("click");break;default:return}},editFeature=function(a){a.preventDefault(),$(document.body).trigger("click");var b,c=$(a.currentTarget),d="1"==c.data("featured"),e=c.data("event");b=d?{method:"unFeaturedEvent",arg_member:Member.id,arg_chapter:Chapter.id,arg_event:e}:{method:"setFeaturedEvent",arg_member:Member.id,arg_chapter:Chapter.id,arg_eventToken:e},Meetup.RemoteApi.post({data:b,success:function(){if(d)c.removeClass("unstar_icon").addClass("star_icon").text(c.data("copyfeature")).data("featured","0"),$("#eventdets .doc-content:first").removeClass("featured-detail-header").find(".featured-callout:first").css("display","none");else{if(isNaN(parseInt(e)))return window.location.reload(),!0;c.removeClass("star_icon").addClass("unstar_icon").text(c.data("copyunfeature")).data("featured","1"),$("#eventdets .doc-content:first").addClass("featured-detail-header").find(".featured-callout:first").css("display","block")}}})},announceThatMeetup=function(a){a&&a.preventDefault&&a.preventDefault(),$(this).hasClass("submitted")||(Meetup.Tracking.trackingServerTrack({code:"org_ann"}),Meetup.RemoteApi.post({url:Meetup.URL.chapterapi,data:{method:"announceEvent",arg_eventToken:defaults.eventId,arg_member:State.Member.id},success:function(){var a=$("#announce-notice");a.fadeOut("slow",function(){a.remove()}),$("#announce-event-dialog").html('<p class="announce-success">'+Meetup.Copy.yourMeetupIsAnnounced+'</p><p style="text-align: center"><a href="#" class="cancel-announce">'+Meetup.Copy.close+"</a></p>"),isSessionStorageAvailable()&&sessionStorage.setItem("announceEvent-"+muEvent.id,1)}}),$(this).addClass("submitted"))},showAnnounceDialog=function showAnnounceDialog(forceContentRefresh){var announceDialog=$("#announce-event-dialog"),oldTemplate=announceDialog.html();forceContentRefresh?(announceDialog.addClass("loading").html('<img src="http://img1.meetupstatic.com/img/ajax_loader_trans.gif" />').dialog().trigger("open"),$.ajax({type:"GET",data:{__fragment:"announceDialog"},success:function success(data){var content=eval(data)[0];announceDialog.html(content)},error:function(){announceDialog.html(oldTemplate)},complete:function(){announceDialog.removeClass("loading")}})):announceDialog.dialog().trigger("open")},uniqueArray=function(a){for(var b={},c=0,d=a.length,e=[];d>c;)!b[a[c]]&&e.push(a[c]),b[a[c++]]=1;return e},removeFromArray=function(a,b){for(var c=0,d=this.length;d>c;c++)b[c]==a&&b.splice(c,1)},sendGreetings=function(){greetingsQueue.length>0&&(uniqueArray(greetingsQueue),Meetup.RemoteApi.post({data:{method:"sendPostEventGreeting",arg_member:Member.id,arg_chapter:Chapter.id,arg_event:muEvent.id,arg_members:greetingsQueue.join(",")},success:function(){return!1},error:function(){return!1}}),greetingsQueue=[])},initiateGreetings=function(a,b){greetingsQueue.push(b),uniqueArray(greetingsQueue),a.addClass("g2cu")},removeGreeting=function(a,b){a.removeClass("g2cu"),a.find("span.note:first").remove(),removeFromArray(b,greetingsQueue),jQuery.ajax({type:"POST",url:"/api/",data:{method:"removeMemberHandshake",arg_member:Member.id,arg_chapter:Chapter.id,arg_event:muEvent.id,arg_targetMember:b},success:function(){return!1},error:function(){return!1}})},goodToSeeYou=function(a){var b=a.data("attendeeid");a.hasClass("g2cu")?removeGreeting(a,b):initiateGreetings(a,b)},init=function(a){var b=$("#org-report-spam");if(b.length>0){var c={GROUP_URL:Chapter.groupUrl,EVENT_ID:b.data("eventid"),CREATOR_ID:b.data("creatorid")},d=$(templates.dialogSpam(c)).dialog({autoOpen:!1,closeText:"x",modal:!0,minHeight:!1,width:"500px"});$("#cancel-report-spam").click(function(a){a.preventDefault(),d.dialog("close")}),b.click(function(a){a.preventDefault(),d.dialog("open")})}if(defaults=$.extend(defaults,a||{}),$(Meetup.eventAndRsvp).on("change:saved",refresh),doLazyLoad(),$(".hasMaxLen").CharCounter(),$("#bio-edit-form textarea").autosize(),$(".rsvp-tools .D_dropdownToggler").actionDropdown({delegate:!1,dontAppend:!0,right:!0}),$(".j-who-can-edit.D_dropdownToggler").actionDropdown({delegate:!1,dontAppend:!0,right:!0}),$("#comment-pager").AjaxProgress().click(pageComments),$.browser.msie&&$.browser.version<8){var e=$rsvpList.find(".event-host");$(".skull_select_on_rsvp .D_dropdownToggler").bind("click",function(){e.hide()}),$("#C_page").bind("hide_dialog",function(){e.show()})}evtdets.dialogPopup(),window.finishPopup=function(a,b){$(".email-tool-on-rsvp > a:first").data("dialog").dialog("close"),b&&window.location.replace(b)},$("#rsvpBoxContainer .J_signupLink").click(function(){var a=Meetup.FB.get("returnUri");Meetup.FB.set("returnUri",[Meetup.Data.grouphome.baseUrl,"quick_join/?",$.param({joinFrom:"event",eventId:muEvent.id,response:3,real_action:"rsvp",token:muEvent.csrfToken,forceUpdateRsvp:"true"})].join("")),$("#dialogHello").bind("close",function(){Meetup.FB.set("returnUri",a)})});var f=$("#full-friend-list-dialog");if(f.length&&(f.dialog(),$("#see-all-friends-attending").bind("click",function(a){a.preventDefault(),f.dialog("open")})),defaults.hasPayment&&(Meetup.Payment.init(),$("#refundBox").dialog({autoOpen:!1,closeText:"x",modal:!0,minHeight:!1,width:"500px"}),$(document).delegate("#eventdets .refundLink","click",function(a){a.preventDefault(),$("#refundBox").dialog("open")}),$("#refundCloseLink").click(function(a){a.preventDefault(),$("#refundBox").dialog("close")})),Member.isMember&&!defaults.isPast&&checkQueryEd(),Member.isMember){$(".ie6, .ie7, .ie8, .ie9").length&&$(".textInputTip").TextInputTip(),defaults.canEdit&&($(".J_dialog").dialog(),evtdets.delegate("a.venue-toggle","click",Meetup.venueHelper.switchVenueTab).delegate("a.page-venues","click",Meetup.venueHelper.pageVenues).delegate("#event-where-country","change",Meetup.venueHelper.setState),setSuggestParam(),suggestParamValue&&handleSuggestParam(),evtdets.hoverToEdit({delegate:!0,each:{"#event-desc":{noCancel:!0,changeCallback:function(a){$("#event-description-empty-nudge").addClass("jsStartHidden"),$("#short_desc").data("descEditor").loadOnClick(a)}},"#event-where":{changeCallback:function(a,b){editWhere(a,"event-where",$(b).data())},cancelCallback:function(){clearWhere()}},"#event-howToFindUs":{changeCallback:function(){var a={value:$el_howToFindUs.data("value"),copy_save:mc["common.save"],copy_cancel:mc["common.cancel"],copy_label:mc["group.event.howToFindUs"]},b=templates["event-howToFindUs"].edit(a);$el_howToFindUs.html(b),$("#event-howToFindUs-field").CharCounter()},cancelCallback:function(){updateHowToFindUs()}},"#event-when":{noCancel:!0,changeCallback:function(a){editWhen(a,"event-when")},cancelCallback:function(){clearWhen()}},"#event-title":{noCancel:!0,changeCallback:function(a){editTitle(a,"event-title")}}}})),$el_howToFindUs=$("#event-howToFindUs"),$el_howToFindUs.on("click","#event-howToFindUs-submit",function(){var a=this.form.elements["how-to-find-us"].value;updateHowToFindUs(a)}).on("click","#event-howToFindUs-cancel",function(){setHowToFindDisplay($el_howToFindUs.data("value"))}),Meetup.Data.Redactor.useRedactor?loadRedactor():loadTiny(),$("#cancel-desc-edit").click(cancelEventDesc),$("#event-desc-submit").click(function(a){var b;$(this).addClass("disabled").attr("disabled","disabled"),Meetup.Data.Redactor.useRedactor?($("#short_desc").data("redactor").cleanEmbeds(),b=$("#short_desc").val()||""):b=Meetup.showTinymceFlash(tinyMCE.activeEditor.getContent()),updateEventDesc(a,b)});var g=$("#J_attendanceLink");if(g.length>0){var h=function w(a){a.preventDefault(),Meetup.Script.include(Meetup.Data.attendanceScript),g.unbind("click",w)};g.bind("click",h)}var i=$("#rsvpEdit");if(i.length>0){var j=function x(a){a.preventDefault(),Meetup.Script.include(Meetup.Data.rsvpeditScript),i.unbind("click",x)};i.bind("click",function(a){Meetup.RelatedBar&&Meetup.RelatedBar.destroy(),j(a)})}var k=$("div.pending-action");k.declineEvent({success:function(a){window.location.replace([Meetup.Data.grouphome.baseUrl,"events/making/","?declined=",a.eventtitle].join(""))}}),evtdets.reportEventAndMember();var l=$("#unpromoted-event-alert-share");if(l.length>0){$.plugin("unpromoSsWidget",socialshareWidget);var m={eventid:l.data("event"),copy:l.data("copy"),type:l.data("type"),shorturl:l.data("shorturl"),position:"right",of:l,my:"left top",at:"left top",offset:"-259 -30"};l.unpromoSsWidget(m);var n=l.data("unpromoSsWidget");l.click(function(){n.showWidget()}),l.bind("socialshareSuccess",function(a,b){n.showMore({title:Meetup.Copy.youSharedOn.replace("__SITES__",b.join(Meetup.Copy.conjunctionAnd)),body:""}),l.bind("socialshareClose",function(){l.fadeOut()})}),l.bind("socialshareError",function(){n.showMore({title:"Error",body:""}),l.bind("socialshareClose",function(){l.fadeOut()})})}defaults.isPast&&$rsvpList.on("mouseenter",".gtsy a",function(){$(this).trigger("widgetCleanupShowTimeout").trigger("hideWidget")})}defaults.isPast||Meetup.RsvpBoxYesNo.init(),$(".event-attendee-section").on("click","#see-all-no-list",function(){return $("#rsvp-list-no").hasClass("no-display")?($("#rsvp-list-no").removeClass("no-display"),$(this).text(trn("group.event.rsvpList.hideAll","Hide all")).blur()):($("#rsvp-list-no").addClass("no-display"),$(this).text(trn("group.event.rsvpList.seeAll","See all")).blur()),!1});var o=function(){{var a=$(this),b=a.parent(),c=b.next(".full");c.css("height")}b.addClass("display-none"),c.removeClass("display-none")};if(evtdets.on("click",".event-stack-no-element-nudge",function(a){a.preventDefault(),$("#ideaCommentInput").focus().trigger("focusin")}).on("click",".event-section .see-all",o).on("click",".event-section .show-hidden-descr",o).on("click",".event-attendees .nav-appendPager",doAttendeeListWebAjax),isSessionStorageAvailable()&&sessionStorage.getItem("announceEvent-"+muEvent.id))$("#announce-notice").remove();else{var p=$("#announce-event-dialog");p.length&&(p.dialog().delegate(".cancel-announce","click",function(a){a.preventDefault(),p.dialog("close")}).delegate("form","submit",announceThatMeetup),$("#announce-this-meetup").bind("click",function(a){a.preventDefault(),showAnnounceDialog(!0)}),p.hasClass("success-announce")&&(p.dialog({show:"slide"}),showAnnounceDialog(!1)))}var q=Meetup.eventAndRsvp.get("saved"),r=window.location.search.substring(1),s=getUrlVars(r);!Member.isMember||defaults.isPast||!s||s.fromEmail!==muEvent.id&&s.fromJoin!==muEvent.id||q.Rsvp.response!=Meetup.eventAndRsvp.status.YES||Meetup.RsvpBoxYesNo.showDirector(),$rsvpList.length&&bindAttendeePopover($rsvpList);var t=$("#rsvp-list-waitlist");t.length&&Meetup.MemberInfoWidget(t,{trackingCode:"sj51c",hideMemberPhoto:!0});var u=$("#rsvp-list-no");u.length&&Meetup.MemberInfoWidget(u,{trackingCode:"sj51c",hideMemberPhoto:!0});var v=$("#fb-friends-attending");v.length&&(Meetup.MemberInfoWidget(v,{offset:"0 -29",trackingCode:"sj51c",hideMemberPhoto:!0}),v.delegate(".toggle-facepile","click",toggleRsvpFacepile)),evtdets.delegate("span.set-meeting-location","click",function(a){a.preventDefault();var b=$(this),c=b.data("lat"),d=b.data("lon"),e=$("#meetingLocation"),f=$("#meetingLocationIframe"),g=/meetup.com/.test(Chapter.groupUrl)?Meetup.URL.root:Chapter.groupUrl;f.length>0?e.dialog("open"):(f=$('<iframe id="meetingLocationIframe" src="about:blank" width="444" height="300" border="0" frameborder="0" scrolling="no" />').insertBefore("#meetingLocationCoordsForm").attr("src",g+"frame/event_meeting_location_map.jsp?lat="+c+"&lon="+d),e.dialog({autoOpen:!0}).find("a.primary").click(function(a){a.preventDefault(),saveMeetingLocation(f[0])}).end().find("a.D_dialog_cancel").click(function(a){a.preventDefault(),e.dialog("close")}))}),Meetup.Talk.init({eventId:defaults.eventId,itemTypeToken:a.itemTypeToken,comment_table_name:a.comment_table_name,comment_table_id:a.comment_table_id,comment_reply:a.comment_reply,comment_read:a.comment_read,comment_like:a.comment_like,comment_new:a.comment_new,like_reply_id:a.like_reply_id}),$("#event-comments-section textarea").autosize(),setInterval(sendGreetings,5e3),$(window).unload(sendGreetings),$rsvpList.on("click",".j-gtsy",function(a){a.preventDefault(),goodToSeeYou($(this))}),$rsvpList.on("update-guests",updateGuestCount),loadEmbeds($("#eventdets")),bindToolbarEvents(),$(document).trigger("track:microtarget")},toggleRsvpFacepile=function(a){a.preventDefault();var b=$("#fb-friends-attending .rsvp-meta-facepile-wrap"),c=b.parent().find(".change-copy");b.data("initialHeight")||b.data("initialHeight",b.height()),b.hasClass("expanded")?(b.css("height",b.data("initialHeight")),c.length&&c.text(c.data("copymore"))):(b.css("height","auto"),c.length&&c.text(c.data("copyless"))),b.toggleClass("expanded")},checkQueryEd=function(){var a=getEdQuery();switch(a){case"venue":var b=$("#event-where");editWhere(void 0,"event-where",b.data());break;case"date":var c=$("#event-when");editWhen(void 0,"event-when",c.data());break;case"rsvp":var d=$("#rsvp-mine .rsvp-change");d.length>0&&d.click()}},getEdQuery=function(){var a="",b=window.location.search.match(/(^\?|&)ed\=(.+?)($|&)/);if(b){var a=b[2];0===a.indexOf("&")&&(a="")}return a},saveMeetingLocation=function(a){var b=a.contentWindow.venueMarker.getPosition();Meetup.RemoteApi.post({data:{method:"setEventVenCoords",arg_member:memberId,arg_venueId:$("#event-where").data("id"),arg_eventId:Meetup.Data.eventId,arg_lat:b.lat(),arg_lon:b.lng(),arg_updateVenue:"false"},success:function(){$("#meetingLocation").dialog("close"),evtdets.find(".set-meeting-location:first").data({lat:b.lat(),lon:b.lng()}),$("#event-where-display").find("h3 a:first").attr({href:"http://maps.google.com/maps?q="+b.lat()+","+b.lng(),title:"Lat: "+b.lat().toFixed(6)+" / Lon: "+b.lng().toFixed(6)})}})},bindAttendeePopover=function(a){Meetup.MemberInfoWidget(a,{trackingCode:"sj51c",hideMemberPhoto:!0,tipTargetSelector:".mem-photo-small"})},bindToolbarEvents=function(a){$("#eventdets .eventdets-header-org-actions").editEvent(),$(".delete-event").cancelEvent({dispatch:!1}),$(".update-who-can-edit").click(updateWhoCanEdit),$("#event-feature").click(editFeature),$("#addToCalAction .D_dropdownToggler").actionDropdown({delegate:!1,dontAppend:!1,right:!0}),a&&Meetup.ShareThis.init()},setRsvpsUntil=function(a){var b=$("#announce-notice");if(b.length){var c,d,e="member-photo",f="no-member",g="my-photo",h=b.find("#"+g),i=b.find("."+f).first();if(a){if(!h.length){var j="<img src='"+Member.memberThumb+"' />";i.removeClass(f).addClass(e).attr("id",g).html(j)}}else h.removeClass(e).addClass(f).attr("id",null).html("?");c=b.find("."+f).length,0===c?b.remove():(d=c>1?Meetup.Copy.xMoreRsvps.replace("__COUNT__",c):Meetup.Copy.oneMoreRsvp,b.find(".note-header").html(d))}},refresh=function(a,b,c,d){0===d.Event.status&&setRsvpsUntil(d.Rsvp.response==Meetup.eventAndRsvp.status.YES),"false"==b.Event.isGhostEvent&&(Meetup.WebAjax("rsvpChange",".eventdets-header-org-actions, .full-attendee-list").done(function(){Meetup.EventDetails.doLazyLoad(),Meetup.EventDetails.bindAttendeePopover($(".full-attendee-list")),bindToolbarEvents(!0)}),Meetup.WebAjax("rsvpChangeFee","#event-fee"))};StarRating.create($("#event-rating-1"),onRatingChanged),Meetup.EventDetails={init:init,doLazyLoad:doLazyLoad,bindAttendeePopover:bindAttendeePopover,refresh:refresh},Meetup.Data.initConfig&&Meetup.EventDetails.init(Meetup.Data.initConfig)})})}(),define("site/chapter/event/eventDetails",function(){});
//# sourceMappingURL=eventDetails.map