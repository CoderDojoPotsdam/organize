!function(a,b){"function"==typeof define&&define.amd?define(["angular","spinjs"],b):b(window.angular,window.Spinner)}(this,function(a,b){"use strict";function c(b){var d=!1,e=1;return"boolean"==typeof b&&(d=b,b=arguments[1]||{},e++),a.forEach([].slice.call(arguments,e),function(e){var f,g,h,i,j;for(i in e)j=b[i],h=e[i],b!==h&&(d&&h&&(a.isObject(h)||(f=a.isArray(h)))?(g=f?j&&a.isArray(j)?j:[]:j&&a.isObject(j)?j:{},b[i]=c(d,g,h)):void 0!==h&&(b[i]=h))}),b}a.module("darthwade.dwLoading",[]).value("dwLoadingOptions",{active:!1,text:"Loading...",className:"",overlay:!0,spinner:!0,spinnerOptions:{lines:12,length:7,width:4,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:2,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"dw-spinner",top:"auto",left:"auto",position:"relative"}}).service("dwLoading",["$rootScope","dwLoadingOptions",function(a,b){var d=this;d.setDefaultOptions=function(a){c(!0,b,a)},d.start=function(b){a.$broadcast("$dwLoadingStart",b)},d.finish=function(b){a.$broadcast("$dwLoadingFinish",b)}}]).factory("$loading",["dwLoading",function(a){return a}]).directive("dwLoading",["$window","$compile","dwLoadingOptions",function(d,e,f){return{scope:!0,link:function(d,e,g){d.spinner=null,d.key=g.dwLoading||!1,d.start=function(){d.container&&d.container.addClass("dw-loading-active"),d.spinner&&d.spinner.spin(d.spinnerContainer[0])},d.finish=function(){d.container&&d.container.removeClass("dw-loading-active"),d.spinner&&d.spinner.stop()},d.$watch(g.dwLoadingOptions,function(g){d.finish(),d.options=c(!0,{},f,g);var h=a.element("<div></div>").addClass("dw-loading-body");if(d.container=a.element("<div></div>").addClass("dw-loading").append(h),d.options.overlay&&d.container.addClass("dw-loading-overlay"),d.options.className&&d.container.addClass(d.options.className),d.options.spinner&&(d.spinnerContainer=a.element("<div></div>").addClass("dw-loading-spinner"),h.append(d.spinnerContainer),d.spinner=new b(d.options.spinnerOptions)),d.options.text){var i=a.element("<div></div>").addClass("dw-loading-text").text(d.options.text);h.append(i)}e.append(d.container),(d.options.active||!d.key)&&d.start()},!0),d.$on("$dwLoadingStart",function(a,b){b===d.key&&d.start()}),d.$on("$dwLoadingFinish",function(a,b){b===d.key&&d.finish()}),d.$on("$destroy",function(){d.finish(),d.spinner=null})}}}])});